<!-- ================================================================================= -->
<!-- FILE: assessment.html (UPGRADED & INTEGRATED)                                   -->
<!-- ================================================================================= -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool Assessment | The Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap" rel="stylesheet">
    <style> 
        body { font-family: 'Manrope', sans-serif; } 
        #app-container { visibility: hidden; }
        .question-slide { display: none; }
        .question-slide.active { display: block; }
        .progress-bar { transition: width 0.3s ease; }
    </style>
</head>
<body data-module="assessment" class="bg-slate-100">
    <div id="app-container" class="flex h-screen">
        <div id="sidebar-placeholder"></div>
        <div class="flex-1 flex flex-col overflow-hidden">
            <div id="header-placeholder"></div>
            
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-slate-100 p-4 md:p-8">
                <div class="max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-xl shadow-md">
                    <div id="assessment-container">
                        <h1 class="text-3xl font-bold text-slate-900">Find the Right Tools</h1>
                        <p class="mt-2 text-slate-600 mb-6">Answer a few questions and we'll recommend the best tools from The Hub and our ecosystem to help you achieve your goals.</p>
                        
                        <!-- Progress Bar -->
                        <div class="mb-8">
                            <div class="bg-gray-200 rounded-full h-2">
                                <div id="progress-bar" class="progress-bar bg-indigo-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Question <span id="current-question">1</span> of <span id="total-questions">4</span></p>
                        </div>

                        <form id="assessment-form" class="space-y-6">
                            <!-- Question 1: Primary Goal -->
                            <div class="question-slide active" data-question="1">
                                <label class="block text-lg font-semibold text-slate-800 mb-4">What is your primary goal right now?</label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="goal" value="career" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Organize my career and life achievements</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="goal" value="finance" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Get my personal or business finances in order</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="goal" value="family" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Connect and manage plans with my family/partner</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="goal" value="legal" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Track a legal matter or create a parenting plan</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="goal" value="education" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Learn about my rights and civic responsibilities</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Question 2: Experience Level -->
                            <div class="question-slide" data-question="2">
                                <label class="block text-lg font-semibold text-slate-800 mb-4">How would you describe your experience level?</label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="experience" value="beginner" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Complete beginner - I need guidance on everything</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="experience" value="intermediate" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Some experience - I know the basics but need help organizing</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="experience" value="advanced" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Experienced - I just need better tools to manage everything</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Question 3: Time Commitment -->
                            <div class="question-slide" data-question="3">
                                <label class="block text-lg font-semibold text-slate-800 mb-4">How much time can you dedicate initially?</label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="time" value="minimal" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">30 minutes or less - I need quick wins</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="time" value="moderate" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">1-2 hours - I can invest some time to set things up properly</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="time" value="extensive" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Several hours - I want to do a comprehensive setup</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Question 4: Learning Preference -->
                            <div class="question-slide" data-question="4">
                                <label class="block text-lg font-semibold text-slate-800 mb-4">How do you prefer to learn new things?</label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="learning" value="guided" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Step-by-step tutorials and guided processes</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="learning" value="exploration" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Jump in and explore on my own</span>
                                    </label>
                                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="radio" name="learning" value="structured" class="h-4 w-4 text-indigo-600">
                                        <span class="ml-3">Formal training and structured courses</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Navigation Buttons -->
                            <div class="flex justify-between mt-8">
                                <button type="button" id="prev-btn" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-md hidden">Previous</button>
                                <button type="button" id="next-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-md">Next</button>
                                <button type="submit" id="submit-btn" class="bg-green-600 text-white font-bold py-2 px-6 rounded-md hidden">Get My Recommendations</button>
                            </div>
                        </form>

                        <!-- Results Section -->
                        <div id="assessment-result" class="hidden mt-8 space-y-6">
                            <div class="p-6 bg-indigo-50 border-l-4 border-indigo-500">
                                <h3 class="text-xl font-bold text-indigo-900">Your Personalized Recommendations</h3>
                                <p class="mt-2 text-indigo-800">Based on your answers, here are the tools we recommend:</p>
                            </div>

                            <!-- Hub Tools -->
                            <div id="hub-recommendations" class="bg-white border rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4">
                                    <i class="fas fa-home text-indigo-600 mr-2"></i>From The Hub
                                </h4>
                                <div id="hub-tools" class="space-y-4"></div>
                            </div>

                            <!-- Ecosystem Tools -->
                            <div id="ecosystem-recommendations" class="bg-white border rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4">
                                    <i class="fas fa-network-wired text-green-600 mr-2"></i>From Our Ecosystem
                                </h4>
                                <div id="ecosystem-tools" class="space-y-4"></div>
                            </div>

                            <!-- Start Over Button -->
                            <div class="text-center">
                                <button id="restart-btn" class="bg-gray-600 text-white font-semibold py-2 px-6 rounded-md">
                                    Take Assessment Again
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        class AssessmentTool {
            constructor() {
                this.currentQuestion = 1;
                this.totalQuestions = 4;
                this.answers = {};
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateProgress();
            }

            bindEvents() {
                document.getElementById('next-btn').addEventListener('click', () => this.nextQuestion());
                document.getElementById('prev-btn').addEventListener('click', () => this.prevQuestion());
                document.getElementById('assessment-form').addEventListener('submit', (e) => this.handleSubmit(e));
                document.getElementById('restart-btn').addEventListener('click', () => this.restart());
                
                // Listen for radio button changes
                document.addEventListener('change', (e) => {
                    if (e.target.type === 'radio') {
                        this.updateAnswer(e.target.name, e.target.value);
                    }
                });
            }

            updateAnswer(name, value) {
                this.answers[name] = value;
                this.updateNavigation();
            }

            nextQuestion() {
                if (this.currentQuestion < this.totalQuestions) {
                    document.querySelector(`[data-question="${this.currentQuestion}"]`).classList.remove('active');
                    this.currentQuestion++;
                    document.querySelector(`[data-question="${this.currentQuestion}"]`).classList.add('active');
                    this.updateProgress();
                    this.updateNavigation();
                }
            }

            prevQuestion() {
                if (this.currentQuestion > 1) {
                    document.querySelector(`[data-question="${this.currentQuestion}"]`).classList.remove('active');
                    this.currentQuestion--;
                    document.querySelector(`[data-question="${this.currentQuestion}"]`).classList.add('active');
                    this.updateProgress();
                    this.updateNavigation();
                }
            }

            updateProgress() {
                const progress = (this.currentQuestion / this.totalQuestions) * 100;
                document.getElementById('progress-bar').style.width = `${progress}%`;
                document.getElementById('current-question').textContent = this.currentQuestion;
            }

            updateNavigation() {
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const submitBtn = document.getElementById('submit-btn');

                // Show/hide previous button
                if (this.currentQuestion > 1) {
                    prevBtn.classList.remove('hidden');
                } else {
                    prevBtn.classList.add('hidden');
                }

                // Show next or submit button
                if (this.currentQuestion === this.totalQuestions) {
                    nextBtn.classList.add('hidden');
                    submitBtn.classList.remove('hidden');
                } else {
                    nextBtn.classList.remove('hidden');
                    submitBtn.classList.add('hidden');
                }
            }

            handleSubmit(e) {
                e.preventDefault();
                this.generateRecommendations();
            }

            generateRecommendations() {
                const recommendations = this.calculateRecommendations();
                this.displayRecommendations(recommendations);
                
                // Hide form and show results
                document.getElementById('assessment-form').style.display = 'none';
                document.getElementById('assessment-result').classList.remove('hidden');
            }

            calculateRecommendations() {
                const { goal, experience, time, learning } = this.answers;
                
                let hubTools = [];
                let ecosystemTools = [];

                // Always recommend Flamea Constitution training
                ecosystemTools.push({
                    name: "Constitutional Rights Training",
                    description: "Essential knowledge about your constitutional rights - applicable everywhere and fundamental to all other endeavors.",
                    url: "https://flamea.org/training.html",
                    priority: "high",
                    source: "Flamea"
                });

                // Hub tool recommendations based on primary goal
                switch (goal) {
                    case 'career':
                        hubTools.push({
                            name: "LifeCV",
                            description: "Organize your career achievements, education, and life experiences in one comprehensive dashboard.",
                            url: "#lifecv",
                            features: ["Career timeline", "Achievement tracking", "Skills inventory"]
                        });
                        hubTools.push({
                            name: "Family Hub",
                            description: "Connect your professional goals with family planning and life management.",
                            url: "#family-hub",
                            features: ["Goal coordination", "Family planning", "Shared calendars"]
                        });
                        break;

                    case 'finance':
                        hubTools.push({
                            name: "FinHelp",
                            description: "Comprehensive financial management for personal and business finances.",
                            url: "#finhelp",
                            features: ["Budget tracking", "Investment planning", "Tax preparation"]
                        });
                        hubTools.push({
                            name: "LegalHelp",
                            description: "Legal document management for financial matters and contracts.",
                            url: "#legalhelp",
                            features: ["Contract templates", "Legal document storage", "Compliance tracking"]
                        });
                        break;

                    case 'family':
                        hubTools.push({
                            name: "Family Hub",
                            description: "Central coordination point for family planning, communication, and shared goals.",
                            url: "#family-hub",
                            features: ["Family calendar", "Goal tracking", "Communication tools"]
                        });
                        hubTools.push({
                            name: "LegalHelp",
                            description: "Create parenting plans, family agreements, and legal documentation.",
                            url: "#legalhelp",
                            features: ["Parenting plans", "Family agreements", "Legal templates"]
                        });
                        break;

                    case 'legal':
                        hubTools.push({
                            name: "LegalHelp",
                            description: "Track legal matters, create documents, and manage parenting plans.",
                            url: "#legalhelp",
                            features: ["Case tracking", "Document templates", "Deadline management"]
                        });
                        hubTools.push({
                            name: "FinHelp",
                            description: "Manage the financial aspects of legal matters and planning.",
                            url: "#finhelp",
                            features: ["Legal expense tracking", "Financial planning", "Asset management"]
                        });
                        break;

                    case 'education':
                        hubTools.push({
                            name: "LifeCV",
                            description: "Track your learning journey and educational achievements.",
                            url: "#lifecv",
                            features: ["Education tracking", "Certification management", "Skill development"]
                        });
                        break;
                }

                // Add ecosystem recommendations based on goals and preferences
                if (goal === 'legal' || learning === 'structured') {
                    ecosystemTools.push({
                        name: "Legal Research Tools",
                        description: "Advanced legal research and case law analysis tools from our legal partners.",
                        url: "https://flamea.org/legal-resources.html",
                        source: "Flamea Legal"
                    });
                }

                if (goal === 'education' || learning === 'structured') {
                    ecosystemTools.push({
                        name: "Civic Education Course",
                        description: "Comprehensive course on civic responsibilities, government processes, and citizen participation.",
                        url: "https://flamea.org/civic-education.html",
                        source: "Flamea Education"
                    });
                }

                if (goal === 'finance' || experience === 'beginner') {
                    ecosystemTools.push({
                        name: "Financial Literacy Training",
                        description: "Step-by-step financial education covering budgeting, investing, and financial planning basics.",
                        url: "https://flamea.org/financial-literacy.html",
                        source: "Flamea Finance"
                    });
                }

                return { hubTools, ecosystemTools };
            }

            displayRecommendations(recommendations) {
                this.renderHubTools(recommendations.hubTools);
                this.renderEcosystemTools(recommendations.ecosystemTools);
            }

            renderHubTools(tools) {
                const container = document.getElementById('hub-tools');
                container.innerHTML = tools.map(tool => `
                    <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                        <h5 class="font-semibold text-lg text-gray-900">${tool.name}</h5>
                        <p class="text-gray-600 mt-1">${tool.description}</p>
                        ${tool.features ? `
                            <ul class="mt-2 text-sm text-gray-500">
                                ${tool.features.map(feature => `<li>• ${feature}</li>`).join('')}
                            </ul>
                        ` : ''}
                        <a href="${tool.url}" class="mt-3 inline-block bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md text-sm hover:bg-indigo-700">
                            Get Started
                        </a>
                    </div>
                `).join('');
            }

            renderEcosystemTools(tools) {
                const container = document.getElementById('ecosystem-tools');
                container.innerHTML = tools.map(tool => `
                    <div class="border rounded-lg p-4 hover:shadow-md transition-shadow ${tool.priority === 'high' ? 'border-green-500 bg-green-50' : ''}">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h5 class="font-semibold text-lg text-gray-900">${tool.name}</h5>
                                <p class="text-gray-600 mt-1">${tool.description}</p>
                                <p class="text-sm text-gray-500 mt-2">Source: ${tool.source}</p>
                            </div>
                            ${tool.priority === 'high' ? '<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Recommended</span>' : ''}
                        </div>
                        <a href="${tool.url}" target="_blank" class="mt-3 inline-block bg-green-600 text-white font-semibold py-2 px-4 rounded-md text-sm hover:bg-green-700">
                            Learn More <i class="fas fa-external-link-alt ml-1"></i>
                        </a>
                    </div>
                `).join('');
            }

            restart() {
                this.currentQuestion = 1;
                this.answers = {};
                
                // Reset form
                document.getElementById('assessment-form').reset();
                document.getElementById('assessment-form').style.display = 'block';
                document.getElementById('assessment-result').classList.add('hidden');
                
                // Reset questions
                document.querySelectorAll('.question-slide').forEach(slide => slide.classList.remove('active'));
                document.querySelector('[data-question="1"]').classList.add('active');
                
                this.updateProgress();
                this.updateNavigation();
            }
        }

        // Initialize the assessment tool when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new AssessmentTool();
        });
    </script>
    
    <script src="./assets/js/app.js" type="module"></script>
    <script type="module" src="assets/js/public-page-enhancer.js"></script>
</body>
</html>