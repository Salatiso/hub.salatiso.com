import{G as e,j as a}from"./index-cd94da5a.js";import{r as t}from"./vendor-d6555781.js";import{u as s}from"./i18n-8b62e3c8.js";import{X as l,ai as r,x as o,g as n,al as d,t as i,R as c,D as m,ac as x,h as p,a as u,ap as g,O as h}from"./ui-eef567c7.js";const EmergencyContactManager=({onClose:b})=>{const{t:y}=s(),{guestData:f,setGuestData:j}=t.useContext(e),[v,N]=t.useState("manual"),[k,w]=t.useState(null),[C,M]=t.useState({name:{formatted:"",given:"",middle:"",family:"",prefix:"",suffix:"",nickname:"",phonetic:""},phones:[{type:"mobile",number:""}],emails:[""],addresses:[{label:"Home",line:"",coords:null,status:"idle"}],relationship:"",priority:"medium",jobTitle:"",department:"",website:"",relatedPeople:[],customFields:[],dates:[],files:[]});t.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>w({lat:e.coords.latitude,lng:e.coords.longitude}),()=>w(null),{enableHighAccuracy:!0,timeout:1e4})},[]);const handleInputChange=(e,a)=>{M(t=>({...t,[e]:a}))},calculateProximity=e=>{if(!k)return null;const a=(e.addresses||[]).filter(e=>e.coords).map(e=>haversine(k,e.coords));return a.length?Math.round(Math.min(...a)):null},haversine=(e,a)=>{const toRad=e=>e*Math.PI/180,t=toRad(a.lat-e.lat),s=toRad(a.lng-e.lng),l=Math.sin(t/2)*Math.sin(t/2)+Math.cos(toRad(e.lat))*Math.cos(toRad(a.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},geocodeAddressAtIndex=async e=>{var a;const t=null==(a=C.addresses[e])?void 0:a.line;if(!t)return;M(a=>{const t=[...a.addresses];return t[e]={...t[e],status:"locating"},{...a,addresses:t}});const s=await(async e=>{if(!e||!e.trim())return null;try{const a=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`,{headers:{Accept:"application/json"}});if(!a.ok)throw new Error("geocode_failed");const t=await a.json();return t&&t.length>0?{lat:parseFloat(t[0].lat),lng:parseFloat(t[0].lon)}:null}catch(a){const t=Array.from(e).reduce((e,a)=>e+a.charCodeAt(0),0);return{lat:t%1e3/1e3-34,lng:18+t%1e3/1e3}}})(t);M(a=>{const t=[...a.addresses];return t[e]={...t[e],coords:s,status:s?"ok":"error"},{...a,addresses:t}})},H=(f.emergencyContacts||[]).sort((e,a)=>{if(e.proximity&&a.proximity)return e.proximity-a.proximity;const t={high:3,medium:2,low:1};return t[a.priority]-t[e.priority]});return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-5/6 overflow-hidden",children:a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:"w-64 bg-gray-50 dark:bg-gray-700 p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:y("followMeHome.contacts.title")}),a.jsx("button",{onClick:b,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:a.jsx(l,{})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>N("manual"),className:"w-full p-3 rounded-lg text-left transition-colors "+("manual"===v?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"hover:bg-gray-200 dark:hover:bg-gray-600"),children:[a.jsx(r,{className:"inline mr-2 h-4 w-4"}),y("followMeHome.contacts.tabs.addManually")]}),a.jsxs("button",{onClick:()=>N("upload"),className:"w-full p-3 rounded-lg text-left transition-colors "+("upload"===v?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"hover:bg-gray-200 dark:hover:bg-gray-600"),children:[a.jsx(o,{className:"inline mr-2 h-4 w-4"}),y("followMeHome.contacts.tabs.uploadContacts")]}),a.jsxs("button",{onClick:()=>N("manage"),className:"w-full p-3 rounded-lg text-left transition-colors "+("manage"===v?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"hover:bg-gray-200 dark:hover:bg-gray-600"),children:[a.jsx(n,{className:"inline mr-2 h-4 w-4"}),y("followMeHome.contacts.tabs.manageContacts")," (",H.length,")"]})]})]}),a.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:["manual"===v&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:y("followMeHome.contacts.add.title")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",value:C.name.prefix,onChange:e=>M(a=>({...a,name:{...a.name,prefix:e.target.value}})),placeholder:"Prefix (e.g. Mr, Dr)",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:C.name.given,onChange:e=>M(a=>({...a,name:{...a.name,given:e.target.value}})),placeholder:"First name",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0}),a.jsx("input",{type:"text",value:C.name.middle,onChange:e=>M(a=>({...a,name:{...a.name,middle:e.target.value}})),placeholder:"Middle name",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:C.name.family,onChange:e=>M(a=>({...a,name:{...a.name,family:e.target.value}})),placeholder:"Last name",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[a.jsx("input",{type:"text",value:C.name.suffix,onChange:e=>M(a=>({...a,name:{...a.name,suffix:e.target.value}})),placeholder:"Suffix (e.g. Jr, Sr)",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:C.name.nickname,onChange:e=>M(a=>({...a,name:{...a.name,nickname:e.target.value}})),placeholder:"Nickname",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:C.name.phonetic,onChange:e=>M(a=>({...a,name:{...a.name,phonetic:e.target.value}})),placeholder:"Phonetic pronunciation",className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:y("followMeHome.contacts.add.relationshipLabel")}),a.jsxs("select",{value:C.relationship,onChange:e=>handleInputChange("relationship",e.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"",children:y("followMeHome.contacts.add.relationshipPlaceholder")}),a.jsx("option",{value:"family",children:y("followMeHome.contacts.relationship.family")}),a.jsx("option",{value:"friend",children:y("followMeHome.contacts.relationship.friend")}),a.jsx("option",{value:"colleague",children:y("followMeHome.contacts.relationship.colleague")}),a.jsx("option",{value:"neighbor",children:y("followMeHome.contacts.relationship.neighbor")}),a.jsx("option",{value:"other",children:y("followMeHome.contacts.relationship.other")})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:y("followMeHome.contacts.add.phonesLabel")}),a.jsxs("div",{className:"space-y-2",children:[C.phones.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:e.type,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.phones];return s[t]={...s[t],type:a},{...e,phones:s}})},className:"p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"mobile",children:y("followMeHome.contacts.add.phoneTypes.mobile")}),a.jsx("option",{value:"home",children:y("followMeHome.contacts.add.phoneTypes.home")}),a.jsx("option",{value:"work",children:y("followMeHome.contacts.add.phoneTypes.work")}),a.jsx("option",{value:"other",children:y("followMeHome.contacts.add.phoneTypes.other")})]}),a.jsx("input",{type:"tel",value:e.number,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.phones];return s[t]={...s[t],number:a},{...e,phones:s}})},placeholder:y("followMeHome.contacts.add.primaryPhonePlaceholder"),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,phones:e.phones.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:y("followMeHome.contacts.add.remove")})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,phones:[...e.phones,{type:"mobile",number:""}]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:y("followMeHome.contacts.add.addPhone")})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:y("followMeHome.contacts.add.emailsLabel")}),a.jsxs("div",{className:"space-y-2",children:[C.emails.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"email",value:e,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.emails];return s[t]=a,{...e,emails:s}})},placeholder:y("followMeHome.contacts.add.emailPlaceholder"),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,emails:e.emails.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:y("followMeHome.contacts.add.remove")})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,emails:[...e.emails,""]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:y("followMeHome.contacts.add.addEmail")})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:y("followMeHome.contacts.add.addressesLabel")}),a.jsxs("div",{className:"space-y-3",children:[C.addresses.map((e,t)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx("input",{type:"text",value:e.label,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.addresses];return s[t]={...s[t],label:a},{...e,addresses:s}})},placeholder:y("followMeHome.contacts.add.addressLabelPlaceholder"),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})}),a.jsxs("div",{className:"md:col-span-4 flex items-center gap-2",children:[a.jsx("input",{type:"text",value:e.line,onChange:e=>{return a=t,s=e.target.value,void M(e=>{const t=[...e.addresses];return t[a]={...t[a],line:s,status:s?"locating":"idle"},{...e,addresses:t}});var a,s},onBlur:()=>geocodeAddressAtIndex(t),placeholder:y("followMeHome.contacts.add.addressLinePlaceholder"),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsxs("span",{className:"text-xs",children:["locating"===e.status&&y("followMeHome.contacts.add.geocoding"),"ok"===e.status&&y("followMeHome.contacts.add.geocoded"),"error"===e.status&&y("followMeHome.contacts.add.geocodeFailed")]}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,addresses:e.addresses.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:y("followMeHome.contacts.add.remove")})]})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,addresses:[...e.addresses,{label:"Other",line:"",coords:null,status:"idle"}]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:y("followMeHome.contacts.add.addAddress")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:y("followMeHome.contacts.add.priorityLabel")}),a.jsxs("select",{value:C.priority,onChange:e=>handleInputChange("priority",e.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"low",children:y("followMeHome.contacts.priority.low")}),a.jsx("option",{value:"medium",children:y("followMeHome.contacts.priority.medium")}),a.jsx("option",{value:"high",children:y("followMeHome.contacts.priority.high")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Job Title"}),a.jsx("input",{type:"text",value:C.jobTitle,onChange:e=>handleInputChange("jobTitle",e.target.value),placeholder:"Job title",className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Department"}),a.jsx("input",{type:"text",value:C.department,onChange:e=>handleInputChange("department",e.target.value),placeholder:"Department",className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Website"}),a.jsx("input",{type:"url",value:C.website,onChange:e=>handleInputChange("website",e.target.value),placeholder:"https://example.com",className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Related People"}),a.jsxs("div",{className:"space-y-2",children:[C.relatedPeople.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:e.name,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.relatedPeople];return s[t]={...s[t],name:a},{...e,relatedPeople:s}})},placeholder:"Name",className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:e.relationship,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.relatedPeople];return s[t]={...s[t],relationship:a},{...e,relatedPeople:s}})},placeholder:"Relationship",className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,relatedPeople:e.relatedPeople.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,relatedPeople:[...e.relatedPeople,{name:"",relationship:""}]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Add Related Person"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Important Dates"}),a.jsxs("div",{className:"space-y-2",children:[C.dates.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:e.title,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.dates];return s[t]={...s[t],title:a},{...e,dates:s}})},placeholder:"Title (e.g. Birthday, Anniversary)",className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"date",value:e.date,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.dates];return s[t]={...s[t],date:a},{...e,dates:s}})},className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,dates:e.dates.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,dates:[...e.dates,{title:"",date:""}]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Add Important Date"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Attached Files"}),a.jsxs("div",{className:"space-y-2",children:[C.files.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"file",onChange:e=>{const a=e.target.files[0];a&&M(e=>{const s=[...e.files];return s[t]=a,{...e,files:s}})},className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,files:e.files.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,files:[...e.files,null]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Add File"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custom Fields"}),a.jsxs("div",{className:"space-y-2",children:[C.customFields.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:e.key,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.customFields];return s[t]={...s[t],key:a},{...e,customFields:s}})},placeholder:"Field name",className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"text",value:e.value,onChange:e=>{const a=e.target.value;M(e=>{const s=[...e.customFields];return s[t]={...s[t],value:a},{...e,customFields:s}})},placeholder:"Field value",className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,customFields:e.customFields.filter((e,a)=>a!==t)})),className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},t)),a.jsx("button",{type:"button",onClick:()=>M(e=>({...e,customFields:[...e.customFields,{key:"",value:""}]})),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Add Custom Field"})]})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:()=>{if(!C.name)return;const e=(C.phones||[]).some(e=>e.number&&e.number.trim()),a=(C.emails||[]).some(e=>e&&e.trim());if(!e&&!a)return;const t={id:Date.now(),...C,status:"pending",addedAt:Date.now(),lastNotified:null,proximity:calculateProximity(C)};j(e=>({...e,emergencyContacts:[...e.emergencyContacts||[],t]})),M({name:{formatted:"",given:"",middle:"",family:"",prefix:"",suffix:"",nickname:"",phonetic:""},phones:[{type:"mobile",number:""}],emails:[""],addresses:[{label:"Home",line:"",coords:null,status:"idle"}],relationship:"",priority:"medium",jobTitle:"",department:"",website:"",relatedPeople:[],customFields:[],dates:[],files:[]})},className:"bg-primary-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors flex items-center",children:[a.jsx(d,{className:"mr-2 h-4 w-4"}),y("followMeHome.contacts.add.button")]})})]}),"upload"===v&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:y("followMeHome.contacts.upload.title")}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 text-center",children:[a.jsx(o,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium mb-2",children:y("followMeHome.contacts.uploadSubtitle")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y("followMeHome.contacts.uploadDescription")}),a.jsx("button",{onClick:()=>{const e=[{id:Date.now()+1,name:"John Doe",primaryPhone:"+1234567890",email:"john@example.com",relationship:"Family",priority:"high",status:"pending",addedAt:Date.now(),proximity:5},{id:Date.now()+2,name:"Jane Smith",primaryPhone:"+0987654321",email:"jane@example.com",relationship:"Friend",priority:"medium",status:"pending",addedAt:Date.now(),proximity:12}];j(a=>({...a,emergencyContacts:[...a.emergencyContacts||[],...e]}))},className:"bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:y("followMeHome.contacts.upload.button")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:y("followMeHome.contacts.upload.privacy")})]})]}),"manage"===v&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:y("followMeHome.contacts.listTitle")}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:H.length>0?H.map(e=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.relationship}),e.proximity&&a.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center mt-1",children:[a.jsx(i,{className:"h-3 w-3 mr-1"}),y("followMeHome.contacts.proximity",{distance:e.proximity})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&a.jsxs("button",{onClick:()=>{return a=e.id,void j(e=>({...e,emergencyContacts:e.emergencyContacts.map(e=>e.id===a?{...e,status:"accepted",lastNotified:Date.now()}:e)}));var a},className:"flex items-center text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded",children:[a.jsx(c,{className:"mr-1 h-3 w-3"}),y("followMeHome.contacts.status.pending")]}),"accepted"===e.status&&a.jsxs("span",{className:"flex items-center text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:[a.jsx(m,{className:"mr-1 h-3 w-3"}),y("followMeHome.contacts.status.accepted")]}),a.jsx("button",{onClick:()=>{return a=e.id,void j(e=>({...e,emergencyContacts:e.emergencyContacts.filter(e=>e.id!==a)}));var a},className:"text-red-500 hover:text-red-700 p-1",children:a.jsx(l,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[e.phones&&e.phones.length>0?e.phones.map((e,t)=>a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(x,{className:"h-4 w-4 mr-2"}),e.number," ",e.type?`(${e.type})`:""]},t)):a.jsxs(a.Fragment,{children:[e.primaryPhone&&a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(x,{className:"h-4 w-4 mr-2"}),e.primaryPhone]}),e.secondaryPhone&&a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400 mt-1",children:[a.jsx(x,{className:"h-4 w-4 mr-2"}),e.secondaryPhone]})]}),e.emails&&e.emails.length>0?e.emails.map((e,t)=>a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400 mt-1",children:[a.jsx(p,{className:"h-4 w-4 mr-2"}),e]},t)):e.email&&a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400 mt-1",children:[a.jsx(p,{className:"h-4 w-4 mr-2"}),e.email]})]}),a.jsx("div",{children:e.addresses&&e.addresses.length>0?e.addresses.map((e,t)=>a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),e.label?`${e.label}: `:"",e.line]},t)):a.jsxs(a.Fragment,{children:[e.homeAddress&&a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),e.homeAddress]}),e.workAddress&&a.jsxs("p",{className:"flex items-center text-gray-600 dark:text-gray-400 mt-1",children:[a.jsx(g,{className:"h-4 w-4 mr-2"}),e.workAddress]})]})})]}),"pending"===e.status&&a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsxs("button",{onClick:()=>(e=>{j(a=>({...a,emergencyContacts:a.emergencyContacts.map(a=>a.id===e.id?{...a,lastNotified:Date.now()}:a)})),alert(`Notification sent to ${e.name}`)})(e),className:"flex items-center text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:[a.jsx(h,{className:"mr-1 h-3 w-3"}),y("followMeHome.contacts.sendNotification")]})})]},e.id)):a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:y("followMeHome.contacts.noContacts")})})]})]})]})})})};export{EmergencyContactManager as E};
