import{G as e,j as t}from"./index-cd94da5a.js";import{r,e as n}from"./vendor-d6555781.js";import{E as m}from"./EmergencyContactManager-4f51bb97.js";import{u}from"./i18n-8b62e3c8.js";import{b as x,U as g,D as b,R as h,s as y,h as v,aA as N,ac as E,q as D,o as R,Y as _,t as $,O as z,X as B,aB as W,z as q,A as K,m as Q,aC as ae,K as le,W as re,N as ne,ax as se,g as ie,I as oe,aD as ce,a8 as me}from"./ui-eef567c7.js";import"./firebase-fb364782.js";const TripSetup=({onStartTrip:n})=>{const{t:v}=u(),{guestData:N}=r.useContext(e),[E,D]=r.useState("low"),[R,_]=r.useState(30),[$,z]=r.useState(!1);return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:v("followMeHome.setup.title")}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center",children:[t.jsx(x,{className:"mr-2"})," ",v("followMeHome.setup.riskLevel.title")]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["low","medium","high"].map(e=>t.jsxs("button",{onClick:()=>D(e),className:"p-4 rounded-lg border-2 text-center transition-all "+(E===e?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 ring-2 ring-primary-500":"border-gray-300 dark:border-gray-600 hover:border-primary-300"),children:[t.jsx("span",{className:"block font-bold capitalize",children:v(`followMeHome.setup.riskLevel.${e}.label`)}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:v(`followMeHome.setup.riskLevel.${e}.description`)})]},e))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center",children:[t.jsx(g,{className:"mr-2"})," ",v("followMeHome.setup.contacts.title")]}),t.jsxs("div",{className:"p-4 border rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:v("followMeHome.setup.contacts.description")}),t.jsx("div",{className:"space-y-2",children:(N.emergencyContacts||[]).map(e=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 p-2 rounded",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:e.name}),e.relationship&&t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["(",e.relationship,")"]}),e.proximity&&t.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 ml-2",children:["~",e.proximity,"km"]})]}),t.jsx("div",{className:"flex items-center space-x-1",children:"accepted"===e.status?t.jsx(b,{className:"h-4 w-4 text-green-500"}):t.jsx(h,{className:"h-4 w-4 text-yellow-500"})})]},e.id))}),t.jsx("button",{onClick:()=>z(!0),className:"text-primary-600 dark:text-primary-400 hover:underline mt-3 text-sm font-bold",children:v("followMeHome.setup.contacts.manage")})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center",children:[t.jsx(y,{className:"mr-2"})," ",v("followMeHome.setup.eta.title")]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"range",value:R,onChange:e=>_(e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",min:"5",max:"180",step:"5"}),t.jsxs("span",{className:"ml-4 font-bold w-24 text-center",children:[R," ",v("followMeHome.setup.eta.minutes")]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:v("followMeHome.setup.eta.description")})]}),t.jsx("div",{className:"text-center mt-8",children:t.jsx("button",{onClick:()=>{n({riskLevel:E,eta:R})},className:"bg-primary-600 text-white font-bold py-3 px-8 rounded-full hover:bg-primary-700 transition-transform transform hover:scale-105 shadow-lg",children:v("followMeHome.startTrip")})}),$&&t.jsx(m,{onClose:()=>z(!1)})]})},ShareTrip=({tripDetails:e,tripState:n,onClose:m})=>{const{t:x}=u(),[g,b]=r.useState(!1),generateShareMessage=()=>x("followMeHome.share.message",{riskLevel:x(`followMeHome.setup.riskLevel.${null==e?void 0:e.riskLevel}.label`),eta:null==e?void 0:e.eta,status:x("active"===n?"followMeHome.share.statusActive":"followMeHome.share.statusEnded")}),h=[{id:"email",label:x("followMeHome.share.email"),icon:v,action:()=>{const e=x("followMeHome.share.emailSubject"),t=generateShareMessage(),r=`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(t)}`;window.open(r)},color:"bg-blue-500 hover:bg-blue-600"},{id:"whatsapp",label:x("followMeHome.share.whatsapp"),icon:N,action:()=>{const e=generateShareMessage(),t=`https://wa.me/?text=${encodeURIComponent(e)}`;window.open(t,"_blank")},color:"bg-green-500 hover:bg-green-600"},{id:"sms",label:x("followMeHome.share.sms"),icon:E,action:()=>{const e=generateShareMessage(),t=`sms:?body=${encodeURIComponent(e)}`;window.open(t)},color:"bg-purple-500 hover:bg-purple-600"},{id:"link",label:x("followMeHome.share.link"),icon:g?D:R,action:async()=>{const e=(()=>{const e=Date.now().toString(36);return`${window.location.origin}/follow-me-home/share/${e}`})();try{await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch(t){}},color:g?"bg-green-500":"bg-gray-500 hover:bg-gray-600"}];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md m-4",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[t.jsx(_,{className:"mr-2"}),x("followMeHome.share.title")]}),t.jsx("button",{onClick:m,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:"×"})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:x("followMeHome.share.description")}),t.jsx("div",{className:"space-y-3",children:h.map(e=>t.jsxs("button",{onClick:e.action,className:`w-full flex items-center p-4 rounded-lg text-white transition-colors ${e.color}`,children:[t.jsx(e.icon,{className:"mr-3 h-5 w-5"}),t.jsx("span",{className:"font-medium",children:e.label})]},e.id))}),t.jsxs("div",{className:"mt-6 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[x("followMeHome.share.preview"),":"]}),t.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:generateShareMessage()})]})]})})})},ActiveTrip=({tripDetails:e,onEndTrip:n,onCheckIn:m,nextCheckIn:g})=>{const{t:b}=u(),{riskLevel:h,eta:v}=e,[N,D]=r.useState(0),[R,B]=r.useState(!1);r.useEffect(()=>{if(g){const e=setInterval(()=>{const e=Date.now(),t=Math.max(0,Math.floor((g-e)/1e3));D(t)},1e3);return()=>clearInterval(e)}},[g]);const W={low:{bgColor:"bg-green-100 dark:bg-green-900",textColor:"text-green-800 dark:text-green-200",borderColor:"border-green-500"},medium:{bgColor:"bg-yellow-100 dark:bg-yellow-900",textColor:"text-yellow-800 dark:text-yellow-200",borderColor:"border-yellow-500"},high:{bgColor:"bg-red-100 dark:bg-red-900",textColor:"text-red-800 dark:text-red-200",borderColor:"border-red-500"}},q=W[h]||W.low;return t.jsxs("div",{className:"max-w-lg mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4 text-center",children:b("followMeHome.active.title")}),t.jsxs("div",{className:`p-4 rounded-lg border-2 ${q.borderColor} ${q.bgColor} ${q.textColor} mb-6`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(x,{className:"mr-2"}),t.jsxs("span",{className:"font-bold",children:[b("followMeHome.setup.riskLevel.title"),":"]})]}),t.jsx("span",{className:"font-bold capitalize",children:b(`followMeHome.setup.riskLevel.${h}.label`)})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(y,{className:"mr-2"}),t.jsxs("span",{className:"font-bold",children:[b("followMeHome.setup.eta.title"),":"]})]}),t.jsxs("span",{children:[v," ",b("followMeHome.setup.eta.minutes")]})]}),g&&t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(y,{className:"mr-2"}),t.jsxs("span",{className:"font-bold",children:[b("followMeHome.active.nextCheckIn"),":"]})]}),t.jsx("span",{className:"font-bold text-lg",children:(K=N,`${Math.floor(K/60)}:${(K%60).toString().padStart(2,"0")}`)})]})]}),t.jsxs("div",{className:"mb-6 h-64 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:[t.jsx($,{className:"h-12 w-12 text-gray-400"}),t.jsx("p",{className:"text-gray-500 ml-2",children:b("followMeHome.active.mapPlaceholder")})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("button",{className:"flex items-center justify-center p-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[t.jsx(E,{className:"mr-2"})," ",b("followMeHome.active.callContact")]}),t.jsxs("button",{className:"flex items-center justify-center p-4 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[t.jsx(z,{className:"mr-2"})," ",b("followMeHome.active.sendMessage")]}),t.jsxs("button",{onClick:()=>B(!0),className:"flex items-center justify-center p-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600 col-span-2",children:[t.jsx(_,{className:"mr-2"})," ",b("followMeHome.share.button")]})]}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("button",{onClick:m,className:"bg-blue-600 text-white font-bold py-4 px-8 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:b("followMeHome.active.checkIn")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:b("followMeHome.active.checkInPrompt")})]}),t.jsx("div",{className:"text-center mt-8",children:t.jsx("button",{onClick:n,className:"bg-red-600 text-white font-bold py-3 px-8 rounded-full hover:bg-red-700 transition-transform transform hover:scale-105",children:b("followMeHome.endTrip")})}),R&&t.jsx(ShareTrip,{tripDetails:e,tripState:"active",onClose:()=>B(!1)})]});var K},Notification=({message:e,type:n="info",onClose:m,autoClose:u=!0,duration:x=5e3})=>{r.useEffect(()=>{if(u&&x>0){const e=setTimeout(()=>{m()},x);return()=>clearTimeout(e)}},[u,x,m]);return t.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full p-4 rounded-lg border-l-4 shadow-lg ${(()=>{switch(n){case"success":return"bg-green-100 dark:bg-green-900 border-green-500";case"warning":return"bg-yellow-100 dark:bg-yellow-900 border-yellow-500";case"error":return"bg-red-100 dark:bg-red-900 border-red-500";default:return"bg-blue-100 dark:bg-blue-900 border-blue-500"}})()} dark:text-white`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:(()=>{switch(n){case"success":return t.jsx(b,{className:"h-5 w-5 text-green-500"});case"warning":return t.jsx(K,{className:"h-5 w-5 text-yellow-500"});case"error":return t.jsx(q,{className:"h-5 w-5 text-red-500"});default:return t.jsx(W,{className:"h-5 w-5 text-blue-500"})}})()}),t.jsx("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:t.jsx("p",{className:"text-sm font-medium",children:e})}),t.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:t.jsxs("button",{onClick:m,className:"inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx(B,{className:"h-5 w-5"})]})})]})})},ParentalControls=({onClose:n})=>{const{t:m}=u(),{guestData:x,setGuestData:b}=r.useContext(e),[h,y]=r.useState("children"),[v,N]=r.useState(""),[E,D]=r.useState(""),R=[{id:"children",label:m("followMeHome.parental.children.title"),icon:g},{id:"geofences",label:m("followMeHome.parental.geofences.title"),icon:$},{id:"alerts",label:m("followMeHome.parental.alerts.title"),icon:Q},{id:"integrations",label:m("followMeHome.parental.integrations.title"),icon:ae}];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-5/6 m-4 overflow-hidden",children:t.jsxs("div",{className:"flex h-full",children:[t.jsxs("div",{className:"w-64 bg-gray-50 dark:bg-gray-700 p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:m("followMeHome.parental.title")}),t.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:"×"})]}),t.jsx("nav",{className:"space-y-2",children:R.map(e=>t.jsxs("button",{onClick:()=>y(e.id),className:"w-full flex items-center p-3 rounded-lg text-left transition-colors "+(h===e.id?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"hover:bg-gray-200 dark:hover:bg-gray-600"),children:[t.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.label]},e.id))})]}),t.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:["children"===h&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:m("followMeHome.parental.children.title")}),t.jsxs("div",{className:"mb-6 p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:m("followMeHome.parental.children.add.title")}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsx("input",{type:"text",placeholder:m("followMeHome.parental.children.add.namePlaceholder"),value:v,onChange:e=>N(e.target.value),className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600"}),t.jsx("input",{type:"text",placeholder:m("followMeHome.parental.children.add.devicePlaceholder"),value:E,onChange:e=>D(e.target.value),className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600"})]}),t.jsx("button",{onClick:()=>{if(!v||!E)return;const e={id:Date.now(),name:v,deviceId:E,geofences:[],lastLocation:null,status:"safe"};b(t=>({...t,children:[...t.children||[],e]})),N(""),D("")},className:"bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700",children:m("followMeHome.parental.children.add.button")})]}),t.jsx("div",{className:"space-y-3",children:(x.children||[]).length>0?x.children.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg dark:border-gray-600",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.deviceId}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:m("followMeHome.parental.children.status.safe")})]}),t.jsx("button",{onClick:()=>{return t=e.id,void b(e=>({...e,children:e.children.filter(e=>e.id!==t)}));var t},className:"text-red-500 hover:text-red-700",children:"Remove"})]},e.id)):t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:m("followMeHome.parental.children.noChildren")})})]}),"geofences"===h&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:m("followMeHome.parental.geofences.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m("followMeHome.parental.geofences.description")}),(x.children||[]).map(e=>{var r;return t.jsxs("div",{className:"mb-6 p-4 border rounded-lg dark:border-gray-600",children:[t.jsxs("h4",{className:"font-medium mb-2",children:[e.name,"'s Geofences"]}),t.jsx("div",{className:"space-y-2",children:(null==(r=e.geofences)?void 0:r.map(e=>t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsxs("span",{children:[e.name," - ",e.radius,"m radius"]}),t.jsx("button",{className:"text-red-500 text-sm",children:"Remove"})]},e.id)))||t.jsx("p",{className:"text-sm text-gray-500",children:"No geofences set"})}),t.jsx("button",{onClick:()=>{return t=e.id,r={name:"Home",radius:100},void b(e=>({...e,children:e.children.map(e=>e.id===t?{...e,geofences:[...e.geofences,{...r,id:Date.now()}]}:e)}));var t,r},className:"mt-2 text-primary-600 dark:text-primary-400 hover:underline text-sm",children:"Add Geofence"})]},e.id)})]}),"alerts"===h&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:m("followMeHome.parental.alerts.title")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:m("followMeHome.parental.alerts.entryExit.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m("followMeHome.parental.alerts.entryExit.description")}),t.jsx("div",{className:"mt-2",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",className:"mr-2",defaultChecked:!0}),m("followMeHome.parental.alerts.entryExit.enable")]})})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:m("followMeHome.parental.alerts.irregularActivity.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m("followMeHome.parental.alerts.irregularActivity.description")}),t.jsx("div",{className:"mt-2",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",className:"mr-2",defaultChecked:!0}),m("followMeHome.parental.alerts.irregularActivity.enable")]})})]})]})]}),"integrations"===h&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:m("followMeHome.parental.integrations.title")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Google Family Link"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:m("followMeHome.parental.integrations.familyLink.description")}),t.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:m("followMeHome.parental.integrations.familyLink.connect")})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Open Source Alternatives"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:m("followMeHome.parental.integrations.openSource.description")}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{className:"block w-full text-left p-2 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:"KidSafe"}),t.jsx("button",{className:"block w-full text-left p-2 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:"LittleBrother"})]})]})]})]})]})]})})})},OfflineNetworking=({onClose:n})=>{var m,g,b,h,y,v,N,E,D,R;const{t:_}=u(),{guestData:$,setGuestData:z}=r.useContext(e),[B,W]=r.useState("bluetooth"),updateOfflineSettings=(e,t)=>{z(r=>({...r,offlineSettings:{...r.offlineSettings,[e]:t}}))},q=[{id:"bluetooth",label:_("followMeHome.offline.bluetooth.title"),icon:le},{id:"wifi",label:_("followMeHome.offline.wifi.title"),icon:re},{id:"mesh",label:_("followMeHome.offline.mesh.title"),icon:ne},{id:"battery",label:_("followMeHome.offline.battery.title"),icon:se},{id:"privacy",label:_("followMeHome.offline.privacy.title"),icon:x}];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-5/6 m-4 overflow-hidden",children:t.jsxs("div",{className:"flex h-full",children:[t.jsxs("div",{className:"w-64 bg-gray-50 dark:bg-gray-700 p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:_("followMeHome.offline.title")}),t.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:"×"})]}),t.jsx("nav",{className:"space-y-2",children:q.map(e=>t.jsxs("button",{onClick:()=>W(e.id),className:"w-full flex items-center p-3 rounded-lg text-left transition-colors "+(B===e.id?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"hover:bg-gray-200 dark:hover:bg-gray-600"),children:[t.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.label]},e.id))})]}),t.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:["bluetooth"===B&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_("followMeHome.offline.bluetooth.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:_("followMeHome.offline.bluetooth.description")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.bluetooth.peerSync.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.bluetooth.peerSync.description")}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:null==(m=$.offlineSettings)?void 0:m.bluetoothPeerSync,onChange:e=>updateOfflineSettings("bluetoothPeerSync",e.target.checked),className:"mr-2"}),_("followMeHome.offline.bluetooth.peerSync.enable")]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.bluetooth.range.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.bluetooth.range.description")}),t.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",defaultValue:(null==(g=$.offlineSettings)?void 0:g.bluetoothRange)||"medium",onChange:e=>updateOfflineSettings("bluetoothRange",e.target.value),children:[t.jsx("option",{value:"short",children:_("followMeHome.offline.bluetooth.range.short")}),t.jsx("option",{value:"medium",children:_("followMeHome.offline.bluetooth.range.medium")}),t.jsx("option",{value:"long",children:_("followMeHome.offline.bluetooth.range.long")})]})]})]})]}),"wifi"===B&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_("followMeHome.offline.wifi.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:_("followMeHome.offline.wifi.description")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.wifi.direct.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.wifi.direct.description")}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:null==(b=$.offlineSettings)?void 0:b.wifiDirect,onChange:e=>updateOfflineSettings("wifiDirect",e.target.checked),className:"mr-2"}),_("followMeHome.offline.wifi.direct.enable")]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.wifi.opportunistic.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.wifi.opportunistic.description")}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:null==(h=$.offlineSettings)?void 0:h.opportunisticForwarding,onChange:e=>updateOfflineSettings("opportunisticForwarding",e.target.checked),className:"mr-2"}),_("followMeHome.offline.wifi.opportunistic.enable")]})]})]})]}),"mesh"===B&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_("followMeHome.offline.mesh.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:_("followMeHome.offline.mesh.description")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.mesh.routing.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.mesh.routing.description")}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"routing",value:"single",defaultChecked:"single"===(null==(y=$.offlineSettings)?void 0:y.meshRouting),onChange:e=>updateOfflineSettings("meshRouting",e.target.value),className:"mr-2"}),_("followMeHome.offline.mesh.routing.single")]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"routing",value:"multi",defaultChecked:"multi"===(null==(v=$.offlineSettings)?void 0:v.meshRouting),onChange:e=>updateOfflineSettings("meshRouting",e.target.value),className:"mr-2"}),_("followMeHome.offline.mesh.routing.multi")]})]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.mesh.community.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.mesh.community.description")}),t.jsx("button",{className:"bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700",children:_("followMeHome.offline.mesh.community.setup")})]})]})]}),"battery"===B&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_("followMeHome.offline.battery.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:_("followMeHome.offline.battery.description")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.battery.adaptive.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.battery.adaptive.description")}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:null==(N=$.offlineSettings)?void 0:N.adaptiveSampling,onChange:e=>updateOfflineSettings("adaptiveSampling",e.target.checked),className:"mr-2"}),_("followMeHome.offline.battery.adaptive.enable")]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.battery.dutyCycling.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.battery.dutyCycling.description")}),t.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",defaultValue:(null==(E=$.offlineSettings)?void 0:E.dutyCycle)||"balanced",onChange:e=>updateOfflineSettings("dutyCycle",e.target.value),children:[t.jsx("option",{value:"aggressive",children:_("followMeHome.offline.battery.dutyCycling.aggressive")}),t.jsx("option",{value:"balanced",children:_("followMeHome.offline.battery.dutyCycling.balanced")}),t.jsx("option",{value:"conservative",children:_("followMeHome.offline.battery.dutyCycling.conservative")})]})]})]})]}),"privacy"===B&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_("followMeHome.offline.privacy.title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:_("followMeHome.offline.privacy.description")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.privacy.encryption.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.privacy.encryption.description")}),t.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:["✓ ",_("followMeHome.offline.privacy.encryption.status")]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.privacy.consent.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.privacy.consent.description")}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",defaultChecked:null==(D=$.offlineSettings)?void 0:D.relayConsent,onChange:e=>updateOfflineSettings("relayConsent",e.target.checked),className:"mr-2"}),_("followMeHome.offline.privacy.consent.enable")]})]}),t.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[t.jsx("h4",{className:"font-medium mb-2",children:_("followMeHome.offline.privacy.dataRetention.title")}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:_("followMeHome.offline.privacy.dataRetention.description")}),t.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",defaultValue:(null==(R=$.offlineSettings)?void 0:R.dataRetention)||"30days",onChange:e=>updateOfflineSettings("dataRetention",e.target.value),children:[t.jsx("option",{value:"7days",children:_("followMeHome.offline.privacy.dataRetention.7days")}),t.jsx("option",{value:"30days",children:_("followMeHome.offline.privacy.dataRetention.30days")}),t.jsx("option",{value:"90days",children:_("followMeHome.offline.privacy.dataRetention.90days")})]})]})]})]})]})]})})})};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r,n,m,u,x){try{var g=e[u](x),b=g.value}catch(h){return void r(h)}g.done?t(b):Promise.resolve(b).then(n,m)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,m){var u=e.apply(t,r);function i(e){k(u,n,m,i,c,"next",e)}function c(e){k(u,n,m,i,c,"throw",e)}i(void 0)})}}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function I(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",m=r.toStringTag||"@@toStringTag";function l(r,n,m,x){var g=n&&n.prototype instanceof c?n:c,b=Object.create(g.prototype);return P(b,"_invoke",function(r,n,m){var x,g,b,h=0,y=m||[],v=!1,N={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return x=t,g=0,b=e,N.n=r,u}};function f(r,n){for(g=r,b=n,t=0;!v&&h&&!m&&t<y.length;t++){var m,x=y[t],E=N.p,D=x[2];r>3?(m=D===n)&&(b=x[(g=x[4])?5:(g=3,3)],x[4]=x[5]=e):x[0]<=E&&((m=r<2&&E<x[1])?(g=0,N.v=n,N.n=x[1]):E<D&&(m=r<3||x[0]>n||n>D)&&(x[4]=r,x[5]=n,N.n=D,g=0))}if(m||r>1)return u;throw v=!0,n}return function(m,y,E){if(h>1)throw TypeError("Generator is already running");for(v&&1===y&&f(y,E),g=y,b=E;(t=g<2?e:b)||!v;){x||(g?g<3?(g>1&&(N.n=-1),f(g,b)):N.n=b:N.v=b);try{if(h=2,x){if(g||(m="next"),t=x[m]){if(!(t=t.call(x,b)))throw TypeError("iterator result is not an object");if(!t.done)return t;b=t.value,g<2&&(g=0)}else 1===g&&(t=x.return)&&t.call(x),g<2&&(b=TypeError("The iterator does not provide a '"+m+"' method"),g=1);x=e}else if((t=(v=N.n<0)?b:r.call(n,N))!==u)break}catch(D){x=e,g=1,b=D}finally{h=1}}return{value:t,done:v}}}(r,m,x),!0),b}var u={};function c(){}function s(){}function o(){}t=Object.getPrototypeOf;var x=[][n]?t(t([][n]())):(P(t={},n,function(){return this}),t),g=o.prototype=c.prototype=Object.create(x);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,P(e,m,"GeneratorFunction")),e.prototype=Object.create(g),e}return s.prototype=o,P(g,"constructor",o),P(o,"constructor",s),s.displayName="GeneratorFunction",P(o,m,"GeneratorFunction"),P(g),P(g,m,"Generator"),P(g,n,function(){return this}),P(g,"toString",function(){return"[object Generator]"}),(O=function(){return{w:l,m:d}})()}function P(e,t,r,n){var m=Object.defineProperty;try{m({},"",{})}catch(u){m=0}(P=function(e,t,r,n){function l(t,r){P(e,t,function(e){return this._invoke(t,r,e)})}t?m?m(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(l("next",0),l("throw",1),l("return",2))})(e,t,r,n)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,m,u,x,g=[],b=!0,h=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;b=!1}else for(;!(b=(n=u.call(r)).done)&&(g.push(n.value),g.length!==t);b=!0);}catch(y){h=!0,m=y}finally{try{if(!b&&null!=r.return&&(x=r.return(),Object(x)!==x))return}finally{if(h)throw m}}return g}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.createContext();var de,ue,L=function(e){var t=e.onCapture,m=e.userType,u=void 0===m?"participant":m,x=e.className,g=void 0===x?"":x,h=e.context,y=void 0===h?"lifesync":h,v=T(r.useState(!1),2),N=v[0],E=v[1],D=T(r.useState(null),2),R=D[0],_=D[1],$=T(r.useState(!1),2),z=$[0],B=$[1],W=T(r.useState(null),2),Q=W[0],ae=W[1],le=T(r.useState(null),2),re=le[0],ne=le[1],se=T(r.useState(!1),2),de=se[0],ue=se[1],fe=r.useRef(null),xe=r.useRef(null),ge=r.useRef(null),be=r.useCallback(S(O().m(function e2(){var e;return O().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,ne(null),t.n=1,navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});case 1:e=t.v,fe.current&&(fe.current.srcObject=e,ge.current=e,ue(!0)),t.n=3;break;case 2:t.p=2,t.v,ne("Camera access denied or unavailable");case 3:return t.a(2)}},e2,null,[[0,2]])})),[]),pe=r.useCallback(function(){ge.current&&(ge.current.getTracks().forEach(function(e){return e.stop()}),ge.current=null),fe.current&&(fe.current.srcObject=null),ue(!1)},[]),he=r.useCallback(function(){if(fe.current&&xe.current){E(!0),ne(null);var e=fe.current,r=xe.current,n=r.getContext("2d");r.width=e.videoWidth,r.height=e.videoHeight,n.drawImage(e,0,0,r.width,r.height),r.toBlob((m=S(O().m(function e4(e){var r;return O().w(function(m){for(;;)switch(m.n){case 0:e?(r=URL.createObjectURL(e),_(r),B(!0),setTimeout(function(){var m={isValid:!0,confidence:.92,livenessVerified:!0,faceDetected:!0};ae(m),B(!1),E(!1),t&&t({imageBlob:e,imageUrl:r,validation:m,timestamp:(new Date).toISOString(),userType:u,context:n})},2e3)):(ne("Failed to capture photo"),E(!1));case 1:return m.a(2)}},e4)})),function(e){return m.apply(this,arguments)}),"image/jpeg",.8)}var m},[t,u,y]),ye=r.useCallback(function(){_(null),ae(null),ne(null)},[]),ve=r.useCallback(function(){pe(),_(null),ae(null),ne(null),E(!1),B(!1)},[pe]);return n.useEffect(function(){return function(){pe()}},[pe]),n.createElement("div",{className:"facial-recognition ".concat(g)},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto"},n.createElement("div",{className:"text-center mb-6"},n.createElement("div",{className:"flex items-center justify-center mb-3"},n.createElement(ie,{className:"w-8 h-8 text-blue-600 mr-2"}),n.createElement("h3",{className:"text-xl font-semibold text-gray-900"},"Facial Verification")),n.createElement("p",{className:"text-sm text-gray-600"},"Please ensure good lighting and remove glasses/sunglasses")),!de&&!R&&n.createElement("div",{className:"text-center mb-6"},n.createElement("div",{className:"w-32 h-32 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},n.createElement(oe,{className:"w-12 h-12 text-gray-400"})),n.createElement("button",{onClick:be,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors"},"Enable Camera")),de&&!R&&n.createElement("div",{className:"mb-6"},n.createElement("div",{className:"relative"},n.createElement("video",{ref:fe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg border-2 border-gray-200",style:{maxHeight:"300px"}}),n.createElement("canvas",{ref:xe,className:"hidden"})),n.createElement("div",{className:"mt-4 flex justify-center"},n.createElement("button",{onClick:he,disabled:N,className:"bg-green-600 text-white px-8 py-3 rounded-full hover:bg-green-700 transition-colors disabled:opacity-50"},N?n.createElement("div",{className:"flex items-center"},n.createElement(ce,{className:"w-5 h-5 mr-2 animate-spin"}),"Capturing..."):n.createElement("div",{className:"flex items-center"},n.createElement(oe,{className:"w-5 h-5 mr-2"}),"Take Photo")))),R&&n.createElement("div",{className:"mb-6"},n.createElement("div",{className:"relative"},n.createElement("img",{src:R,alt:"Captured",className:"w-full rounded-lg border-2 border-gray-200"}),Q&&n.createElement("div",{className:"absolute top-2 right-2"},Q.isValid?n.createElement(b,{className:"w-8 h-8 text-green-500 bg-white rounded-full"}):n.createElement(q,{className:"w-8 h-8 text-red-500 bg-white rounded-full"}))),z&&n.createElement("div",{className:"mt-4 text-center"},n.createElement("div",{className:"flex items-center justify-center mb-2"},n.createElement(ce,{className:"w-5 h-5 mr-2 animate-spin text-blue-600"}),n.createElement("span",{className:"text-blue-600"},"Validating...")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}}))),Q&&!z&&n.createElement("div",{className:"mt-4"},Q.isValid?n.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center mb-2"},n.createElement(b,{className:"w-5 h-5 text-green-600 mr-2"}),n.createElement("span",{className:"font-medium text-green-800"},"Verification Successful")),n.createElement("div",{className:"text-sm text-green-700"},n.createElement("p",null,"Face detected: ✓"),n.createElement("p",null,"Liveness verified: ✓"),n.createElement("p",null,"Confidence: ",(100*Q.confidence).toFixed(1),"%"))):n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center mb-2"},n.createElement(q,{className:"w-5 h-5 text-red-600 mr-2"}),n.createElement("span",{className:"font-medium text-red-800"},"Verification Failed")),n.createElement("p",{className:"text-sm text-red-700"},"Please ensure your face is clearly visible and try again."))),n.createElement("div",{className:"mt-4 flex justify-center gap-3"},n.createElement("button",{onClick:ye,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors"},"Retake"),n.createElement("button",{onClick:ve,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Start Over"))),re&&n.createElement("div",{className:"mb-6"},n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center"},n.createElement(K,{className:"w-5 h-5 text-red-600 mr-2"}),n.createElement("span",{className:"text-red-800 font-medium"},"Error")),n.createElement("p",{className:"text-red-700 mt-1"},re))),n.createElement("div",{className:"text-center text-sm text-gray-600"},n.createElement("p",{className:"mb-2"},n.createElement(me,{className:"w-4 h-4 inline mr-1"}),"Look directly at the camera"),n.createElement("p",null,"Ensure good lighting and remove obstructions"))))},fe={},M=function(e,t,r,n){U(r)&&fe[r]||(U(r)&&(fe[r]=new Date),function(e,t,r,n){var m,u,x,g,b=[r,V({code:t},n||{})];if(null!=e&&null!==(m=e.services)&&void 0!==m&&null!==(m=m.logger)&&void 0!==m&&m.forward)return e.services.logger.forward(b,"warn","react-i18next::",!0);if(U(b[0])&&(b[0]="react-i18next:: ".concat(b[0])),null!=e&&null!==(u=e.services)&&void 0!==u&&null!==(u=u.logger)&&void 0!==u&&u.warn)(g=e.services.logger).warn.apply(g,b);else if(null!==(x=console)&&void 0!==x&&x.warn){var h;(h=console).warn.apply(h,b)}}(e,t,r,n))},G=function(e,t){return function(){if(e.isInitialized)t();else{var a=function(){setTimeout(function(){e.off("initialized",a)},0),t()};e.on("initialized",a)}}},H=function(e,t,r){e.loadNamespaces(t,G(e,r))},Y=function(e,t,r,n){if(U(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return H(e,r,n);r.forEach(function(t){e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,G(e,n))},U=function(e){return"string"==typeof e},xe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ge={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Z=function(e){return ge[e]},be={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(xe,Z)}},pe=r.createContext(),he=(de=function e3(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e3),this.usedNamespaces={}},(ue=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach(function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&C(de.prototype,ue),Object.defineProperty(de,"prototype",{writable:!1}),de),X=function(e,t,r,n){return e.getFixedT(t,r,n)},J=function(e){var t,n,m,u,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=x.i18n,b=r.useContext(pe)||{},h=b.i18n,y=b.defaultNS,v=g||h||void 0;if(v&&!v.reportNamespaces&&(v.reportNamespaces=new he),!v){M(v,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");var p=function(e,t){return U(t)?t:"object"===F(r=t)&&null!==r&&U(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var r},N=[p,{},!1];return N.t=p,N.i18n={},N.ready=!1,N}null!==(t=v.options.react)&&void 0!==t&&t.wait&&M(v,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var E=V(V(V({},be),v.options.react),x),D=E.useSuspense,R=E.keyPrefix,_=e||y||(null===(n=v.options)||void 0===n?void 0:n.defaultNS);_=U(_)?[_]:_||["translation"],null===(m=(u=v.reportNamespaces).addUsedNamespaces)||void 0===m||m.call(u,_);var $,z,B,W,q=(v.isInitialized||v.initializedStoreOnce)&&_.every(function(e){return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:function(t,n){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!n(t.isLanguageChangingTo,e))return!1}}):(M(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,v,E)}),K=($=v,z=x.lng||null,B="fallback"===E.nsMode?_:_[0],W=R,r.useCallback(X($,z,B,W),[$,z,B,W])),k2=function(){return K},S2=function(){return X(v,x.lng||null,"fallback"===E.nsMode?_:_[0],R)},Q=T(r.useState(k2),2),ae=Q[0],le=Q[1],re=_.join();x.lng&&(re="".concat(x.lng).concat(re));var ne,se,ie=(ne=re,se=r.useRef(),r.useEffect(function(){se.current=ne},[ne,undefined]),se.current),oe=r.useRef(!0);r.useEffect(function(){var e=E.bindI18n,t=E.bindI18nStore;oe.current=!0,q||D||(x.lng?Y(v,x.lng,_,function(){oe.current&&le(S2)}):H(v,_,function(){oe.current&&le(S2)})),q&&ie&&ie!==re&&oe.current&&le(S2);var a=function(){oe.current&&le(S2)};return e&&(null==v||v.on(e,a)),t&&(null==v||v.store.on(t,a)),function(){oe.current=!1,v&&e&&(null==e||e.split(" ").forEach(function(e){return v.off(e,a)})),t&&v&&t.split(" ").forEach(function(e){return v.store.off(e,a)})}},[v,re]),r.useEffect(function(){oe.current&&q&&le(k2)},[v,R,q]);var ce=[ae,v,q];if(ce.t=ae,ce.i18n=v,ce.ready=q,q)return ce;if(!q&&!D)return ce;throw new Promise(function(e){x.lng?Y(v,x.lng,_,function(){return e()}):H(v,_,function(){return e()})})},ee=function(e){var t=e.interactionId,m=e.participants,u=void 0===m?[]:m,h=e.onComplete,y=e.onSkip,v=e.context,N=void 0===v?"safety_sync":v;J().t;var E=T(r.useState(0),2),D=E[0],R=E[1],_=T(r.useState({}),2),$=_[0],z=_[1],B=T(r.useState(!1),2),W=B[0],q=B[1],Q=T(r.useState(!1),2),ae=Q[0],le=Q[1],re=[{id:"instructions",title:"Instructions & Consent"},{id:"participants",title:"Participant Verification"},{id:"capture",title:"Facial Capture"},{id:"review",title:"Review & Confirm"}],ne=u[D-1];return ae?n.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},n.createElement("div",{className:"text-center"},n.createElement(K,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Facial Verification Skipped"),n.createElement("p",{className:"text-gray-600 mb-6"},"You have chosen to skip facial verification. Some safety features may be limited."),n.createElement("button",{onClick:function(){return le(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Go Back"))):W?n.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},n.createElement("div",{className:"text-center"},n.createElement(b,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Facial Verification Complete"),n.createElement("p",{className:"text-gray-600 mb-6"},"All participants have been verified. Your interaction is now secured with facial recognition."),n.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},n.createElement("div",{className:"flex items-center justify-center mb-2"},n.createElement(x,{className:"w-5 h-5 text-green-600 mr-2"}),n.createElement("span",{className:"font-medium text-green-800"},"Enhanced Security Active")),n.createElement("p",{className:"text-sm text-green-700 text-center"},"Facial verification provides additional safety layer for dispute resolution")))):n.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Facial Verification Process"),n.createElement("span",{className:"text-sm text-gray-500"},"Step ",D+1," of ",re.length)),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4"},n.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((D+1)/re.length*100,"%")}})),n.createElement("div",{className:"flex justify-between"},re.map(function(e,t){return n.createElement("div",{key:e.id,className:"flex flex-col items-center ".concat(t<=D?"text-blue-600":"text-gray-400")},n.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-1 ".concat(t<D||t===D?"bg-blue-600 text-white":"bg-gray-200 text-gray-400")},t<D?n.createElement(b,{className:"w-4 h-4"}):t+1),n.createElement("span",{className:"text-xs text-center max-w-20"},e.title))}))),n.createElement("div",{className:"min-h-96"},0===D&&n.createElement("div",{className:"text-center"},n.createElement(x,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-4"},"Facial Verification for Enhanced Safety"),n.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},n.createElement("p",{className:"text-blue-800 mb-3"},"Facial recognition adds an extra layer of security to your interaction:"),n.createElement("ul",{className:"text-left text-blue-700 text-sm space-y-2"},n.createElement("li",null,"• Provides evidence for dispute resolution"),n.createElement("li",null,"• Verifies participant identities"),n.createElement("li",null,"• Enhances trust and accountability"),n.createElement("li",null,"• Works alongside existing safety features"))),n.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},n.createElement("div",{className:"flex items-start"},n.createElement(K,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("div",{className:"text-left"},n.createElement("p",{className:"text-yellow-800 font-medium mb-1"},"Important Notes:"),n.createElement("ul",{className:"text-yellow-700 text-sm space-y-1"},n.createElement("li",null,"• Photos are encrypted and auto-deleted after 48 hours"),n.createElement("li",null,"• Facial recognition is optional but recommended"),n.createElement("li",null,"• You can skip this step if preferred"),n.createElement("li",null,"• Ensure good lighting for best results")))))),1===D&&n.createElement("div",null,n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center"},"Participants to Verify"),n.createElement("div",{className:"space-y-3"},u.map(function(e,t){return n.createElement("div",{key:e.id,className:"flex items-center justify-between p-4 rounded-lg border ".concat($[e.id]?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200")},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 ".concat($[e.id]?"bg-green-500":"bg-gray-400")},$[e.id]?n.createElement(b,{className:"w-6 h-6 text-white"}):n.createElement(g,{className:"w-6 h-6 text-white"})),n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},e.name),n.createElement("p",{className:"text-sm text-gray-600"},e.role))),$[e.id]&&n.createElement("div",{className:"text-right"},n.createElement("p",{className:"text-sm text-green-600 font-medium"},"Verified"),n.createElement("p",{className:"text-xs text-gray-500"},new Date($[e.id].capturedAt).toLocaleTimeString())))})),n.createElement("div",{className:"mt-6 text-center text-sm text-gray-600"},n.createElement("p",null,Object.keys($).length," of ",u.length," participants verified"))),2===D&&ne&&n.createElement("div",null,n.createElement("div",{className:"text-center mb-6"},n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Verify ",ne.name),n.createElement("p",{className:"text-gray-600"},ne.role)),n.createElement(L,{onCapture:function(e){return t=ne.id,r=e,void z(function(e){return V(V({},e),{},I({},t,V(V({},r),{},{capturedAt:(new Date).toISOString()})))});var t,r},userType:ne.role.toLowerCase().replace(" ","_"),context:N})),3===D&&n.createElement("div",null,n.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-6 text-center"},"Review Verification"),n.createElement("div",{className:"space-y-4 mb-6"},u.map(function(e){var t=$[e.id];return n.createElement("div",{key:e.id,className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3 ".concat(t?"bg-green-500":"bg-red-500")},t?n.createElement(b,{className:"w-4 h-4 text-white"}):n.createElement(K,{className:"w-4 h-4 text-white"})),n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},e.name),n.createElement("p",{className:"text-sm text-gray-600"},e.role))),n.createElement("div",{className:"text-right"},t?n.createElement("div",null,n.createElement("p",{className:"text-sm text-green-600 font-medium"},"Verified"),n.createElement("p",{className:"text-xs text-gray-500"},new Date(t.capturedAt).toLocaleTimeString())):n.createElement("p",{className:"text-sm text-red-600 font-medium"},"Not Verified")))})),n.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-start"},n.createElement(x,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("div",null,n.createElement("p",{className:"text-blue-800 font-medium mb-1"},"Security Benefits:"),n.createElement("ul",{className:"text-blue-700 text-sm space-y-1"},n.createElement("li",null,"• Encrypted photo storage with auto-deletion"),n.createElement("li",null,"• Enhanced dispute resolution capabilities"),n.createElement("li",null,"• Additional trust layer for interactions"),n.createElement("li",null,"• Community validation support"))))))),n.createElement("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200"},n.createElement("button",{onClick:function(){D>0&&R(D-1)},disabled:0===D,className:"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Previous"),n.createElement("div",{className:"flex gap-3"},D<re.length-1?n.createElement("button",{onClick:function(){D<re.length-1&&R(D+1)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Next"):n.createElement("button",{onClick:function(){var e={interactionId:t,context:N,participants:u.map(function(e){return{id:e.id,name:e.name,role:e.role,facialLog:$[e.id]||null}}),completedAt:(new Date).toISOString(),totalParticipants:u.length,verifiedParticipants:Object.keys($).length};q(!0),h(e)},disabled:0===Object.keys($).length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Complete Verification"),n.createElement("button",{onClick:function(){le(!0),y({interactionId:t,context:N,reason:"user_skipped",skippedAt:(new Date).toISOString()})},className:"px-6 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"Skip"))))},te=function(e){var t=e.interactionType,m=void 0===t?"follow_me_home":t,u=e.participants,h=void 0===u?[]:u,y=e.onComplete,v=e.onCancel,N=e.className,E=void 0===N?"":N;J().t;var D=T(r.useState("consent"),2),R=D[0],_=D[1],$=T(r.useState(null),2),z=$[0],B=$[1],W=T(r.useState(!1),2),q=W[0],Q=W[1],ae={consent:{title:"Safety Enhancement Consent",icon:x},facial_setup:{title:"Facial Verification Setup",icon:g},verification:{title:"Participant Verification",icon:b},complete:{title:"Safety Enhanced",icon:x}},S2=function(){switch(m){case"follow_me_home":return"Follow Me Home Safety Enhancement";case"emergency_sync":return"Emergency Response Coordination";case"community_meeting":return"Community Safety Meeting";case"transport_sync":return"Transport Safety Coordination";default:return"Safety Interaction Enhancement"}};return q?n.createElement("div",{className:"safety-flow-completed bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto ".concat(E)},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"mb-6"},null!=z&&z.facialVerification?n.createElement(b,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}):n.createElement(K,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},null!=z&&z.facialVerification?"Safety Enhanced":"Basic Safety Active"),n.createElement("p",{className:"text-gray-600"},null!=z&&z.facialVerification?"Facial verification has been completed. Your interaction is now secured with enhanced safety features.":"Basic safety features are active. Facial verification was skipped.")),(null==z?void 0:z.facialVerification)&&n.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},n.createElement("h3",{className:"font-medium text-green-800 mb-2"},"Verification Summary:"),n.createElement("div",{className:"text-sm text-green-700 space-y-1"},n.createElement("p",null,"• ",z.verifiedParticipants," of ",z.totalParticipants," participants verified"),n.createElement("p",null,"• Facial recognition data encrypted and stored securely"),n.createElement("p",null,"• Auto-deletion scheduled for 48 hours"),n.createElement("p",null,"• Enhanced dispute resolution capabilities activated"))),n.createElement("div",{className:"flex justify-center gap-4"},n.createElement("button",{onClick:function(){return window.location.reload()},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Continue to ",S2())))):n.createElement("div",{className:"safety-interaction-flow bg-white rounded-lg shadow-lg ".concat(E)},n.createElement("div",{className:"p-6 border-b border-gray-200"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},S2()),n.createElement("p",{className:"text-gray-600 mt-1"},"Enhance safety with optional facial verification")),n.createElement("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},"✕")),n.createElement("div",{className:"mt-6"},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Setup Progress"),n.createElement("span",{className:"text-sm text-gray-500"},Object.keys(ae).indexOf(R)+1," of ",Object.keys(ae).length)),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((Object.keys(ae).indexOf(R)+1)/Object.keys(ae).length*100,"%")}})))),n.createElement("div",{className:"p-6"},"consent"===R&&n.createElement("div",{className:"max-w-2xl mx-auto"},n.createElement("div",{className:"text-center mb-8"},n.createElement(x,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),n.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Enhance Your Safety"),n.createElement("p",{className:"text-gray-600"},"Add facial verification for additional security and trust in your interactions.")),n.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6"},n.createElement("h3",{className:"font-medium text-blue-900 mb-3"},"What Facial Verification Provides:"),n.createElement("ul",{className:"text-blue-800 space-y-2"},n.createElement("li",{className:"flex items-start"},n.createElement(b,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("span",null,"Additional evidence for dispute resolution")),n.createElement("li",{className:"flex items-start"},n.createElement(b,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("span",null,"Enhanced participant verification")),n.createElement("li",{className:"flex items-start"},n.createElement(b,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("span",null,"Stronger trust and accountability")),n.createElement("li",{className:"flex items-start"},n.createElement(b,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("span",null,"Complements existing safety features")))),n.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},n.createElement("div",{className:"flex items-start"},n.createElement(K,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),n.createElement("div",null,n.createElement("h4",{className:"font-medium text-yellow-900 mb-1"},"Privacy & Security:"),n.createElement("ul",{className:"text-yellow-800 text-sm space-y-1"},n.createElement("li",null,"• Photos are encrypted and stored securely"),n.createElement("li",null,"• Auto-deletion after 48 hours"),n.createElement("li",null,"• Only used for verification purposes"),n.createElement("li",null,"• POPIA compliant data handling"))))),n.createElement("div",{className:"text-center"},n.createElement("p",{className:"text-gray-600 mb-6"},"Facial verification is ",n.createElement("strong",null,"optional")," but recommended for enhanced safety."))),"facial_setup"===R&&n.createElement("div",{className:"max-w-2xl mx-auto"},n.createElement("div",{className:"text-center mb-8"},n.createElement(g,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),n.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Participant Verification"),n.createElement("p",{className:"text-gray-600"},"Verify all participants for enhanced safety and trust.")),n.createElement(ee,{interactionId:"safety_".concat(Date.now()),participants:h,onComplete:function(e){B(e),_("complete"),Q(!0),y&&y({interactionType:m,facialVerification:e,safetyEnhanced:!0,timestamp:(new Date).toISOString(),participants:e.participants})},onSkip:function(e){B(e),_("complete"),Q(!0),y&&y({interactionType:m,facialVerification:null,safetyEnhanced:!1,skipped:!0,timestamp:(new Date).toISOString(),participants:h})},context:m}))),"consent"===R&&n.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg"},n.createElement("div",{className:"flex justify-end gap-3"},n.createElement("button",{onClick:v,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"Skip Enhancement"),n.createElement("button",{onClick:function(){_("facial_setup")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Enhance Safety"))))};const FollowMeHome=()=>{const{t:e}=u(),[n,m]=r.useState("setup"),[x,g]=r.useState(null),[b,h]=r.useState([]),[y,v]=r.useState(null),[N,E]=r.useState(null),[D,R]=r.useState(!1),[_,$]=r.useState(!1),[z,B]=r.useState(!1),[W,q]=r.useState(!1),[K,Q]=r.useState(!1),ae=r.useCallback(e=>{g(e),q(!0)},[]),le=r.useCallback(e=>{Q(e),q(!1),m("active"),E(Date.now()),v(Date.now()+1e3*getCheckInInterval(x.riskLevel))},[null==x?void 0:x.riskLevel]),re=r.useCallback(()=>{m("ended"),g(null),E(null),v(null),setTimeout(()=>{m("setup")},3e3)},[]),ne=r.useCallback(()=>{v(Date.now()+1e3*getCheckInInterval(x.riskLevel)),addNotification(e("followMeHome.notifications.checkInSuccess"),"success")},[null==x?void 0:x.riskLevel,e]),addNotification=(e,t="info")=>{const r=Date.now();h(n=>[...n,{id:r,message:e,type:t}]),setTimeout(()=>{h(e=>e.filter(e=>e.id!==r))},5e3)},getCheckInInterval=e=>{switch(e){case"low":default:return 900;case"medium":return 300;case"high":return 120}};return r.useEffect(()=>{if("active"===n&&y){const t=setInterval(()=>{const t=Date.now();t>=y&&(addNotification(e("followMeHome.notifications.checkInRequired"),"warning"),v(t+1e3*getCheckInInterval(x.riskLevel)))},1e3);return()=>clearInterval(t)}},[n,y,x,e]),t.jsxs("div",{className:"container mx-auto p-4",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:e("followMeHome.title")}),t.jsx("p",{className:"mb-6 text-center max-w-2xl mx-auto",children:e("followMeHome.description")}),t.jsxs("div",{className:"text-center mb-6 space-x-4",children:[t.jsx("button",{onClick:()=>R(!0),className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-purple-700 transition-colors",children:e("followMeHome.parental.button")}),t.jsx("button",{onClick:()=>$(!0),className:"bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:e("followMeHome.offline.button")}),("active"===n||"ended"===n)&&t.jsx("button",{onClick:()=>B(!0),className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors",children:e("followMeHome.share.button")})]}),t.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:["setup"===n&&t.jsx(TripSetup,{onStartTrip:ae}),"active"===n&&t.jsx(ActiveTrip,{tripDetails:x,onEndTrip:re,onCheckIn:ne,nextCheckIn:y}),"ended"===n&&t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e("followMeHome.ended.title")}),t.jsx("p",{children:e("followMeHome.ended.description")})]})]}),b.map(e=>t.jsx(Notification,{message:e.message,type:e.type,onClose:()=>h(t=>t.filter(t=>t.id!==e.id))},e.id)),D&&t.jsx(ParentalControls,{onClose:()=>R(!1)}),_&&t.jsx(OfflineNetworking,{onClose:()=>$(!1)}),z&&t.jsx(ShareTrip,{tripDetails:x,tripState:n,onClose:()=>B(!1)}),W&&t.jsx(te,{tripDetails:x,onComplete:le,onCancel:()=>q(!1)})]})};export{FollowMeHome as default};
