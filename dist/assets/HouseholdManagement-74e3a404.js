import{j as e}from"./index-286a0f84.js";import{r as s}from"./vendor-c40a6ff5.js";import{u as t}from"./i18n-53393985.js";import{a,t as r,U as l,R as i,ah as d,Z as n,r as c,j as o,b as x,ai as m,aj as g,ac as h,ak as y,al as p,K as b,am as u,x as j,Y as N,an as v,ao as w,W as k,ap as f,aq as S,ar as C,Q as D,as as M}from"./ui-ac866f5b.js";import"./firebase-fb364782.js";const HouseholdManagement=()=>{var E;const[T,U]=s.useState("overview");s.useState(null);const[B,A]=s.useState(!1),[P,J]=s.useState(!1),[R,_]=s.useState("SUNSET-2025"),[H,I]=s.useState("2025-01-15");t();const[O,F]=s.useState({id:1,name:"Doe Family Home",address:"123 Main Street, Johannesburg, GP",gpsCoordinates:{lat:-26.2041,lng:28.0473},administrator:"John Doe",createdDate:"2024-12-01",households:[{id:1,name:"Main House - Doe Family",type:"main",members:[{id:1,name:"John Doe",role:"Administrator",status:"online",lastSeen:"2 min ago",permissions:["manage_members","emergency_alert","settings","invite_community"],phone:"+27123456789",emergencyContact:!0},{id:2,name:"Jane Doe",role:"Member",status:"online",lastSeen:"1 min ago",permissions:["emergency_alert","communication","service_status"],phone:"+27123456788",emergencyContact:!0}]},{id:2,name:"Cottage A - Smith Family",type:"cottage",members:[{id:3,name:"Bob Smith",role:"Tenant",status:"offline",lastSeen:"1 hour ago",permissions:["communication","service_status"],phone:"+27123456787",emergencyContact:!1}]},{id:3,name:"Cottage B - Available",type:"cottage",members:[]}],communication:{wifiNetwork:"DoeFamily_WiFi",bluetoothEnabled:!0,emergencyCode:R,lastCodeUpdate:H,channels:[{id:"wifi",name:"WiFi Network",status:"active",strength:5},{id:"bluetooth",name:"Bluetooth Mesh",status:"active",strength:4},{id:"cellular",name:"Cellular Backup",status:"standby",strength:3}]}}),[W,G]=s.useState({id:1,name:"Maple Street Community",type:"street",established:"2024-11-15",governance:{votingThreshold:60,proposalCooldown:7,emergencyThreshold:80},households:[{id:1,address:"123 Main Street",name:"Doe Family Home",administrator:"John Doe",joinedDate:"2024-11-15",status:"active",members:4},{id:2,address:"125 Main Street",name:"Johnson Residence",administrator:"Mary Johnson",joinedDate:"2024-11-16",status:"active",members:3},{id:3,address:"127 Main Street",name:"Williams Home",administrator:"David Williams",joinedDate:"2024-11-20",status:"pending_approval",members:2}],serviceProviders:[{id:"municipality",name:"City of Johannesburg",type:"municipality",contact:"011-407-7000",status:"active"},{id:"eskom",name:"Eskom",type:"electricity",contact:"086-003-7566",status:"active"},{id:"citypower",name:"City Power",type:"electricity",contact:"011-490-7911",status:"active"},{id:"joburg_water",name:"Johannesburg Water",type:"water",contact:"011-688-1699",status:"active"},{id:"local_school",name:"Maple Primary School",type:"education",contact:"011-123-4567",status:"active"},{id:"security",name:"ADT Security",type:"security",contact:"086-123-4567",status:"active"}]}),[L,Y]=s.useState({electricity:{status:"online",reportedBy:[],lastUpdate:new Date,confidence:100},water:{status:"online",reportedBy:[],lastUpdate:new Date,confidence:100},internet:{status:"partial",reportedBy:["John Doe"],lastUpdate:new Date,confidence:75},security:{status:"online",reportedBy:[],lastUpdate:new Date,confidence:100},streetLights:{status:"offline",reportedBy:["John Doe","Mary Johnson"],lastUpdate:new Date,confidence:85}}),[$,V]=s.useState([{id:1,title:"Install Speed Bumps on Main Street",description:"Install 3 speed bumps to reduce vehicle speed in our residential area",proposedBy:"Mary Johnson",proposedDate:"2024-12-01",type:"infrastructure",status:"voting",votingDeadline:"2024-12-08",votes:{yes:8,no:2,abstain:1},totalEligible:15,threshold:60},{id:2,title:"Community Garden Project",description:"Create a shared vegetable garden in the vacant lot at the end of the street",proposedBy:"David Williams",proposedDate:"2024-12-03",type:"community",status:"voting",votingDeadline:"2024-12-10",votes:{yes:5,no:1,abstain:3},totalEligible:15,threshold:60}]),[q,z]=s.useState([{id:1,sender:"John Doe",message:"Street lights are out again on the north side of Main Street",timestamp:new Date("2024-12-04T08:30:00"),type:"service_alert",channel:"household"},{id:2,sender:"Mary Johnson",message:"Community meeting this Saturday at 10 AM - Community Center",timestamp:new Date("2024-12-04T14:15:00"),type:"announcement",channel:"community"}]),[K,Q]=s.useState(""),[Z,X]=s.useState("household");s.useState({name:"",email:"",phone:"",role:"Member"});const ee=[{id:"wifi",name:"WiFi Network",icon:k,status:"active",description:"Local network communication"},{id:"bluetooth",name:"Bluetooth Mesh",icon:D,status:"active",description:"Device-to-device connection"},{id:"cellular",name:"Cellular Backup",icon:h,status:"standby",description:"Mobile network fallback"},{id:"satellite",name:"Emergency Satellite",icon:M,status:"available",description:"Emergency communication"}],getAllMembers=()=>O.households.flatMap(e=>e.members),handleSendMessage=()=>{if(K.trim()){const e={id:Date.now(),sender:"You",message:K,timestamp:new Date,type:"message",channel:Z};z(s=>[e,...s]),Q("")}},updateServiceStatus=(e,s,t)=>{Y(a=>({...a,[e]:{status:s,reportedBy:"offline"===s?[t]:[],lastUpdate:new Date,confidence:"offline"===s?85:100}}))},voteOnProposal=(e,s)=>{V(t=>t.map(t=>t.id===e?{...t,votes:{...t.votes,[s]:t.votes[s]+1}}:t))},getServiceStatusColor=e=>{switch(e){case"online":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"offline":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"partial":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},getProposalStatusColor=e=>{const s=e.votes.yes/e.totalEligible*100;return s>=e.threshold?"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200":s>=.7*e.threshold?"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200":"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200"},updateEmergencyCode=()=>{const e=["SUNRISE","SUNSET","OCEAN","MOUNTAIN","GARDEN","BRIDGE","RIVER","FOREST"],s=["2025","2026"],t=`${e[Math.floor(Math.random()*e.length)]}-${s[Math.floor(Math.random()*s.length)]}`;_(t),I((new Date).toISOString().split("T")[0]),F(e=>({...e,communication:{...e.communication,emergencyCode:t,lastCodeUpdate:(new Date).toISOString().split("T")[0]}}))};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(a,{className:"h-12 w-12 text-primary-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Household & Community Management"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mt-2",children:"Comprehensive family safety, community governance, and emergency coordination"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>A(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Create Household"]}),e.jsxs("button",{onClick:()=>J(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Join Community"]})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Household Overview",icon:a},{id:"communication",name:"Communication",icon:i},{id:"community",name:"Community Governance",icon:d},{id:"services",name:"Service Status",icon:n},{id:"emergency",name:"Emergency Protocols",icon:c},{id:"settings",name:"Settings",icon:o}].map(s=>e.jsxs("button",{onClick:()=>U(s.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(T===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{children:s.name})]},s.id))})})}),"overview"===T&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Household Overview"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsxs("span",{children:[getAllMembers().length," Total Members"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{children:[getAllMembers().filter(e=>"online"===e.status).length," Online"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(a,{className:"h-5 w-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Property Details"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Address: ",O.address]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Administrator: ",O.administrator]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Established: ",O.createdDate]}),O.householdType&&e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Type: ",O.householdType.replace(/_/g," "),O.scope&&e.jsxs("span",{children:[" • Scope: ",O.scope.replace(/_/g," ")]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(l,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Community Status"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Street: ",W.name]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Households: ",W.households.length]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Joined: ",null==(E=W.households[0])?void 0:E.joinedDate]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(x,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Emergency Status"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Code: ",R]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Updated: ",H]}),e.jsx("button",{onClick:updateEmergencyCode,className:"text-primary-600 hover:text-primary-700 text-xs",children:"Rotate Code"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Property Units"}),O.households.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+("main"===s.type?"bg-primary-100 dark:bg-primary-900":"bg-gray-100 dark:bg-gray-700"),children:e.jsx(a,{className:"h-5 w-5 "+("main"===s.type?"text-primary-600":"text-gray-600")})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.members.length," members",s.type&&e.jsxs("span",{className:"ml-2 text-blue-600",children:["Type: ",s.type.replace(/_/g," ")]})]})]})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(m,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-2",children:s.members.length>0?s.members.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+("online"===s.status?"bg-green-500":"bg-gray-400")}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),"Administrator"===s.role&&e.jsx(g,{className:"h-4 w-4 text-yellow-500"}),s.emergencyContact&&e.jsx(x,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.role," • ",s.lastSeen]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-500 transition-colors",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-purple-500 transition-colors",children:e.jsx(y,{className:"h-4 w-4"})})]})]},s.id)):e.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[e.jsx(a,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Unit available for occupancy"})]})})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Communication Channels"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ee.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+("active"===s.status?"bg-green-100 dark:bg-green-900":"bg-gray-100 dark:bg-gray-700"),children:e.jsx(s.icon,{className:"h-5 w-5 "+("active"===s.status?"text-green-600":"text-gray-600")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:s.description})]})]}),e.jsx("div",{className:"px-2 py-1 rounded text-xs font-medium "+("active"===s.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"standby"===s.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:s.status})]},s.id))})]})]}),"communication"===T&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Send Message"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("select",{value:Z,onChange:e=>X(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"household",children:"Household Only"}),e.jsx("option",{value:"community",children:"Community Broadcast"}),e.jsx("option",{value:"emergency",children:"Emergency Alert"})]}),e.jsxs("div",{className:"flex-1 flex space-x-2",children:[e.jsx("input",{type:"text",value:K,onChange:e=>Q(e.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white",onKeyPress:e=>"Enter"===e.key&&handleSendMessage()}),e.jsx("button",{onClick:handleSendMessage,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(j,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Recent Messages"}),e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.sender}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("household"===s.channel?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"community"===s.channel?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:s.channel})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.message})]},s.id))})]})]}),"community"===T&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Community Governance"}),e.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"New Proposal"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(l,{className:"h-5 w-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Community Info"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Name: ",W.name]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Type: ",W.type]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Established: ",W.established]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(d,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Voting Rules"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Threshold: ",W.governance.votingThreshold,"%"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Emergency: ",W.governance.emergencyThreshold,"%"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Cooldown: ",W.governance.proposalCooldown," days"]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(a,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Participation"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Total Households: ",W.households.length]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Active: ",W.households.filter(e=>"active"===e.status).length]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Pending: ",W.households.filter(e=>"pending_approval"===e.status).length]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Community Households"}),e.jsx("div",{className:"space-y-3",children:W.households.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 rounded-lg "+("active"===s.status?"bg-green-100 dark:bg-green-900":"bg-yellow-100 dark:bg-yellow-900"),children:e.jsx(a,{className:"h-5 w-5 "+("active"===s.status?"text-green-600":"text-yellow-600")})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.address," • Admin: ",s.administrator]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.members," members"]}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("active"===s.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"),children:s.status}),"pending_approval"===s.status&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"p-1 text-green-600 hover:text-green-700",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:text-red-700",children:e.jsx(v,{className:"h-4 w-4"})})]})]})]},s.id))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Active Proposals"}),e.jsx("div",{className:"space-y-6",children:$.map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["By: ",s.proposedBy]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Proposed: ",s.proposedDate]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Deadline: ",s.votingDeadline]})]})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${getProposalStatusColor(s)}`,children:[Math.round(s.votes.yes/s.totalEligible*100),"% Support"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("span",{children:["Progress (",s.votes.yes+s.votes.no+s.votes.abstain,"/",s.totalEligible," voted)"]}),e.jsxs("span",{children:["Requires ",s.threshold,"% to pass"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:s.votes.yes/s.totalEligible*100+"%"}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Yes: ",s.votes.yes]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["No: ",s.votes.no]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Abstain: ",s.votes.abstain]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>voteOnProposal(s.id,"yes"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Vote Yes"}),e.jsx("button",{onClick:()=>voteOnProposal(s.id,"no"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Vote No"}),e.jsx("button",{onClick:()=>voteOnProposal(s.id,"abstain"),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:"Abstain"})]})]})]},s.id))})]})]}),"services"===T&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Community Service Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(L).map(([s,t])=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"p-2 rounded-lg "+("electricity"===s?"bg-yellow-100 dark:bg-yellow-900":"water"===s?"bg-blue-100 dark:bg-blue-900":"internet"===s?"bg-purple-100 dark:bg-purple-900":"security"===s?"bg-red-100 dark:bg-red-900":"bg-gray-100 dark:bg-gray-700"),children:["electricity"===s&&e.jsx(n,{className:"h-5 w-5 text-yellow-600"}),"water"===s&&e.jsx(w,{className:"h-5 w-5 text-blue-600"}),"internet"===s&&e.jsx(k,{className:"h-5 w-5 text-purple-600"}),"security"===s&&e.jsx(x,{className:"h-5 w-5 text-red-600"}),"streetLights"===s&&e.jsx(f,{className:"h-5 w-5 text-gray-600"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:s}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.reportedBy.length>0?`Reported by ${t.reportedBy.length} residents`:"No issues reported"})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${getServiceStatusColor(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:"Confidence"}),e.jsxs("span",{children:[t.confidence,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(t.confidence>=80?"bg-green-500":t.confidence>=60?"bg-yellow-500":"bg-red-500"),style:{width:`${t.confidence}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",t.lastUpdate.toLocaleTimeString()]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>updateServiceStatus(s,"online","You"),className:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Working"}),e.jsx("button",{onClick:()=>updateServiceStatus(s,"offline","You"),className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Issue"})]})]})]},s))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Service Providers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.serviceProviders.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:s.type}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:s.contact})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-green-500 transition-colors",children:e.jsx(i,{className:"h-4 w-4"})})]})]},s.id))})]})]}),"emergency"===T&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Emergency Protocols"}),e.jsxs("button",{onClick:updateEmergencyCode,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Rotate Code"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{code:"SUNSET",description:"All clear - normal situation",level:"normal",action:"Continue normal communication"},{code:"STORM",description:"Under duress - forced to respond",level:"duress",action:"Silently alert security and neighbors"},{code:"THUNDER",description:"Immediate danger - cannot speak freely",level:"critical",action:"Immediate dispatch of security and emergency services"}].map(s=>e.jsxs("div",{className:"p-4 border-2 rounded-lg "+("critical"===s.level?"border-red-500 bg-red-50 dark:bg-red-900/20":"duress"===s.level?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-green-500 bg-green-50 dark:bg-green-900/20"),children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(C,{className:"h-5 w-5 "+("critical"===s.level?"text-red-600":"duress"===s.level?"text-yellow-600":"text-green-600")}),e.jsx("h3",{className:"font-bold text-lg "+("critical"===s.level?"text-red-900 dark:text-red-100":"duress"===s.level?"text-yellow-900 dark:text-yellow-100":"text-green-900 dark:text-green-100"),children:s.code})]}),e.jsx("p",{className:"text-sm mb-3 "+("critical"===s.level?"text-red-800 dark:text-red-200":"duress"===s.level?"text-yellow-800 dark:text-yellow-200":"text-green-800 dark:text-green-200"),children:s.description}),e.jsxs("p",{className:"text-xs "+("critical"===s.level?"text-red-700 dark:text-red-300":"duress"===s.level?"text-yellow-700 dark:text-yellow-300":"text-green-700 dark:text-green-300"),children:["Action: ",s.action]})]},s.code))}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Current Emergency Code"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-1",children:"Use this code to confirm all-clear status during emergencies"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:R}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Last updated: ",H]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Emergency Contacts"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:getAllMembers().filter(e=>e.emergencyContact).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(x,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.phone})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-green-500 transition-colors",children:e.jsx(i,{className:"h-4 w-4"})})]})]},s.id))})]})]})]})})};export{HouseholdManagement as default};
