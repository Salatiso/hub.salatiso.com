import{G as e,j as r}from"./index-cd94da5a.js";import{r as t,b as s,L as a}from"./vendor-d6555781.js";import{z as i}from"./firebase-fb364782.js";import{a as l,g as n}from"./firebase-0c253907.js";import{u as o}from"./i18n-8b62e3c8.js";import{U as d}from"./ui-eef567c7.js";const InstantTrustVerification=()=>{const{guestData:c,setGuestData:g}=t.useContext(e),u=s(),{t:x}=o(),[m,h]=t.useState({name:"",surname:"",phone:"",vehicleInfo:{registration:""},disclosureLevel:1,shareLocation:!0,role:"Passenger",servicesRegistered:["ride-sharing"]}),[p,y]=t.useState(null),[b,v]=t.useState(null),k=[{level:1,title:x("instantTrust.disclosureLevel.basic.title"),description:x("instantTrust.disclosureLevel.basic.description"),color:"green",risk:x("instantTrust.disclosureLevel.basic.risk")},{level:2,title:x("instantTrust.disclosureLevel.standard.title"),description:x("instantTrust.disclosureLevel.standard.description"),color:"yellow",risk:x("instantTrust.disclosureLevel.standard.risk")},{level:3,title:x("instantTrust.disclosureLevel.full.title"),description:x("instantTrust.disclosureLevel.full.description"),color:"red",risk:x("instantTrust.disclosureLevel.full.risk")}],handleProfileUpdate=(e,r)=>{h(t=>({...t,[e]:r}))};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(d,{className:"h-16 w-16 text-primary-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:x("instantTrust.createProfile.title")}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[x("instantTrust.createProfile.subtitle")," ",r.jsx(a,{to:"/onboarding",className:"text-primary-600 hover:underline",children:x("nav.onboarding","go to Onboarding")}),"."]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center",children:x("instantTrust.quickProfile.title")}),b&&"google"===p&&r.jsx("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg border border-green-200 dark:border-green-700",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[b.photoURL&&r.jsx("img",{src:b.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:[x("instantTrust.quickProfile.signedInAs")," ",b.displayName]}),r.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:b.email})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:async()=>{try{if(y("google"),!l)throw new Error("Firebase auth not initialized");const e=await i(l,n);if(!(null==e?void 0:e.user))throw new Error("No user returned from Google sign-in");const r=e.user,t=r.displayName||"",s=t.split(" "),a=s[0]||"",o=s.slice(1).join(" ")||"";h(e=>({...e,name:a,surname:o,phone:r.phoneNumber||e.phone})),v(r),alert(x("instantTrust.alerts.googleSignInSuccess",{name:t}))}catch(e){let r=x("instantTrust.alerts.googleSignInError.generic");switch(e.code){case"auth/popup-closed-by-user":r=x("instantTrust.alerts.googleSignInError.popupClosed");break;case"auth/popup-blocked":r=x("instantTrust.alerts.googleSignInError.popupBlocked");break;case"auth/cancelled-popup-request":r=x("instantTrust.alerts.googleSignInError.cancelled");break;default:r=x("instantTrust.alerts.googleSignInError.generic")}alert(r),y(null)}},disabled:b&&"google"===p,className:"flex items-center justify-center space-x-3 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors "+(b&&"google"===p?"opacity-50 cursor-not-allowed":""),children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:x(b&&"google"===p?"instantTrust.quickProfile.signedInWithGoogle":"instantTrust.quickProfile.signInWithGoogle")})]}),r.jsxs("button",{onClick:()=>{try{y("contact");const e=document.createElement("input");e.type="file",e.accept=".vcf,.csv,.json",e.onchange=e=>{const r=e.target.files[0];r&&alert(x("instantTrust.alerts.contactUpload",{fileName:r.name}))},e.click()}catch(e){}},className:"flex items-center justify-center space-x-3 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:x("instantTrust.quickProfile.uploadContact")})]})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mt-4",children:x("instantTrust.quickProfile.manualFill")})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:x("instantTrust.personalInfo.title")}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.personalInfo.name")}),r.jsx("input",{type:"text",value:m.name,onChange:e=>handleProfileUpdate("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.personalInfo.surname")}),r.jsx("input",{type:"text",value:m.surname,onChange:e=>handleProfileUpdate("surname",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.personalInfo.phoneNumber")}),r.jsx("input",{type:"tel",value:m.phone,onChange:e=>handleProfileUpdate("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:x("instantTrust.vehicleInfo.title")}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.vehicleInfo.registrationNumber")}),r.jsx("input",{type:"text",value:m.vehicleInfo.registration,onChange:e=>handleProfileUpdate("vehicleInfo",{...m.vehicleInfo,registration:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:x("instantTrust.roleSelection.title")}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.roleSelection.selectRole")}),r.jsxs("select",{value:m.role,onChange:e=>handleProfileUpdate("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"Passenger",children:x("instantTrust.roleSelection.passenger")}),r.jsx("option",{value:"Driver",children:x("instantTrust.roleSelection.driver")}),r.jsx("option",{value:"Service Provider",children:x("instantTrust.roleSelection.serviceProvider")}),r.jsx("option",{value:"Community Member",children:x("instantTrust.roleSelection.communityMember")})]})]}),r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:x("instantTrust.services.title")}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("instantTrust.services.selectServices")}),r.jsx("div",{className:"space-y-2",children:[{key:"rideSharing",value:"ride-sharing"},{key:"hitchhikingSafety",value:"hitchhiking-safety"},{key:"deliveryServices",value:"delivery-services"},{key:"homeServices",value:"home-services"},{key:"propertyManagement",value:"property-management"}].map(e=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:m.servicesRegistered.includes(e.value),onChange:r=>{const t=r.target.checked?[...m.servicesRegistered,e.value]:m.servicesRegistered.filter(r=>r!==e.value);handleProfileUpdate("servicesRegistered",t)},className:"mr-2"}),x(`instantTrust.services.${e.key}`)]},e.value))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:x("instantTrust.disclosureLevel.title")}),k.map(e=>r.jsxs("button",{onClick:()=>handleProfileUpdate("disclosureLevel",e.level),className:"w-full p-4 border rounded-lg text-left transition-colors "+(m.disclosureLevel===e.level?"border-primary-500 bg-primary-50 dark:bg-primary-900":"border-gray-200 dark:border-gray-600 hover:border-primary-500"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),r.jsx("span",{className:"px-2 py-1 rounded text-xs "+("green"===e.color?"bg-green-100 text-green-800":"yellow"===e.color?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.risk})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.description})]},e.level)),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"shareLocation",checked:m.shareLocation,onChange:e=>handleProfileUpdate("shareLocation",e.target.checked),className:"rounded"}),r.jsx("label",{htmlFor:"shareLocation",className:"text-sm text-gray-700 dark:text-gray-300",children:x("instantTrust.shareLocation")})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>{g(e=>({...e,profile:{...e.profile,name:m.name,surname:m.surname,phone:m.phone,vehicleInfo:m.vehicleInfo,disclosureLevel:m.disclosureLevel,shareLocation:m.shareLocation,role:m.role,servicesRegistered:m.servicesRegistered,authMethod:p,firebaseUser:l.currentUser?{uid:l.currentUser.uid,email:l.currentUser.email,displayName:l.currentUser.displayName,photoURL:l.currentUser.photoURL}:null}})),u("/onboarding")},className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700",children:x("instantTrust.buttons.continue")})})]})})})})};export{InstantTrustVerification as default};
