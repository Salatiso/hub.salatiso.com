import{G as e,q as s,j as a,r as t}from"./index-6c723d70.js";import{r as l}from"./vendor-d6555781.js";import{j as i,l as r,x as n,I as d,u as c}from"./firebase-fb364782.js";import{a as o,c as m}from"./layoutHelpers-b7eca1f0.js";import{aM as x,aD as p,q as u,R as h,E as g,aN as f,y as b,p as y}from"./ui-eef567c7.js";import"./i18n-8b62e3c8.js";const LifeCV=()=>{var j,v,N,w,k,U,A,C;const{guestData:S,updateGuestData:D}=l.useContext(e),{user:B}=s(),[L,T]=l.useState("overview"),[E,P]=l.useState(!0),[V,F]=l.useState(!1),[R,G]=l.useState("idle"),[O,I]=l.useState(""),[M,H]=l.useState(null),[J,$]=l.useState([]),[q,W]=l.useState({fullName:"Salatiso Lonwabo Mdeni",email:"salatiso@salatiso.com",phone:"084 652 9115",location:"Johannesburg, Gauteng, South Africa",personalProfile:"",careerVision:"",workStyle:"",missionStatement:"",coreValues:["Equality Before the Law","The Golden Rule","Self-Sufficiency & Resilience","Family & Legacy","Meritocracy"],education:[],experience:[],skills:[],certifications:[],projects:[],lastUpdatedBy:"lifesync",lastUpdatedAt:Date.now(),syncedApps:["lifesync"],dataVersion:1});l.useEffect(()=>{const e=setTimeout(()=>{W(e=>({...e,personalProfile:"A seasoned OHS and Risk Management expert with over two decades of experience across diverse industries. A passionate author, social entrepreneur, and staunch advocate for fathers', boys', and family rights.",careerVision:"To leverage expertise in risk management, law, and social advocacy to dismantle systemic discrimination, particularly within family law. To empower individuals and communities through accessible knowledge.",workStyle:"A proactive and strategic thinker who thrives on complex challenges. Combines deep understanding of technical and regulatory landscapes with strong leadership and communication skills.",missionStatement:"I am a father to my son; all else is a means to this end. I strive to create a better future for him by confronting societal injustices."})),P(!1)},500);return()=>clearTimeout(e)},[]),l.useEffect(()=>{if(!B)return;(async()=>{try{const e=i(t,"users",B.uid,"profile","lifecv"),s=await r(e);if(s.exists()){const e=s.data();W(s=>({...s,...e})),H(e.lastUpdatedAt),"lifesync"!==e.lastUpdatedBy&&$(s=>[...s,{app:e.lastUpdatedBy,timestamp:e.lastUpdatedAt,fields:"Profile updated"}])}return n(e,e=>{if(e.exists()){const s=e.data();"lifesync"!==s.lastUpdatedBy&&s.lastUpdatedAt>q.lastUpdatedAt&&(W(e=>({...e,...s})),G("success"),I(`Updated from ${s.lastUpdatedBy}!`),setTimeout(()=>G("idle"),3e3))}})}catch(e){G("error"),I("Failed to load data from Firebase")}})()},[B]);const Q=l.useCallback(()=>{const e={id:Date.now(),school:"Tshwane University of Technology (TUT)",degree:"B-Tech",field:"Environmental Health",graduationDate:"2008",description:""};W(s=>({...s,education:[...s.education||[],e],lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);l.useCallback((e,s,a)=>{W(t=>({...t,education:t.education.map(t=>t.id===e?{...t,[s]:a}:t),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);const Y=l.useCallback(e=>{W(s=>({...s,education:s.education.filter(s=>s.id!==e),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]),_=l.useCallback(()=>{const e={id:Date.now(),company:"Flamea",jobTitle:"Founder & Advocate",startDate:"Jan 2023",endDate:"Present",isCurrent:!0,description:"Founded Flamea, a father-driven advocacy movement to challenge and dismantle systemic biases in South Africa's family law system.",skills:["Leadership","Advocacy","Strategic Planning"]};W(s=>({...s,experience:[...s.experience||[],e],lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);l.useCallback((e,s,a)=>{W(t=>({...t,experience:t.experience.map(t=>t.id===e?{...t,[s]:a}:t),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);const z=l.useCallback(e=>{W(s=>({...s,experience:s.experience.filter(s=>s.id!==e),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]),K=l.useCallback(()=>{const e={id:Date.now(),name:"Google Cybersecurity Professional Certificate",issuer:"Google",issueDate:"2024",expiryDate:"N/A",credentialUrl:""};W(s=>({...s,certifications:[...s.certifications||[],e],lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);l.useCallback((e,s,a)=>{W(t=>({...t,certifications:t.certifications.map(t=>t.id===e?{...t,[s]:a}:t),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]);const X=l.useCallback(e=>{W(s=>({...s,certifications:s.certifications.filter(s=>s.id!==e),lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"}))},[]),Z=l.useCallback(()=>{const e=JSON.stringify(q,null,2),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`lifecv-${q.fullName.replace(/\s+/g,"-").toLowerCase()}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t)},[q]);return E?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading LifeCV..."})]})}):a.jsxs("div",{className:o({bgColor:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800"}),children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:m(),children:"LifeCV"}),a.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[a.jsx(x,{className:"w-4 h-4"}),"Professional Record - Synced Across Ecosystem"]})]}),"idle"!==R&&a.jsxs("div",{className:"mb-6 p-4 rounded-lg flex items-center gap-3 "+("syncing"===R?"bg-blue-50 text-blue-800 border border-blue-200":"success"===R?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:["syncing"===R&&a.jsx(p,{className:"w-5 h-5 animate-spin"}),"success"===R&&a.jsx(u,{className:"w-5 h-5"}),"error"===R&&a.jsx(h,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:O})]}),J.length>0&&a.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[a.jsxs("h3",{className:"font-semibold text-indigo-900 mb-2 flex items-center gap-2",children:[a.jsx(g,{className:"w-4 h-4"}),"Updates from Other Apps"]}),J.map((e,s)=>a.jsxs("p",{className:"text-sm text-indigo-700",children:["â€¢ ",a.jsx("strong",{children:e.app})," - ",e.fields," Â· ",new Date(e.timestamp).toLocaleString()]},s))]}),a.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-between items-center",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:async()=>{if(!B)return G("error"),void I("Not logged in");F(!0),G("syncing"),I("Syncing to cloud...");try{const e=i(t,"users",B.uid,"profile","lifecv"),s={...q,lastUpdatedAt:d(),lastUpdatedBy:"lifesync",syncedApps:Array.from(new Set([...q.syncedApps||[],"lifesync"])),userId:B.uid};await c(e,s),G("success"),I("âœ“ Synced successfully! Available across ecosystem"),H(Date.now()),D(e=>({...e,lifeCV:q})),setTimeout(()=>G("idle"),3e3)}catch(e){G("error"),I("Failed to sync. Check your connection.")}finally{F(!1)}},disabled:V,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition font-medium","aria-label":"Sync to cloud",children:[a.jsx(x,{className:"w-5 h-5 mr-2"}),V?"Syncing...":"Sync to Cloud"]}),a.jsxs("button",{onClick:Z,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium","aria-label":"Export as JSON",children:[a.jsx(f,{className:"w-5 h-5 mr-2"}),"Export"]})]}),M&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Last synced: ",new Date(M).toLocaleString()]})]}),a.jsxs("div",{className:"mb-6 bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:q.fullName}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm text-gray-600",children:[a.jsxs("div",{children:["ðŸ“§ ",q.email]}),a.jsxs("div",{children:["ðŸ“± ",q.phone]}),a.jsxs("div",{children:["ðŸ“ ",q.location]})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Synced Across:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:null==(j=q.syncedApps)?void 0:j.map(e=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},e))})]})]}),a.jsx("div",{className:"mb-6 bg-white rounded-t-lg shadow border-b border-gray-200 overflow-hidden",children:a.jsx("div",{className:"flex flex-wrap",children:["overview","education","experience","certifications","skills"].map(e=>a.jsx("button",{onClick:()=>T(e),className:"flex-1 min-w-max px-6 py-4 font-medium border-b-2 transition "+(L===e?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-900"),"aria-selected":L===e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),a.jsxs("div",{className:"bg-white rounded-b-lg shadow p-6 space-y-4",children:["overview"===L&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Professional Profile"}),a.jsx("textarea",{value:q.personalProfile,onChange:e=>W(s=>({...s,personalProfile:e.target.value,lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"})),placeholder:"Write your professional profile...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Career Vision"}),a.jsx("textarea",{value:q.careerVision,onChange:e=>W(s=>({...s,careerVision:e.target.value,lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"})),placeholder:"Describe your career vision...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Work Style"}),a.jsx("textarea",{value:q.workStyle,onChange:e=>W(s=>({...s,workStyle:e.target.value,lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"})),placeholder:"Describe your work style...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mission Statement"}),a.jsx("textarea",{value:q.missionStatement,onChange:e=>W(s=>({...s,missionStatement:e.target.value,lastUpdatedAt:Date.now(),lastUpdatedBy:"lifesync"})),placeholder:"Your personal mission statement...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),"education"===L&&a.jsxs("div",{className:"space-y-4",children:[null==(v=q.education)?void 0:v.map(e=>a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:e.school}),a.jsxs("p",{className:"text-gray-700",children:[e.degree," in ",e.field]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Graduated: ",e.graduationDate]}),e.description&&a.jsx("p",{className:"mt-2 text-gray-600",children:e.description})]}),a.jsx("button",{onClick:()=>Y(e.id),className:"text-red-600 hover:text-red-800 transition","aria-label":"Delete education",children:a.jsx(b,{className:"w-5 h-5"})})]})},e.id)),a.jsxs("button",{onClick:Q,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[a.jsx(y,{className:"w-5 h-5 mr-2"}),"Add Education"]})]}),"experience"===L&&a.jsxs("div",{className:"space-y-4",children:[null==(N=q.experience)?void 0:N.map(e=>{var s;return a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:e.jobTitle}),a.jsx("p",{className:"text-gray-700",children:e.company}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.startDate," - ",e.endDate||"Present"]}),e.description&&a.jsx("p",{className:"mt-2 text-gray-600",children:e.description}),(null==(s=e.skills)?void 0:s.length)>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.skills.map(e=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e},e))})]}),a.jsx("button",{onClick:()=>z(e.id),className:"text-red-600 hover:text-red-800 transition","aria-label":"Delete experience",children:a.jsx(b,{className:"w-5 h-5"})})]})},e.id)}),a.jsxs("button",{onClick:_,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[a.jsx(y,{className:"w-5 h-5 mr-2"}),"Add Experience"]})]}),"certifications"===L&&a.jsxs("div",{className:"space-y-4",children:[null==(w=q.certifications)?void 0:w.map(e=>a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:e.name}),a.jsx("p",{className:"text-gray-700",children:e.issuer}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Issued: ",e.issueDate," ","N/A"!==e.expiryDate&&`â€¢ Expires: ${e.expiryDate}`]}),e.credentialUrl&&a.jsxs("a",{href:e.credentialUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:["View Credential ",a.jsx(g,{className:"w-3 h-3"})]})]}),a.jsx("button",{onClick:()=>X(e.id),className:"text-red-600 hover:text-red-800 transition","aria-label":"Delete certification",children:a.jsx(b,{className:"w-5 h-5"})})]})},e.id)),a.jsxs("button",{onClick:K,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[a.jsx(y,{className:"w-5 h-5 mr-2"}),"Add Certification"]})]}),"skills"===L&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Core Skills"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Risk Management","OHS","Auditing","Leadership","Communication","Python","SQL"].map(e=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},e))})]})})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==(k=q.education)?void 0:k.length)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Education"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==(U=q.experience)?void 0:U.length)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Experience"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(null==(A=q.certifications)?void 0:A.length)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Certifications"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:(null==(C=q.syncedApps)?void 0:C.length)||1}),a.jsx("div",{className:"text-sm text-gray-600",children:"Synced Apps"})]})]})]})};export{LifeCV as default};
