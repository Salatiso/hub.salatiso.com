import{G as e,j as r,D as t,c as a,t as s,d as i,e as l,p as n}from"./index-286a0f84.js";import{r as o,b as d}from"./vendor-c40a6ff5.js";import{F as c,I as m}from"./IDVerification-236f7a78.js";import{K as g,b as u,O as x,p,a7 as h,x as v,au as b,aH as y}from"./ui-ac866f5b.js";import{G as f,z as N}from"./firebase-fb364782.js";import"./i18n-53393985.js";const ProfileVerification=({onVerificationComplete:t,className:a=""})=>{var s;const{guestData:i,updateGuestData:l}=o.useContext(e),[n,d]=o.useState(null),[v,b]=o.useState((null==(s=i.verifications)?void 0:s.map(e=>e.type))||[]),y=[{id:"facial",title:"Facial Verification",description:"Verify your identity with facial recognition",icon:g,trustBonus:35,component:c,completed:v.includes("facial")},{id:"id",title:"ID Verification",description:"Verify your identity with government ID",icon:u,trustBonus:40,component:m,completed:v.includes("id")}],f=i.trustScore||0,N=100,j=Math.min(N,f+y.filter(e=>!e.completed).reduce((e,r)=>e+r.trustBonus,0)),VerificationCard=({verification:e})=>{const t=e.icon;return r.jsx("div",{className:"border rounded-lg p-6 transition-all "+(e.completed?"border-green-200 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-blue-300 hover:shadow-md"),children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center "+(e.completed?"bg-green-100 dark:bg-green-900/40":"bg-blue-100 dark:bg-blue-900/40"),children:e.completed?r.jsx(p,{className:"w-6 h-6 text-green-600"}):r.jsx(t,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),e.completed&&r.jsx(h,{className:"w-4 h-4 text-green-600"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(x,{className:"w-4 h-4 text-yellow-500"}),r.jsxs("span",{className:"font-medium",children:["+",e.trustBonus," Trust Score"]})]}),e.completed?r.jsx("div",{className:"text-sm text-green-600 font-medium",children:"✓ Completed"}):r.jsx("button",{onClick:()=>d(e.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Start Verification"})]})]})]})})};if(n){const e=y.find(e=>e.id===n);if(!e)return null;const s=e.component;return r.jsx("div",{className:`max-w-2xl mx-auto ${a}`,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"←"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete this verification to boost your Trust Score"})]})]}),r.jsx(s,{onVerificationComplete:e=>((e,r)=>{const a=y.find(r=>r.id===e);if(!a)return;const s=[...v,e];b(s);const i={type:e,completedAt:Date.now(),trustBonus:a.trustBonus,...r};l(e=>({...e,verifications:[...e.verifications||[],i],trustScore:Math.min(N,(e.trustScore||0)+a.trustBonus)})),d(null),t&&t(i)})(n,e),context:"profile",requireFacial:"facial"===n,requireNationality:!1})]})})}return r.jsx("div",{className:`max-w-4xl mx-auto ${a}`,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(u,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Boost Your Trust Score"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete verifications to increase your trustworthiness and unlock more features"})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Current Trust Score"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(x,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:f}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["/ ",N]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Potential"}),r.jsx("div",{className:"text-lg font-semibold text-green-600",children:j})]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500",style:{width:f/N*100+"%"}})}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[r.jsx("span",{children:"0"}),r.jsx("span",{children:"25"}),r.jsx("span",{children:"50"}),r.jsx("span",{children:"75"}),r.jsx("span",{children:"100"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{level:"Individual",score:0,color:"bg-gray-100 dark:bg-gray-700"},{level:"Household",score:25,color:"bg-blue-100 dark:bg-blue-900/40"},{level:"Street",score:50,color:"bg-green-100 dark:bg-green-900/40"},{level:"Community",score:75,color:"bg-yellow-100 dark:bg-yellow-900/40"},{level:"Verified",score:100,color:"bg-purple-100 dark:bg-purple-900/40"}].map((e,t)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-full h-2 rounded-full mb-2 ${e.color} ${f>=e.score?"opacity-100":"opacity-30"}`}),r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:e.level}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.score})]},e.level))}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Available Verifications"}),y.map(e=>r.jsx(VerificationCard,{verification:e},e.id))]}),r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Why verify your profile?"}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[r.jsx("li",{children:"• Higher trust score unlocks premium features"}),r.jsx("li",{children:"• Better matching with service providers"}),r.jsx("li",{children:"• Enhanced safety features and priority support"}),r.jsx("li",{children:"• Access to exclusive community opportunities"})]})]})]})})},j=["Afghanistan","Albania","Algeria","Argentina","Australia","Austria","Bangladesh","Belgium","Brazil","Canada","Chile","China","Colombia","Denmark","Egypt","Finland","France","Germany","Greece","India","Indonesia","Ireland","Italy","Japan","Jordan","Kenya","Malaysia","Mexico","Morocco","Netherlands","New Zealand","Norway","Pakistan","Peru","Philippines","Poland","Portugal","Russia","Saudi Arabia","Singapore","South Africa","South Korea","Spain","Sweden","Switzerland","Thailand","Turkey","Ukraine","United Arab Emirates","United Kingdom","United States","Vietnam","Zimbabwe"],InternationalAddressForm=({address:e={},onChange:t,onGPSConfirm:a,showGPSButton:s=!0,className:i="",label:l="Address"})=>{var n,d;const[c,m]=o.useState({addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",city:e.city||"",state:e.state||"",postalCode:e.postalCode||"",country:e.country||"",latitude:e.latitude||null,longitude:e.longitude||null,gpsAccuracy:e.gpsAccuracy||null}),[g,u]=o.useState(!1),[x,p]=o.useState(!1),[h,y]=o.useState("");o.useEffect(()=>{u("geolocation"in navigator)},[]),o.useEffect(()=>{t&&t(c)},[c,t]);const updateField=(e,r)=>{m(t=>({...t,[e]:r}))};return r.jsxs("div",{className:`space-y-4 ${i}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(v,{className:"w-5 h-5 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:l})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address Line 1 *"}),r.jsx("input",{type:"text",value:c.addressLine1,onChange:e=>updateField("addressLine1",e.target.value),placeholder:"Street address, building name",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address Line 2"}),r.jsx("input",{type:"text",value:c.addressLine2,onChange:e=>updateField("addressLine2",e.target.value),placeholder:"Apartment, suite, unit, floor (optional)",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City / Town *"}),r.jsx("input",{type:"text",value:c.city,onChange:e=>updateField("city",e.target.value),placeholder:"Enter city or town",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"State / Province / Region"}),r.jsx("input",{type:"text",value:c.state,onChange:e=>updateField("state",e.target.value),placeholder:"Enter state, province, or region",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Postal Code / ZIP"}),r.jsx("input",{type:"text",value:c.postalCode,onChange:e=>updateField("postalCode",e.target.value),placeholder:"Enter postal code or ZIP",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country *"}),r.jsxs("select",{value:c.country,onChange:e=>updateField("country",e.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select Country"}),j.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),s&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(b,{className:"w-5 h-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Confirm with GPS"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Use your device's GPS to confirm the exact location coordinates for this address."}),r.jsx("button",{type:"button",onClick:async()=>{if(g){p(!0),y("");try{const e=await new Promise((e,r)=>{navigator.geolocation.getCurrentPosition(e,r,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),r={latitude:e.coords.latitude,longitude:e.coords.longitude,gpsAccuracy:e.coords.accuracy};m(e=>({...e,...r})),a&&a(r)}catch(e){y(1===e.code?"Location access denied. Please enable GPS and try again.":2===e.code?"Location unavailable. Please check your GPS settings.":"Unable to get location. Please try again.")}finally{p(!1)}}},disabled:!g||x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors disabled:cursor-not-allowed",children:x?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Getting Location..."]}):r.jsxs(r.Fragment,{children:[r.jsx(b,{className:"w-4 h-4"}),"Confirm GPS Location"]})}),h&&r.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:h}),c.latitude&&c.longitude&&r.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:r.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("div",{className:"font-medium",children:"GPS Confirmed"}),r.jsxs("div",{className:"mt-1",children:[(null==(n=c.latitude)?void 0:n.toFixed)?c.latitude.toFixed(6):c.latitude,", ",(null==(d=c.longitude)?void 0:d.toFixed)?c.longitude.toFixed(6):c.longitude,c.gpsAccuracy&&r.jsxs("span",{className:"text-xs ml-2",children:["(±",Math.round(c.gpsAccuracy),"m)"]})]})]})}),!g&&r.jsx("div",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400",children:"GPS not supported on this device"})]})]})})]})]})},k=new t("LifeSyncDB");k.version(1).stores({settings:"++id, &key, value",actions_outbox:"++id, type, payload, timestamp, status",content_bundles:"++id, &bundleId, version, data",users:"++id, &userId, profile",peers:"++id, &peerId, lastSeen",messages:"++id, &messageId, sender, payload, timestamp, status"});const w=o.createContext(),C={LITE:{name:"Lite",description:"Core features, offline guides. Minimal storage & battery use. Ideal for low-spec devices.",storageThreshold:300},INTERMEDIATE:{name:"Intermediate",description:"Full offline data, P2P sharing. Recommended for most devices.",storageThreshold:1500},FULL:{name:"Full",description:"All features, richer media, background services. For high-end devices.",storageThreshold:1/0}},DeviceProvider=({children:e})=>{const[t,a]=o.useState(C.INTERMEDIATE.name),[s,i]=o.useState(C.INTERMEDIATE.name),[l,n]=o.useState({storage:0,ram:0}),[d,c]=o.useState(!0);o.useEffect(()=>{(async()=>{let e=C.INTERMEDIATE.name;try{let r=0;if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();r=Math.round((e.quota||0)/1048576)}const t=navigator.deviceMemory||1;n({storage:r,ram:t}),e=r<C.LITE.storageThreshold||t<1?C.LITE.name:r<C.INTERMEDIATE.storageThreshold||t<2?C.INTERMEDIATE.name:C.FULL.name,i(e);const s=await k.settings.get({key:"deviceTier"});a(s?s.value:e)}catch(r){i(C.INTERMEDIATE.name),a(C.INTERMEDIATE.name)}finally{c(!1)}})()},[]);return r.jsx(w.Provider,{value:{tier:t,selectTier:async e=>{a(e),await k.settings.put({key:"deviceTier",value:e})},recommendedTier:s,capabilities:l,loading:d},children:e})},TierSelector=()=>{const{tier:e,selectTier:t,recommendedTier:a,capabilities:s,loading:i}=o.useContext(w);return i?r.jsx("div",{className:"text-center p-4",children:r.jsx("p",{children:"Analyzing device capabilities..."})}):r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsxs("legend",{className:"font-semibold px-2 flex items-center",children:[r.jsx(y,{className:"mr-2"})," Device Performance Tier"]}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:[r.jsx("p",{children:"We've analyzed your device to recommend a setting that balances features and performance."}),r.jsxs("p",{className:"mt-1 opacity-80",children:["Detected: Storage ~ ",s.storage," GB, Memory ~ ",s.ram," GB"]}),r.jsxs("p",{className:"mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Recommendation:"})," ",r.jsx("span",{className:"font-bold text-primary-600",children:a})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.values(C).map(s=>r.jsxs("div",{onClick:()=>t(s.name),className:"p-4 rounded-lg border-2 cursor-pointer transition-all "+(e===s.name?"border-primary-600 bg-primary-50 dark:bg-primary-900/20 shadow-lg":"dark:border-gray-700 hover:border-gray-400"),children:[r.jsxs("h3",{className:"font-bold text-lg",children:[s.name," ",s.name===a&&r.jsx("span",{className:"text-xs font-normal text-primary-600",children:"(Recommended)"})]}),r.jsx("p",{className:"text-sm mt-1",children:s.description})]},s.name))})]})},OnboardingContent=()=>{var t,c,m,g,u,x;const{guestData:p,updateGuestData:h,setGuestData:b}=o.useContext(e),{tier:y}=o.useContext(w),j=d(),C={firstName:"",lastName:"",images:[],optionalNameFields:[],phones:[{id:1,number:"",label:"Mobile"}],emails:[{id:1,address:"",label:"Personal"}],dates:[],work:{title:"",department:"",company:""},relations:[],websites:[],notes:"",customFields:[],consentGPS:!1,gpsCoordinates:null,mode:(null==(t=null==p?void 0:p.profile)?void 0:t.mode)||"guest",deviceType:(null==(c=null==p?void 0:p.profile)?void 0:c.deviceType)||(null==p?void 0:p.deviceType)||null,providerRegistration:{providerType:"Individual",businessName:"",fullName:"",contactNumber:"",email:"",servicesOffered:[],coverageAreas:[],pricing:{base:"",perKm:"",express:""},autoUpgrade:!0}},[R,S]=o.useState({...C,...(null==p?void 0:p.profile)||{},deviceType:(null==(m=null==p?void 0:p.profile)?void 0:m.deviceType)||(null==p?void 0:p.deviceType)||C.deviceType,providerRegistration:{...C.providerRegistration,...(null==(g=null==p?void 0:p.profile)?void 0:g.providerRegistration)||{}}}),[T,E]=o.useState((null==p?void 0:p.servicesRegistered)||["ride-sharing"]),[I,A]=o.useState((null==p?void 0:p.role)||"Generic User"),[P,D]=o.useState(""),[L,F]=o.useState(""),[G,B]=o.useState(!1),[M,O]=o.useState(!1),[U,V]=o.useState("");o.useEffect(()=>{B("geolocation"in navigator)},[]),o.useEffect(()=>{R.consentGPS&&G&&navigator.geolocation.getCurrentPosition(e=>{const r={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy};S(e=>({...e,gpsCoordinates:r})),V("")},e=>{V("Unable to get GPS location. You can continue, but some features will be limited.")},{enableHighAccuracy:!0,timeout:1e4})},[R.consentGPS,G]);const J=o.useCallback(async e=>{var r,t,a,s;const i=null==(r=e.target.files)?void 0:r[0];if(!i)return;const l=await i.text(),n=l.match(/FN:(.*)/),o=l.match(/EMAIL[^:]*:(.*)/),d=l.match(/TEL[^:]*:(.*)/),c=null==(t=null==n?void 0:n[1])?void 0:t.trim(),m=null==(a=null==o?void 0:o[1])?void 0:a.trim(),g=null==(s=null==d?void 0:d[1])?void 0:s.trim();S(e=>({...e,firstName:c?c.split(" ")[0]:e.firstName,lastName:c?c.split(" ").slice(1).join(" "):e.lastName,emails:m?[{id:1,address:m,label:"Personal"}]:e.emails,phones:g?[{id:1,number:g,label:"Mobile"}]:e.phones}))},[]),$=o.useCallback(async()=>{try{if(!a)throw new Error("Firebase auth not initialized");const e=new f;e.addScope("profile"),e.addScope("email");const r=await N(a,e);if(!(null==r?void 0:r.user))throw new Error("No user returned from Google sign-in");const t=r.user;S(e=>({...e,firstName:t.displayName?t.displayName.split(" ")[0]:e.firstName,lastName:t.displayName?t.displayName.split(" ").slice(1).join(" "):e.lastName,providerRegistration:{...e.providerRegistration,email:t.email||e.providerRegistration.email},images:t.photoURL?[t.photoURL]:e.images})),b(e=>({...e,owner:{uid:t.uid,source:"lifesync"}}));const l=s({...R,owner:{uid:t.uid,source:"lifesync"},role:I,servicesRegistered:T});await i(t.uid,l)}catch(e){}},[R,I,T]),canContinue=()=>{var e,r;const t=R.firstName&&R.lastName||R.providerRegistration.fullName&&R.providerRegistration.fullName.trim(),a=(null==(e=R.emails)?void 0:e.some(e=>(e.address||"").trim()))||(null==(r=R.phones)?void 0:r.some(e=>(e.number||"").trim()))||!!(R.providerRegistration.email||"").trim()||!!(R.providerRegistration.contactNumber||"").trim();return!!t&&!!a};return M?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:[r.jsx(ProfileVerification,{onVerificationComplete:()=>j("/"),className:"mb-8"}),r.jsx("div",{className:"max-w-4xl mx-auto px-6",children:r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>j("/"),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Skip for Now & Continue to Dashboard"})})})]}):r.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Create Your Profile"}),r.jsx(TierSelector,{}),r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsx("legend",{className:"font-semibold px-2",children:"Quick Sync Setup"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Your role"}),r.jsxs("select",{className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600",value:I,onChange:e=>A(e.target.value),children:[r.jsx("option",{children:"Generic User"}),r.jsx("option",{children:"Parent/Guardian"}),r.jsx("option",{children:"Driver"}),r.jsx("option",{children:"Passenger"}),r.jsx("option",{children:"Service Provider"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Upload contact card (.vcf)"}),r.jsx("input",{type:"file",accept:".vcf,text/vcard",onChange:J})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Google Sign-In"}),r.jsx("button",{type:"button",onClick:$,className:"px-3 py-2 rounded bg-red-600 text-white",children:"Sign in with Google"})]})]})]}),r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsx("legend",{className:"font-semibold px-2",children:"Safe Delivery & Emergency Services"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsx("button",{className:"btn btn-outline",children:"Request Delivery"}),r.jsx("button",{className:"btn btn-outline",children:"Track Delivery"}),r.jsx("button",{className:"btn btn-outline",children:"My Deliveries"}),r.jsx("button",{className:"btn btn-outline",children:"Verified Providers"}),r.jsx("button",{className:"btn btn-outline",children:"Emergency"})]})]}),r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsx("legend",{className:"font-semibold px-2",children:"Register for Services"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Ride Sharing","Delivery","Home Services","Property","Event Safety","Follow-me Home","Event hosting"].map(e=>r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:T.includes(e.toLowerCase().replace(" ","-")),onChange:()=>{const r=e.toLowerCase().replace(" ","-");E(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])}})," ",e]},e))})]}),r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsx("legend",{className:"font-semibold px-2",children:"Become a Delivery Service Provider"}),r.jsx("p",{className:"mb-2",children:"Join our trusted network of delivery providers. Complete your registration and trust verification to start serving customers."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("select",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",value:R.providerRegistration.providerType,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,providerType:e.target.value}})),children:[r.jsx("option",{value:"Individual",children:"Individual"}),r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Organization",children:"Organization"})]}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Business Name (if applicable)",value:R.providerRegistration.businessName,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,businessName:e.target.value}}))}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Full Name",value:R.providerRegistration.fullName,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,fullName:e.target.value}}))}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Contact Number",value:R.providerRegistration.contactNumber,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,contactNumber:e.target.value}}))}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Email Address",value:R.providerRegistration.email,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,email:e.target.value}}))})]}),r.jsx("div",{className:"mb-2 font-semibold",children:"Services Offered"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:["Ride Sharing","Food Delivery","Package Delivery","Document Delivery","Groceries","Electronics","Clothing","Same-day Delivery","Express Delivery","Event hosting","Other"].map(e=>r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:R.providerRegistration.servicesOffered.includes(e),onChange:()=>{return r=e,void S(e=>{const t=e.providerRegistration.servicesOffered,a=t.includes(r)?t.filter(e=>e!==r):[...t,r];return{...e,providerRegistration:{...e.providerRegistration,servicesOffered:a}}});var r}})," ",e]},e))}),r.jsx("div",{className:"mb-2 font-semibold",children:"Coverage Areas"}),r.jsx(InternationalAddressForm,{onAddressSubmit:e=>{const r={id:Date.now().toString(),...e,areaNotes:e.areaNotes||"",lat:e.lat||null,lng:e.lng||null};S(e=>({...e,providerRegistration:{...e.providerRegistration,coverageAreas:[...e.providerRegistration.coverageAreas,r]}}))},submitButtonText:"Add Coverage Area",title:""}),R.providerRegistration.coverageAreas.length>0&&r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Added Coverage Areas"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:R.providerRegistration.coverageAreas.map(e=>r.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.country," • ",e.city,e.areaNotes?` • ${e.areaNotes}`:"",e.lat&&e.lng?` • (${e.lat.toFixed?e.lat.toFixed(4):e.lat}, ${e.lng.toFixed?e.lng.toFixed(4):e.lng})`:"",r.jsx("button",{type:"button",className:"ml-1 text-red-600",onClick:()=>removeCoverageArea(e.id),title:"Remove",children:"×"})]},e.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Base Delivery Fee (R)",value:R.providerRegistration.pricing.base,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,pricing:{...r.providerRegistration.pricing,base:e.target.value}}}))}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Per Km Rate (R)",value:R.providerRegistration.pricing.perKm,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,pricing:{...r.providerRegistration.pricing,perKm:e.target.value}}}))}),r.jsx("input",{className:"p-2 rounded border dark:bg-gray-700 dark:border-gray-600",placeholder:"Express Surcharge (R)",value:R.providerRegistration.pricing.express,onChange:e=>S(r=>({...r,providerRegistration:{...r.providerRegistration,pricing:{...r.providerRegistration.pricing,express:e.target.value}}}))})]}),r.jsx("div",{className:"mb-2 font-semibold",children:"Trust Verification Setup"}),r.jsxs("div",{className:"mb-2",children:["Initial Trust Level: ",r.jsx("b",{children:"Individual (0% - Start with personal verification)"})]}),r.jsxs("ul",{className:"list-disc pl-6 text-sm mb-2",children:[r.jsx("li",{children:"Individual (0%): Basic ID and contact verification"}),r.jsx("li",{children:"Household (25%): Family member endorsements + 10 completed deliveries"}),r.jsx("li",{children:"Street (50%): 5+ neighbor verifications + 50 deliveries + 4.5+ rating"}),r.jsx("li",{children:"Community (75%): Local business endorsements + 200 deliveries + 4.7+ rating"}),r.jsx("li",{children:"Fully Verified (100%): Ecosystem integration + 500 deliveries + 4.8+ rating"})]})]}),r.jsxs("fieldset",{className:"border p-4 rounded-lg mb-6",children:[r.jsx("legend",{className:"font-semibold px-2",children:"LifeCV Import / Export"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-2 font-medium",children:"Export LifeCV JSON"}),r.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-700 text-white",onClick:()=>{const e=s({...R,servicesRegistered:T,role:I,owner:p.owner}),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(r),a=document.createElement("a");a.href=t,a.download="lifecv-profile.json",a.click(),URL.revokeObjectURL(t)},children:"Download JSON"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"mb-2 font-medium",children:"Import from JSON file"}),r.jsx("input",{type:"file",accept:"application/json,.json",onChange:async e=>{var r;const t=null==(r=e.target.files)?void 0:r[0];if(t)try{const e=await t.text(),r=JSON.parse(e),a=l(r);S(e=>({...e,...a}))}catch(a){}}})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"mb-2 font-medium",children:"Paste resume JSON (from AI assistant)"}),r.jsx("textarea",{className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600",rows:6,value:P,onChange:e=>D(e.target.value),placeholder:"Paste JSON here..."}),L&&r.jsx("div",{className:"text-sm text-red-600 mt-1",children:L}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-primary-600 text-white",onClick:()=>{var e;try{const r=n(P);if(null==(e=r.basic)?void 0:e.fullName){const e=r.basic.fullName.split(" ");S(t=>({...t,firstName:e[0]||t.firstName,lastName:e.slice(1).join(" ")||t.lastName,providerRegistration:{...t.providerRegistration,email:r.basic.email||t.providerRegistration.email,contactNumber:r.basic.phone||t.providerRegistration.contactNumber}}))}F("")}catch(r){F("Invalid JSON. Please verify.")}},children:"Apply"}),r.jsx("button",{type:"button",className:"px-3 py-2 rounded border dark:border-gray-600",onClick:()=>D(""),children:"Clear"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Tip: Copy your CV text and ask an AI assistant to convert it into a structured JSON suitable for LifeCV upload."})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(v,{className:"h-5 w-5 text-primary-600 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"Location consent"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"We need your GPS to enable Follow Me Home, Incident Reporting, and Emergency Assistance."}),r.jsx("div",{className:"flex items-center gap-3 mt-3",children:r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:R.consentGPS,onChange:e=>S(r=>({...r,consentGPS:e.target.checked}))}),"I agree to share my location while using safety features"]})}),U&&r.jsx("div",{className:"mt-2 text-sm text-red-600",children:U}),R.gpsCoordinates&&r.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["GPS: ",(null==(u=R.gpsCoordinates.lat)?void 0:u.toFixed)?R.gpsCoordinates.lat.toFixed(5):R.gpsCoordinates.lat,", ",(null==(x=R.gpsCoordinates.lng)?void 0:x.toFixed)?R.gpsCoordinates.lng.toFixed(5):R.gpsCoordinates.lng," (±",Math.round(R.gpsCoordinates.accuracy),"m)"]})]})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>j("/"),className:"px-6 py-2 rounded-lg border dark:border-gray-600",children:"Cancel"}),r.jsx("button",{disabled:!canContinue(),onClick:async()=>{var e,r,t,l,n,o,d;try{const c=(null==(r=null==(e=R.emails)?void 0:e.find(e=>(e.address||"").trim()))?void 0:r.address)||R.providerRegistration.email,m=(null==(l=null==(t=R.phones)?void 0:t.find(e=>(e.number||"").trim()))?void 0:l.number)||R.providerRegistration.contactNumber,g=R.firstName&&R.lastName?`${R.firstName} ${R.lastName}`.trim():(R.providerRegistration.fullName||"").trim(),u={...R,fullName:g,email:c||"",phone:m||""};await k.users.put({userId:"guest",profile:u,servicesRegistered:T,role:I});const x=(null==(o=null==(n=a)?void 0:n.currentUser)?void 0:o.uid)||(null==(d=null==p?void 0:p.owner)?void 0:d.uid);if(x){const e=s({...u,owner:{uid:x,source:"lifesync"},geofences:p.geofences,checkIns:p.checkIns,role:I,servicesRegistered:T,deviceType:R.deviceType});await i(x,e)}}catch(c){}b(e=>{var r,t,a,s;return{...e,profile:{...R,fullName:R.firstName&&R.lastName?`${R.firstName} ${R.lastName}`.trim():(R.providerRegistration.fullName||"").trim(),email:(null==(t=null==(r=R.emails)?void 0:r.find(e=>(e.address||"").trim()))?void 0:t.address)||R.providerRegistration.email||"",phone:(null==(s=null==(a=R.phones)?void 0:a.find(e=>(e.number||"").trim()))?void 0:s.number)||R.providerRegistration.contactNumber||""},servicesRegistered:T,role:I,deviceType:R.deviceType}}),O(!0)},className:"px-6 py-2 rounded-lg bg-primary-600 text-white font-semibold "+(canContinue()?"hover:bg-primary-700":"opacity-50 cursor-not-allowed"),children:"Save and Continue"}),"      "]})]})},Onboarding=()=>r.jsx(DeviceProvider,{children:r.jsx(OnboardingContent,{})});export{Onboarding as default};
