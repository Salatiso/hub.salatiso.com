import{G as e,c as a,j as l}from"./index-6c723d70.js";import{r as s}from"./vendor-d6555781.js";import{a as t,b as r,c as o}from"./layoutHelpers-b7eca1f0.js";import{u as i,x as n,X as c,aL as d,L as u}from"./ui-eef567c7.js";import"./firebase-fb364782.js";import"./i18n-8b62e3c8.js";function Profile(){var m,x,b;const{guestData:g,updateGuestData:p}=s.useContext(e),[h,f]=s.useState(!1),[N,v]=s.useState({firstName:(null==g?void 0:g.firstName)||"",lastName:(null==g?void 0:g.lastName)||"",email:(null==(m=a.currentUser)?void 0:m.email)||"",phone:(null==g?void 0:g.phone)||"",bio:(null==g?void 0:g.bio)||"",location:(null==g?void 0:g.location)||"",avatar:(null==g?void 0:g.avatar)||null}),[j,y]=s.useState(!1),[w,C]=s.useState(""),k=s.useCallback(e=>{const{name:a,value:l}=e.target;v(e=>({...e,[a]:l}))},[]),L=s.useCallback(e=>{var a;const l=null==(a=e.target.files)?void 0:a[0];if(l){const e=new FileReader;e.onload=e=>{v(a=>{var l;return{...a,avatar:null==(l=e.target)?void 0:l.result}})},e.readAsDataURL(l)}},[]),P=s.useCallback(async()=>{y(!0);try{p(e=>({...e,firstName:N.firstName,lastName:N.lastName,phone:N.phone,bio:N.bio,location:N.location,avatar:N.avatar})),C("Profile saved successfully!"),f(!1),setTimeout(()=>C(""),3e3)}catch(e){C("Error saving profile")}finally{y(!1)}},[N,p]),S=s.useCallback(async()=>{try{await a.signOut(),window.location.href="/"}catch(e){}},[]);return l.jsxs("div",{className:t({fullWidth:!1}),children:[l.jsxs("div",{className:r(),children:[l.jsx("h1",{className:o(),children:"Profile"}),!h&&l.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors","aria-label":"Edit profile",children:[l.jsx(i,{className:"w-4 h-4"}),"Edit Profile"]})]}),w&&l.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded-lg",children:w}),l.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center mb-4",children:N.avatar?l.jsx("img",{src:N.avatar,alt:"Profile",className:"w-full h-full object-cover"}):l.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-2xl font-bold",children:[null==(x=N.firstName)?void 0:x.charAt(0),null==(b=N.lastName)?void 0:b.charAt(0)]})}),h&&l.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 cursor-pointer transition-colors",children:[l.jsx(n,{className:"w-4 h-4"}),l.jsx("span",{children:"Upload Photo"}),l.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"hidden","aria-label":"Upload profile picture"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),h?l.jsx("input",{type:"text",name:"firstName",value:N.firstName,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"First name"}):l.jsx("p",{className:"px-3 py-2 text-gray-900",children:N.firstName||"Not set"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),h?l.jsx("input",{type:"text",name:"lastName",value:N.lastName,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Last name"}):l.jsx("p",{className:"px-3 py-2 text-gray-900",children:N.lastName||"Not set"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsx("p",{className:"px-3 py-2 text-gray-900 bg-gray-50 rounded-lg",children:N.email}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),h?l.jsx("input",{type:"tel",name:"phone",value:N.phone,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Phone number"}):l.jsx("p",{className:"px-3 py-2 text-gray-900",children:N.phone||"Not set"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),h?l.jsx("input",{type:"text",name:"location",value:N.location,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Location"}):l.jsx("p",{className:"px-3 py-2 text-gray-900",children:N.location||"Not set"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),h?l.jsx("textarea",{name:"bio",value:N.bio,onChange:k,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Bio",placeholder:"Tell us about yourself..."}):l.jsx("p",{className:"px-3 py-2 text-gray-900 whitespace-pre-wrap",children:N.bio||"Not set"})]}),h&&l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsxs("button",{onClick:()=>{var e;f(!1),v({firstName:(null==g?void 0:g.firstName)||"",lastName:(null==g?void 0:g.lastName)||"",email:(null==(e=a.currentUser)?void 0:e.email)||"",phone:(null==g?void 0:g.phone)||"",bio:(null==g?void 0:g.bio)||"",location:(null==g?void 0:g.location)||"",avatar:(null==g?void 0:g.avatar)||null})},className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors","aria-label":"Cancel editing",children:[l.jsx(c,{className:"w-4 h-4"}),"Cancel"]}),l.jsxs("button",{onClick:P,disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors","aria-label":"Save profile changes",children:[l.jsx(d,{className:"w-4 h-4"}),j?"Saving...":"Save Changes"]})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors w-full justify-center","aria-label":"Logout",children:[l.jsx(u,{className:"w-4 h-4"}),"Logout"]})})]})]})}export{Profile as default};
