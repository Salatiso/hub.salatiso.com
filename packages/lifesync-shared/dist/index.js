"use strict";var e=require("react"),t=require("lucide-react");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function r(e,t,a,r,n,l,i){try{var c=e[l](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise(function(n,l){var i=e.apply(t,a);function c(e){r(i,n,l,c,s,"next",e)}function s(e){r(i,n,l,c,s,"throw",e)}c(void 0)})}}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function i(e,t,a){return(t=f(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var s=r&&r.prototype instanceof c?r:c,o=Object.create(s.prototype);return m(o,"_invoke",function(a,r,n){var l,c,s,o=0,m=n||[],u=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,s=e,d.n=a,i}};function f(a,r){for(c=a,s=r,t=0;!u&&o&&!n&&t<m.length;t++){var n,l=m[t],f=d.p,g=l[2];a>3?(n=g===r)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<g&&(n=a<3||l[0]>r||r>g)&&(l[4]=a,l[5]=r,d.n=g,c=0))}if(n||a>1)return i;throw u=!0,r}return function(n,m,g){if(o>1)throw TypeError("Generator is already running");for(u&&1===m&&f(m,g),c=m,s=g;(t=c<2?e:s)||!u;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(o=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(u=d.n<0)?s:a.call(r,d))!==i)break}catch(t){l=e,c=1,s=t}finally{o=1}}return{value:t,done:u}}}(a,n,l),!0),o}var i={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(m(t={},r,function(){return this}),t),f=u.prototype=c.prototype=Object.create(d);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,m(e,n,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,m(f,"constructor",u),m(u,"constructor",s),s.displayName="GeneratorFunction",m(u,n,"GeneratorFunction"),m(f),m(f,n,"Generator"),m(f,r,function(){return this}),m(f,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:g}})()}function m(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}m=function(e,t,a,r){function l(t,a){m(e,t,function(e){return this._invoke(t,a,e)})}t?n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(l("next",0),l("throw",1),l("return",2))},m(e,t,a,r)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,i,c=[],s=!0,o=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(o)throw n}}return c}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}var p=e.createContext(),y=function(a){var r=a.onCapture,l=a.userType,i=void 0===l?"participant":l,c=a.className,s=void 0===c?"":c,m=a.context,d=void 0===m?"lifesync":m,f=u(e.useState(!1),2),g=f[0],b=f[1],p=u(e.useState(null),2),y=p[0],x=p[1],E=u(e.useState(!1),2),h=E[0],v=E[1],N=u(e.useState(null),2),w=N[0],k=N[1],S=u(e.useState(null),2),C=S[0],I=S[1],j=u(e.useState(!1),2),V=j[0],O=j[1],T=e.useRef(null),P=e.useRef(null),D=e.useRef(null),A=e.useCallback(n(o().m(function e(){var t,a;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,I(null),e.n=1,navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});case 1:t=e.v,T.current&&(T.current.srcObject=t,D.current=t,O(!0)),e.n=3;break;case 2:e.p=2,a=e.v,I("Camera access denied or unavailable"),console.error("Camera error:",a);case 3:return e.a(2)}},e,null,[[0,2]])})),[]),F=e.useCallback(function(){D.current&&(D.current.getTracks().forEach(function(e){return e.stop()}),D.current=null),T.current&&(T.current.srcObject=null),O(!1)},[]),R=e.useCallback(function(){if(T.current&&P.current){b(!0),I(null);var e=T.current,t=P.current,a=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,a.drawImage(e,0,0,t.width,t.height),t.toBlob(function(){var e=n(o().m(function e(t){var n;return o().w(function(e){for(;;)switch(e.n){case 0:t?(n=URL.createObjectURL(t),x(n),v(!0),setTimeout(function(){var e={isValid:!0,confidence:.92,livenessVerified:!0,faceDetected:!0};k(e),v(!1),b(!1),r&&r({imageBlob:t,imageUrl:n,validation:e,timestamp:(new Date).toISOString(),userType:i,context:a})},2e3)):(I("Failed to capture photo"),b(!1));case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),"image/jpeg",.8)}},[r,i,d]),_=e.useCallback(function(){x(null),k(null),I(null)},[]),L=e.useCallback(function(){F(),x(null),k(null),I(null),b(!1),v(!1)},[F]);return e.useEffect(function(){return function(){F()}},[F]),e.createElement("div",{className:"facial-recognition ".concat(s)},e.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto"},e.createElement("div",{className:"text-center mb-6"},e.createElement("div",{className:"flex items-center justify-center mb-3"},e.createElement(t.User,{className:"w-8 h-8 text-blue-600 mr-2"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900"},"Facial Verification")),e.createElement("p",{className:"text-sm text-gray-600"},"Please ensure good lighting and remove glasses/sunglasses")),!V&&!y&&e.createElement("div",{className:"text-center mb-6"},e.createElement("div",{className:"w-32 h-32 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},e.createElement(t.Camera,{className:"w-12 h-12 text-gray-400"})),e.createElement("button",{onClick:A,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors"},"Enable Camera")),V&&!y&&e.createElement("div",{className:"mb-6"},e.createElement("div",{className:"relative"},e.createElement("video",{ref:T,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg border-2 border-gray-200",style:{maxHeight:"300px"}}),e.createElement("canvas",{ref:P,className:"hidden"})),e.createElement("div",{className:"mt-4 flex justify-center"},e.createElement("button",{onClick:R,disabled:g,className:"bg-green-600 text-white px-8 py-3 rounded-full hover:bg-green-700 transition-colors disabled:opacity-50"},g?e.createElement("div",{className:"flex items-center"},e.createElement(t.RefreshCw,{className:"w-5 h-5 mr-2 animate-spin"}),"Capturing..."):e.createElement("div",{className:"flex items-center"},e.createElement(t.Camera,{className:"w-5 h-5 mr-2"}),"Take Photo")))),y&&e.createElement("div",{className:"mb-6"},e.createElement("div",{className:"relative"},e.createElement("img",{src:y,alt:"Captured",className:"w-full rounded-lg border-2 border-gray-200"}),w&&e.createElement("div",{className:"absolute top-2 right-2"},w.isValid?e.createElement(t.CheckCircle,{className:"w-8 h-8 text-green-500 bg-white rounded-full"}):e.createElement(t.XCircle,{className:"w-8 h-8 text-red-500 bg-white rounded-full"}))),h&&e.createElement("div",{className:"mt-4 text-center"},e.createElement("div",{className:"flex items-center justify-center mb-2"},e.createElement(t.RefreshCw,{className:"w-5 h-5 mr-2 animate-spin text-blue-600"}),e.createElement("span",{className:"text-blue-600"},"Validating...")),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},e.createElement("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}}))),w&&!h&&e.createElement("div",{className:"mt-4"},w.isValid?e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},e.createElement("div",{className:"flex items-center mb-2"},e.createElement(t.CheckCircle,{className:"w-5 h-5 text-green-600 mr-2"}),e.createElement("span",{className:"font-medium text-green-800"},"Verification Successful")),e.createElement("div",{className:"text-sm text-green-700"},e.createElement("p",null,"Face detected: ✓"),e.createElement("p",null,"Liveness verified: ✓"),e.createElement("p",null,"Confidence: ",(100*w.confidence).toFixed(1),"%"))):e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},e.createElement("div",{className:"flex items-center mb-2"},e.createElement(t.XCircle,{className:"w-5 h-5 text-red-600 mr-2"}),e.createElement("span",{className:"font-medium text-red-800"},"Verification Failed")),e.createElement("p",{className:"text-sm text-red-700"},"Please ensure your face is clearly visible and try again."))),e.createElement("div",{className:"mt-4 flex justify-center gap-3"},e.createElement("button",{onClick:_,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors"},"Retake"),e.createElement("button",{onClick:L,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Start Over"))),C&&e.createElement("div",{className:"mb-6"},e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},e.createElement("div",{className:"flex items-center"},e.createElement(t.AlertTriangle,{className:"w-5 h-5 text-red-600 mr-2"}),e.createElement("span",{className:"text-red-800 font-medium"},"Error")),e.createElement("p",{className:"text-red-700 mt-1"},C))),e.createElement("div",{className:"text-center text-sm text-gray-600"},e.createElement("p",{className:"mb-2"},e.createElement(t.Eye,{className:"w-4 h-4 inline mr-1"}),"Look directly at the camera"),e.createElement("p",null,"Ensure good lighting and remove obstructions"))))},x={},E=function(e,t,a,r){w(a)&&x[a]||(w(a)&&(x[a]=new Date),function(e,t,a,r){var n,l,i,c,o=[a,s({code:t},r||{})];if(null!=e&&null!==(n=e.services)&&void 0!==n&&null!==(n=n.logger)&&void 0!==n&&n.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);if(w(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),null!=e&&null!==(l=e.services)&&void 0!==l&&null!==(l=l.logger)&&void 0!==l&&l.warn)(c=e.services.logger).warn.apply(c,o);else if(null!==(i=console)&&void 0!==i&&i.warn){var m;(m=console).warn.apply(m,o)}}(e,t,a,r))},h=function(e,t){return function(){if(e.isInitialized)t();else{var a=function(){setTimeout(function(){e.off("initialized",a)},0),t()};e.on("initialized",a)}}},v=function(e,t,a){e.loadNamespaces(t,h(e,a))},N=function(e,t,a,r){if(w(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(t)>-1)return v(e,a,r);a.forEach(function(t){e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,h(e,r))},w=function(e){return"string"==typeof e},k=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,S={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},C=function(e){return S[e]},I={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(k,C)}},j=e.createContext(),V=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usedNamespaces={}},(t=[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach(function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])&&l(e.prototype,t),a&&l(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}(),O=function(e,t,a,r){return e.getFixedT(t,a,r)},T=function(t){var a,r,n,l,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=i.i18n,o=e.useContext(j)||{},m=o.i18n,d=o.defaultNS,f=c||m||void 0;if(f&&!f.reportNamespaces&&(f.reportNamespaces=new V),!f){E(f,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");var b=function(e,t){return w(t)?t:"object"===g(a=t)&&null!==a&&w(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var a},p=[b,{},!1];return p.t=b,p.i18n={},p.ready=!1,p}null!==(a=f.options.react)&&void 0!==a&&a.wait&&E(f,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var y=s(s(s({},I),f.options.react),i),x=y.useSuspense,h=y.keyPrefix,k=t||d||(null===(r=f.options)||void 0===r?void 0:r.defaultNS);k=w(k)?[k]:k||["translation"],null===(n=(l=f.reportNamespaces).addUsedNamespaces)||void 0===n||n.call(l,k);var S=(f.isInitialized||f.initializedStoreOnce)&&k.every(function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:a.lng,precheck:function(t,r){if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(E(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,f,y)}),C=function(t,a,r,n){return e.useCallback(O(t,a,r,n),[t,a,r,n])}(f,i.lng||null,"fallback"===y.nsMode?k:k[0],h),T=function(){return C},P=function(){return O(f,i.lng||null,"fallback"===y.nsMode?k:k[0],h)},D=u(e.useState(T),2),A=D[0],F=D[1],R=k.join();i.lng&&(R="".concat(i.lng).concat(R));var _,L,B,U=(_=R,B=e.useRef(),e.useEffect(function(){B.current=L?B.current:_},[_,L]),B.current),M=e.useRef(!0);e.useEffect(function(){var e=y.bindI18n,t=y.bindI18nStore;M.current=!0,S||x||(i.lng?N(f,i.lng,k,function(){M.current&&F(P)}):v(f,k,function(){M.current&&F(P)})),S&&U&&U!==R&&M.current&&F(P);var a=function(){M.current&&F(P)};return e&&(null==f||f.on(e,a)),t&&(null==f||f.store.on(t,a)),function(){M.current=!1,f&&e&&(null==e||e.split(" ").forEach(function(e){return f.off(e,a)})),t&&f&&t.split(" ").forEach(function(e){return f.store.off(e,a)})}},[f,R]),e.useEffect(function(){M.current&&S&&F(T)},[f,h,S]);var z=[A,f,S];if(z.t=A,z.i18n=f,z.ready=S,S)return z;if(!S&&!x)return z;throw new Promise(function(e){i.lng?N(f,i.lng,k,function(){return e()}):v(f,k,function(){return e()})})},P=function(a){var r=a.interactionId,n=a.participants,l=void 0===n?[]:n,c=a.onComplete,o=a.onSkip,m=a.context,d=void 0===m?"safety_sync":m;T().t;var f=u(e.useState(0),2),g=f[0],b=f[1],p=u(e.useState({}),2),x=p[0],E=p[1],h=u(e.useState(!1),2),v=h[0],N=h[1],w=u(e.useState(!1),2),k=w[0],S=w[1],C=[{id:"instructions",title:"Instructions & Consent"},{id:"participants",title:"Participant Verification"},{id:"capture",title:"Facial Capture"},{id:"review",title:"Review & Confirm"}],I=l[g-1];return k?e.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},e.createElement("div",{className:"text-center"},e.createElement(t.AlertTriangle,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Facial Verification Skipped"),e.createElement("p",{className:"text-gray-600 mb-6"},"You have chosen to skip facial verification. Some safety features may be limited."),e.createElement("button",{onClick:function(){return S(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Go Back"))):v?e.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},e.createElement("div",{className:"text-center"},e.createElement(t.CheckCircle,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Facial Verification Complete"),e.createElement("p",{className:"text-gray-600 mb-6"},"All participants have been verified. Your interaction is now secured with facial recognition."),e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},e.createElement("div",{className:"flex items-center justify-center mb-2"},e.createElement(t.Shield,{className:"w-5 h-5 text-green-600 mr-2"}),e.createElement("span",{className:"font-medium text-green-800"},"Enhanced Security Active")),e.createElement("p",{className:"text-sm text-green-700 text-center"},"Facial verification provides additional safety layer for dispute resolution")))):e.createElement("div",{className:"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto"},e.createElement("div",{className:"mb-8"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Facial Verification Process"),e.createElement("span",{className:"text-sm text-gray-500"},"Step ",g+1," of ",C.length)),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4"},e.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((g+1)/C.length*100,"%")}})),e.createElement("div",{className:"flex justify-between"},C.map(function(a,r){return e.createElement("div",{key:a.id,className:"flex flex-col items-center ".concat(r<=g?"text-blue-600":"text-gray-400")},e.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-1 ".concat(r<g||r===g?"bg-blue-600 text-white":"bg-gray-200 text-gray-400")},r<g?e.createElement(t.CheckCircle,{className:"w-4 h-4"}):r+1),e.createElement("span",{className:"text-xs text-center max-w-20"},a.title))}))),e.createElement("div",{className:"min-h-96"},0===g&&e.createElement("div",{className:"text-center"},e.createElement(t.Shield,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-4"},"Facial Verification for Enhanced Safety"),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},e.createElement("p",{className:"text-blue-800 mb-3"},"Facial recognition adds an extra layer of security to your interaction:"),e.createElement("ul",{className:"text-left text-blue-700 text-sm space-y-2"},e.createElement("li",null,"• Provides evidence for dispute resolution"),e.createElement("li",null,"• Verifies participant identities"),e.createElement("li",null,"• Enhances trust and accountability"),e.createElement("li",null,"• Works alongside existing safety features"))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},e.createElement("div",{className:"flex items-start"},e.createElement(t.AlertTriangle,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("div",{className:"text-left"},e.createElement("p",{className:"text-yellow-800 font-medium mb-1"},"Important Notes:"),e.createElement("ul",{className:"text-yellow-700 text-sm space-y-1"},e.createElement("li",null,"• Photos are encrypted and auto-deleted after 48 hours"),e.createElement("li",null,"• Facial recognition is optional but recommended"),e.createElement("li",null,"• You can skip this step if preferred"),e.createElement("li",null,"• Ensure good lighting for best results")))))),1===g&&e.createElement("div",null,e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center"},"Participants to Verify"),e.createElement("div",{className:"space-y-3"},l.map(function(a,r){return e.createElement("div",{key:a.id,className:"flex items-center justify-between p-4 rounded-lg border ".concat(x[a.id]?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200")},e.createElement("div",{className:"flex items-center"},e.createElement("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 ".concat(x[a.id]?"bg-green-500":"bg-gray-400")},x[a.id]?e.createElement(t.CheckCircle,{className:"w-6 h-6 text-white"}):e.createElement(t.Users,{className:"w-6 h-6 text-white"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},a.name),e.createElement("p",{className:"text-sm text-gray-600"},a.role))),x[a.id]&&e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-sm text-green-600 font-medium"},"Verified"),e.createElement("p",{className:"text-xs text-gray-500"},new Date(x[a.id].capturedAt).toLocaleTimeString())))})),e.createElement("div",{className:"mt-6 text-center text-sm text-gray-600"},e.createElement("p",null,Object.keys(x).length," of ",l.length," participants verified"))),2===g&&I&&e.createElement("div",null,e.createElement("div",{className:"text-center mb-6"},e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Verify ",I.name),e.createElement("p",{className:"text-gray-600"},I.role)),e.createElement(y,{onCapture:function(e){return t=I.id,a=e,void E(function(e){return s(s({},e),{},i({},t,s(s({},a),{},{capturedAt:(new Date).toISOString()})))});var t,a},userType:I.role.toLowerCase().replace(" ","_"),context:d})),3===g&&e.createElement("div",null,e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-6 text-center"},"Review Verification"),e.createElement("div",{className:"space-y-4 mb-6"},l.map(function(a){var r=x[a.id];return e.createElement("div",{key:a.id,className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},e.createElement("div",{className:"flex items-center"},e.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3 ".concat(r?"bg-green-500":"bg-red-500")},r?e.createElement(t.CheckCircle,{className:"w-4 h-4 text-white"}):e.createElement(t.AlertTriangle,{className:"w-4 h-4 text-white"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},a.name),e.createElement("p",{className:"text-sm text-gray-600"},a.role))),e.createElement("div",{className:"text-right"},r?e.createElement("div",null,e.createElement("p",{className:"text-sm text-green-600 font-medium"},"Verified"),e.createElement("p",{className:"text-xs text-gray-500"},new Date(r.capturedAt).toLocaleTimeString())):e.createElement("p",{className:"text-sm text-red-600 font-medium"},"Not Verified")))})),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},e.createElement("div",{className:"flex items-start"},e.createElement(t.Shield,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"text-blue-800 font-medium mb-1"},"Security Benefits:"),e.createElement("ul",{className:"text-blue-700 text-sm space-y-1"},e.createElement("li",null,"• Encrypted photo storage with auto-deletion"),e.createElement("li",null,"• Enhanced dispute resolution capabilities"),e.createElement("li",null,"• Additional trust layer for interactions"),e.createElement("li",null,"• Community validation support"))))))),e.createElement("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200"},e.createElement("button",{onClick:function(){g>0&&b(g-1)},disabled:0===g,className:"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Previous"),e.createElement("div",{className:"flex gap-3"},g<C.length-1?e.createElement("button",{onClick:function(){g<C.length-1&&b(g+1)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Next"):e.createElement("button",{onClick:function(){var e={interactionId:r,context:d,participants:l.map(function(e){return{id:e.id,name:e.name,role:e.role,facialLog:x[e.id]||null}}),completedAt:(new Date).toISOString(),totalParticipants:l.length,verifiedParticipants:Object.keys(x).length};N(!0),c(e)},disabled:0===Object.keys(x).length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Complete Verification"),e.createElement("button",{onClick:function(){S(!0),o({interactionId:r,context:d,reason:"user_skipped",skippedAt:(new Date).toISOString()})},className:"px-6 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"Skip"))))};exports.AUTHOR="Salatiso Ecosystem",exports.FacialRecognition=y,exports.FloatingToolbar=function(){T().t;var a=u(e.useState(!1),2),r=a[0],n=a[1],l=u(e.useState(!1),2),i=l[0],c=l[1],s=u(e.useState(""),2),o=s[0],m=s[1],d=u(e.useState(null),2),f=d[0],g=d[1],b=[{name:"ID Validator",icon:t.CreditCard,action:function(){return c(!0)},description:"Validate South African ID numbers"},{name:"Follow Me Home",icon:t.MapPin,path:"/follow-me-home",description:"Personal safety companion"},{name:"Instant Trust",icon:t.Shield,external:"https://lifesync-lifecv.web.app/instant-trust",description:"Quick trust verification"},{name:"SafetyHelp Hub",icon:t.Users,external:"https://safetyhelp-lifecv.web.app/",description:"Safety and emergency services"}],p=function(e){var t=e.replace(/\s+/g,"");if(13!==t.length||!/^\d+$/.test(t))return{validStructure:!1,errors:[{code:"INVALID_LENGTH",message:"ID number must be 13 digits"}]};var a=t.split(""),r=parseInt(a.slice(0,2).join(""),10),n=parseInt(a.slice(2,4).join(""),10),l=parseInt(a.slice(4,6).join(""),10),i=(new Date).getFullYear(),c=r<=i%100?2e3+r:1900+r,s=new Date(c,n-1,l);if(s.getFullYear()!==c||s.getMonth()!==n-1||s.getDate()!==l)return{validStructure:!1,errors:[{code:"INVALID_DOB",message:"Invalid date of birth"}]};var o=i-c;if(o<0||o>120)return{validStructure:!1,errors:[{code:"INVALID_DOB",message:"Implausible age"}]};var m=parseInt(a[10],10);if(0!==m&&1!==m)return{validStructure:!1,errors:[{code:"INVALID_CITIZENSHIP_DIGIT",message:"Invalid citizenship digit"}]};var u=function(e){for(var t=0,a=!1,r=e.length-1;r>=0;r--){var n=parseInt(e[r],10);a&&(n*=2)>9&&(n-=9),t+=n,a=!a}return t%10==0}(a.slice(0,12).join("")+a[12]),d=parseInt(a.slice(6,10).join(""),10)<5e3?"Female":"Male";return{validStructure:!0,checksumValid:u,dateOfBirth:"".concat(c,"-").concat(String(n).padStart(2,"0"),"-").concat(String(l).padStart(2,"0")),age:o,gender:d,citizenship:0===m?"South African":"Permanent resident",errors:[]}};return r?e.createElement("div",{className:"fixed bottom-4 right-4 z-50"},e.createElement("button",{onClick:function(){return n(!1)},className:"bg-primary-500 hover:bg-primary-600 text-white p-3 rounded-full shadow-lg transition-all duration-300"},e.createElement(t.ChevronUp,{className:"h-6 w-6"}))):e.createElement(e.Fragment,null,e.createElement("div",{className:"fixed bottom-4 right-4 z-50 bg-blue-500 dark:bg-blue-600 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-w-sm"},e.createElement("div",{className:"p-4"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("h3",{className:"text-lg font-semibold text-white"},"Quick Tools"),e.createElement("button",{onClick:function(){return n(!0)},className:"text-white hover:text-gray-200"},e.createElement(t.ChevronDown,{className:"h-5 w-5"}))),e.createElement("div",{className:"space-y-2"},b.map(function(a,r){return e.createElement("button",{key:r,onClick:function(){return function(e){e.action?e.action():e.external?window.open(e.external,"_blank"):e.path&&(window.location.href=e.path)}(a)},className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-400 transition-colors text-left"},e.createElement(a.icon,{className:"h-5 w-5 text-white flex-shrink-0"}),e.createElement("div",null,e.createElement("div",{className:"text-sm font-medium text-white"},a.name),e.createElement("div",{className:"text-xs text-gray-200"},a.description)),a.external&&e.createElement(t.ExternalLink,{className:"h-4 w-4 text-white"}))})))),i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},e.createElement("div",{className:"p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white"},"ID Number Validator"),e.createElement("button",{onClick:function(){c(!1),m(""),g(null)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},e.createElement(t.X,{className:"h-6 w-6"}))),e.createElement("div",{className:"mb-4"},e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2"},"Enter a South African ID number for structural validation. This checks format, date plausibility, and checksum but does not verify against official records."),e.createElement("input",{type:"text",value:o,onChange:function(e){return m(e.target.value)},placeholder:"e.g., 8001015009087",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",maxLength:13})),e.createElement("button",{onClick:function(){var e=p(o);g(e)},disabled:!o.trim(),className:"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"},"Validate ID"),f&&e.createElement("div",{className:"mt-4 p-4 rounded-lg border"},f.validStructure?e.createElement("div",{className:"text-green-600 dark:text-green-400"},e.createElement("div",{className:"font-semibold mb-2"},"✓ Structurally Valid"),e.createElement("div",{className:"text-sm space-y-1"},e.createElement("div",null,"Date of Birth: ",f.dateOfBirth),e.createElement("div",null,"Age: ",f.age),e.createElement("div",null,"Gender: ",f.gender),e.createElement("div",null,"Citizenship: ",f.citizenship),e.createElement("div",null,"Checksum: ",f.checksumValid?"Valid":"Invalid")),e.createElement("div",{className:"text-xs mt-2 text-gray-600 dark:text-gray-400"},"This does not confirm the ID is issued by Home Affairs. For official verification, contact the relevant authorities.")):e.createElement("div",{className:"text-red-600 dark:text-red-400"},e.createElement("div",{className:"font-semibold mb-2"},"✗ Invalid Structure"),e.createElement("ul",{className:"text-sm list-disc list-inside"},f.errors.map(function(t,a){return e.createElement("li",{key:a},t.message)}))))))))},exports.GuestContext=p,exports.HOMEPAGE="https://lifesync-lifecv.web.app",exports.IDVerification=function(a){var r,n=a.onVerificationComplete,l=a.context,i=void 0===l?"general":l,c=a.requireFacial,o=void 0===c||c,m=a.requireNationality,f=void 0!==m&&m,g=a.className,b=void 0===g?"":g,x=e.useContext(p),E=x.guestData,h=x.setGuestData,v=u(e.useState(1),2),N=v[0],w=v[1],k=u(e.useState(!1),2),S=k[0],C=k[1],I=u(e.useState({idNumber:"",idType:"south-african",nationality:"",workPermit:"",facialVerified:!1,idVerified:!1,nationalityConfirmed:!1}),2),j=I[0],V=I[1],O=u(e.useState(null),2),T=O[0],P=O[1],D=u(e.useState(!1),2),A=D[0],F=D[1],R=function(){var e=0;return j.idVerified&&(e+=40),j.facialVerified&&(e+=35),j.nationalityConfirmed&&(e+=25),Math.min(e,100)};return e.createElement("div",{className:"max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 ".concat(b)},e.createElement("div",{className:"text-center mb-6"},e.createElement(t.Shield,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"Identity Verification"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 mt-2"},"Complete verification to enhance trust and safety")),e.createElement("div",{className:"flex items-center justify-center mb-8"},[1,2,3,4].map(function(t){return e.createElement("div",{key:t,className:"flex items-center"},e.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(N>=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-600")},t),t<4&&e.createElement("div",{className:"w-12 h-0.5 mx-2 ".concat(N>t?"bg-blue-600":"bg-gray-200")}))})),1===N&&e.createElement("div",{className:"space-y-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ID Type"),e.createElement("select",{value:j.idType,onChange:function(e){return V(function(t){return s(s({},t),{},{idType:e.target.value})})},className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[{value:"south-african",label:"South African ID"},{value:"passport",label:"Passport"},{value:"drivers-license",label:"Driver's License"},{value:"work-permit",label:"Work Permit"}].map(function(t){return e.createElement("option",{key:t.value,value:t.value},t.label)}))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ID Number"),e.createElement("input",{type:"text",value:j.idNumber,onChange:function(e){return V(function(t){return s(s({},t),{},{idNumber:e.target.value})})},placeholder:"south-african"===j.idType?"e.g., 8001015009087":"Enter ID number",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",maxLength:"south-african"===j.idType?13:20})),e.createElement("button",{onClick:function(){C(!0),setTimeout(function(){if("south-african"===j.idType){var e=function(e){if(!/^\d{13}$/.test(e))return{valid:!1,errors:[{message:"ID must be exactly 13 digits"}]};var t=parseInt(e.substring(0,2)),a=parseInt(e.substring(2,4)),r=parseInt(e.substring(4,6)),n=parseInt(e.substring(6,10))<5e3?"Female":"Male",l=0===parseInt(e.substring(10,11))?"South African":"Permanent Resident",i=t>(new Date).getFullYear()%100?1900+t:2e3+t;if(a<1||a>12)return{valid:!1,errors:[{message:"Invalid birth month"}]};if(r<1||r>31)return{valid:!1,errors:[{message:"Invalid birth day"}]};for(var c=0,s=0;s<12;s++){var o=parseInt(e[s]);s%2==0&&(o*=2)>9&&(o-=9),c+=o}var m=(10-c%10)%10===parseInt(e[12]),u=(new Date).getFullYear()-i;return{valid:m,dateOfBirth:"".concat(r.toString().padStart(2,"0"),"/").concat(a.toString().padStart(2,"0"),"/").concat(i),age:u,gender:n,citizenship:l,checksumValid:m}}(j.idNumber);P(e),e.valid&&(V(function(e){return s(s({},e),{},{idVerified:!0})}),w(2))}else{var t={valid:j.idNumber.length>=5,message:j.idNumber.length>=5?"ID format accepted":"ID too short"};P(t),t.valid&&(V(function(e){return s(s({},e),{},{idVerified:!0})}),w(2))}C(!1)},1500)},disabled:!j.idNumber.trim()||S,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"},S?"Validating...":"Validate ID"),T&&e.createElement("div",{className:"mt-4 p-4 rounded-lg border"},T.valid?e.createElement("div",{className:"text-green-600 dark:text-green-400"},e.createElement(t.CheckCircle,{className:"w-5 h-5 inline mr-2"}),e.createElement("span",{className:"font-semibold"},"ID Validated Successfully"),T.dateOfBirth&&e.createElement("div",{className:"text-sm mt-2 space-y-1"},e.createElement("div",null,"DOB: ",T.dateOfBirth),e.createElement("div",null,"Age: ",T.age),e.createElement("div",null,"Gender: ",T.gender))):e.createElement("div",{className:"text-red-600 dark:text-red-400"},e.createElement(t.AlertTriangle,{className:"w-5 h-5 inline mr-2"}),e.createElement("span",{className:"font-semibold"},"Validation Failed"),e.createElement("ul",{className:"text-sm mt-2 list-disc list-inside"},null===(r=T.errors)||void 0===r?void 0:r.map(function(t,a){return e.createElement("li",{key:a},t.message)}))))),2===N&&o&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"text-center"},e.createElement(t.Camera,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Facial Verification"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Take a photo to verify your identity")),A?e.createElement(y,{onCapture:function(e){V(function(e){return s(s({},e),{},{facialVerified:!0})}),F(!1),w(f?3:4)},userType:"verifier",context:i}):e.createElement("button",{onClick:function(){return F(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors"},"Start Facial Verification")),3===N&&f&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"text-center"},e.createElement(t.Globe,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Nationality & Work Status"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Confirm your nationality and work authorization")),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Nationality"),e.createElement("select",{value:j.nationality,onChange:function(e){return V(function(t){return s(s({},t),{},{nationality:e.target.value})})},className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},e.createElement("option",{value:""},"Select nationality"),["South African","Zimbabwean","Mozambican","Botswanan","Namibian","Lesotho","Swazi","Malawian","Zambian","Angolan","Other"].map(function(t){return e.createElement("option",{key:t,value:t},t)}))),j.nationality&&"South African"!==j.nationality&&e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Work Permit Number"),e.createElement("input",{type:"text",value:j.workPermit,onChange:function(e){return V(function(t){return s(s({},t),{},{workPermit:e.target.value})})},placeholder:"Enter work permit number",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Required for non-South African citizens working in South Africa")),e.createElement("button",{onClick:function(){j.nationality&&("South African"===j.nationality||j.workPermit)&&(V(function(e){return s(s({},e),{},{nationalityConfirmed:!0})}),w(4))},disabled:!j.nationality||"South African"!==j.nationality&&!j.workPermit,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors"},"Confirm Nationality")),4===N&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"text-center"},e.createElement(t.CheckCircle,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Verification Complete"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Your identity has been verified successfully")),e.createElement("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},e.createElement("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2"},"Verification Summary"),e.createElement("div",{className:"space-y-2 text-sm"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"ID Verification:"),e.createElement("span",{className:j.idVerified?"text-green-600":"text-red-600"},j.idVerified?"✓ Verified":"✗ Not Verified")),o&&e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"Facial Verification:"),e.createElement("span",{className:j.facialVerified?"text-green-600":"text-red-600"},j.facialVerified?"✓ Verified":"✗ Not Verified")),f&&e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"Nationality Confirmed:"),e.createElement("span",{className:j.nationalityConfirmed?"text-green-600":"text-red-600"},j.nationalityConfirmed?"✓ Confirmed":"✗ Not Confirmed")),e.createElement("div",{className:"flex justify-between font-semibold"},e.createElement("span",null,"Trust Score:"),e.createElement("span",{className:"text-blue-600"},R(),"%")))),e.createElement("button",{onClick:function(){var e=s(s({},j),{},{verifiedAt:Date.now(),context:i,trustScore:R()}),t=s(s({},E),{},{verifications:[].concat(d(E.verifications||[]),[e]),trustScore:Math.max(E.trustScore||0,e.trustScore)});h(t),n&&n(e)},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors"},"Complete Verification")))},exports.SafetyInteractionFlow=function(a){var r=a.interactionType,n=void 0===r?"follow_me_home":r,l=a.participants,i=void 0===l?[]:l,c=a.onComplete,s=a.onCancel,o=a.className,m=void 0===o?"":o;T().t;var d=u(e.useState("consent"),2),f=d[0],g=d[1],b=u(e.useState(null),2),p=b[0],y=b[1],x=u(e.useState(!1),2),E=x[0],h=x[1],v={consent:{title:"Safety Enhancement Consent",icon:t.Shield},facial_setup:{title:"Facial Verification Setup",icon:t.Users},verification:{title:"Participant Verification",icon:t.CheckCircle},complete:{title:"Safety Enhanced",icon:t.Shield}},N=function(){switch(n){case"follow_me_home":return"Follow Me Home Safety Enhancement";case"emergency_sync":return"Emergency Response Coordination";case"community_meeting":return"Community Safety Meeting";case"transport_sync":return"Transport Safety Coordination";default:return"Safety Interaction Enhancement"}};return E?e.createElement("div",{className:"safety-flow-completed bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto ".concat(m)},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"mb-6"},null!=p&&p.facialVerification?e.createElement(t.CheckCircle,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}):e.createElement(t.AlertTriangle,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},null!=p&&p.facialVerification?"Safety Enhanced":"Basic Safety Active"),e.createElement("p",{className:"text-gray-600"},null!=p&&p.facialVerification?"Facial verification has been completed. Your interaction is now secured with enhanced safety features.":"Basic safety features are active. Facial verification was skipped.")),(null==p?void 0:p.facialVerification)&&e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},e.createElement("h3",{className:"font-medium text-green-800 mb-2"},"Verification Summary:"),e.createElement("div",{className:"text-sm text-green-700 space-y-1"},e.createElement("p",null,"• ",p.verifiedParticipants," of ",p.totalParticipants," participants verified"),e.createElement("p",null,"• Facial recognition data encrypted and stored securely"),e.createElement("p",null,"• Auto-deletion scheduled for 48 hours"),e.createElement("p",null,"• Enhanced dispute resolution capabilities activated"))),e.createElement("div",{className:"flex justify-center gap-4"},e.createElement("button",{onClick:function(){return window.location.reload()},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Continue to ",N())))):e.createElement("div",{className:"safety-interaction-flow bg-white rounded-lg shadow-lg ".concat(m)},e.createElement("div",{className:"p-6 border-b border-gray-200"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},N()),e.createElement("p",{className:"text-gray-600 mt-1"},"Enhance safety with optional facial verification")),e.createElement("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},"✕")),e.createElement("div",{className:"mt-6"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("span",{className:"text-sm font-medium text-gray-700"},"Setup Progress"),e.createElement("span",{className:"text-sm text-gray-500"},Object.keys(v).indexOf(f)+1," of ",Object.keys(v).length)),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},e.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((Object.keys(v).indexOf(f)+1)/Object.keys(v).length*100,"%")}})))),e.createElement("div",{className:"p-6"},"consent"===f&&e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"text-center mb-8"},e.createElement(t.Shield,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Enhance Your Safety"),e.createElement("p",{className:"text-gray-600"},"Add facial verification for additional security and trust in your interactions.")),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6"},e.createElement("h3",{className:"font-medium text-blue-900 mb-3"},"What Facial Verification Provides:"),e.createElement("ul",{className:"text-blue-800 space-y-2"},e.createElement("li",{className:"flex items-start"},e.createElement(t.CheckCircle,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("span",null,"Additional evidence for dispute resolution")),e.createElement("li",{className:"flex items-start"},e.createElement(t.CheckCircle,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("span",null,"Enhanced participant verification")),e.createElement("li",{className:"flex items-start"},e.createElement(t.CheckCircle,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("span",null,"Stronger trust and accountability")),e.createElement("li",{className:"flex items-start"},e.createElement(t.CheckCircle,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("span",null,"Complements existing safety features")))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},e.createElement("div",{className:"flex items-start"},e.createElement(t.AlertTriangle,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),e.createElement("div",null,e.createElement("h4",{className:"font-medium text-yellow-900 mb-1"},"Privacy & Security:"),e.createElement("ul",{className:"text-yellow-800 text-sm space-y-1"},e.createElement("li",null,"• Photos are encrypted and stored securely"),e.createElement("li",null,"• Auto-deletion after 48 hours"),e.createElement("li",null,"• Only used for verification purposes"),e.createElement("li",null,"• POPIA compliant data handling"))))),e.createElement("div",{className:"text-center"},e.createElement("p",{className:"text-gray-600 mb-6"},"Facial verification is ",e.createElement("strong",null,"optional")," but recommended for enhanced safety."))),"facial_setup"===f&&e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"text-center mb-8"},e.createElement(t.Users,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Participant Verification"),e.createElement("p",{className:"text-gray-600"},"Verify all participants for enhanced safety and trust.")),e.createElement(P,{interactionId:"safety_".concat(Date.now()),participants:i,onComplete:function(e){y(e),g("complete"),h(!0),c&&c({interactionType:n,facialVerification:e,safetyEnhanced:!0,timestamp:(new Date).toISOString(),participants:e.participants})},onSkip:function(e){y(e),g("complete"),h(!0),c&&c({interactionType:n,facialVerification:null,safetyEnhanced:!1,skipped:!0,timestamp:(new Date).toISOString(),participants:i})},context:n}))),"consent"===f&&e.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg"},e.createElement("div",{className:"flex justify-end gap-3"},e.createElement("button",{onClick:s,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"Skip Enhancement"),e.createElement("button",{onClick:function(){g("facial_setup")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Enhance Safety"))))},exports.TermsOfReciprocityModal=function(a){var r=a.isOpen,n=a.onClose,l=a.onAccept,c=a.onDecline;T().t;var o=u(e.useState(!1),2),m=o[0],d=o[1],f=u(e.useState(!1),2),g=f[0],b=f[1],p=u(e.useState({}),2),y=p[0],x=p[1],E=function(e){x(function(t){return s(s({},t),{},i({},e,!t[e]))})};return r?e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"},e.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col"},e.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg"},e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-bold"},"Terms of Reciprocity"),e.createElement("p",{className:"text-blue-100 mt-1"},"Salatiso Ecosystem - Building Trust Through Mutual Benefit")),e.createElement("button",{onClick:n,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors"},e.createElement(t.X,{className:"w-6 h-6"}))),e.createElement("div",{className:"flex-1 overflow-hidden flex flex-col"},e.createElement("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200"},e.createElement("div",{className:"flex items-center justify-between text-sm text-gray-600"},e.createElement("span",null,"Please read all terms carefully"),e.createElement("span",{className:"font-medium ".concat(m?"text-green-600":"text-orange-600")},m?"✓ Fully Read":"Scroll to continue"))),e.createElement("div",{className:"flex-1 overflow-y-auto px-6 py-4",onScroll:function(e){var t=e.target,a=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;d(a+n>=r-10)},style:{maxHeight:"60vh"}},e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500"},e.createElement("h3",{className:"text-lg font-semibold text-blue-900 mb-2"},"Welcome to the Salatiso Ecosystem"),e.createElement("p",{className:"text-blue-800"},"The Salatiso Ecosystem is built on principles of mutual benefit, trust, and reciprocity. By participating, you agree to contribute positively to the community while benefiting from the collective strength of our network.")),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("trust")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"1. Trust & Safety Principles"),y.trust?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.trust&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Trust is the foundation of our ecosystem. All participants must:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Maintain honest and transparent communication"),e.createElement("li",null,"Respect the privacy and dignity of all members"),e.createElement("li",null,"Report suspicious activities promptly"),e.createElement("li",null,"Contribute positively to community safety"),e.createElement("li",null,"Use verification systems appropriately")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("reciprocity")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"2. Principle of Reciprocity"),y.reciprocity?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.reciprocity&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Reciprocity means mutual benefit and responsibility:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Benefits received should be balanced with contributions made"),e.createElement("li",null,"Support fellow community members in times of need"),e.createElement("li",null,"Share knowledge and resources appropriately"),e.createElement("li",null,"Participate in community governance"),e.createElement("li",null,"Maintain positive community standing")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("data")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"3. Data Privacy & Protection"),y.data?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.data&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Your privacy is protected under POPIA and our community standards:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Data is encrypted and securely stored"),e.createElement("li",null,"Information is only shared with explicit consent"),e.createElement("li",null,"You control your privacy settings"),e.createElement("li",null,"Regular security audits ensure protection"),e.createElement("li",null,"Data is automatically deleted when no longer needed")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("safety")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"4. Safety & Emergency Protocols"),y.safety?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.safety&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Safety is our highest priority:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Emergency contacts are verified and secure"),e.createElement("li",null,"Location sharing is opt-in and time-limited"),e.createElement("li",null,"Safety features work offline when possible"),e.createElement("li",null,"Community validation enhances security"),e.createElement("li",null,"Regular safety drills and training")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("verification")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"5. Identity Verification & Trust Building"),y.verification?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.verification&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Building trust through verification:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"ID validation uses secure, private methods"),e.createElement("li",null,"Trust scores are community-validated"),e.createElement("li",null,"Verification enhances but doesn't guarantee trust"),e.createElement("li",null,"Appeals process for verification disputes"),e.createElement("li",null,"Regular trust score recalibration")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("community")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"6. Community Participation"),y.community?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.community&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Active participation strengthens our community:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Vote in community governance decisions"),e.createElement("li",null,"Participate in safety and trust validations"),e.createElement("li",null,"Contribute to community knowledge base"),e.createElement("li",null,"Support fellow members when possible"),e.createElement("li",null,"Provide constructive feedback")))),e.createElement("div",{className:"border border-gray-200 rounded-lg"},e.createElement("button",{onClick:function(){return E("liability")},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"},e.createElement("span",{className:"font-medium text-gray-900"},"7. Liability & Dispute Resolution"),y.liability?e.createElement(t.ChevronUp,{className:"w-5 h-5"}):e.createElement(t.ChevronDown,{className:"w-5 h-5"})),y.liability&&e.createElement("div",{className:"px-4 pb-4 text-gray-700"},e.createElement("p",{className:"mb-3"},"Understanding responsibilities and recourse:"),e.createElement("ul",{className:"list-disc list-inside space-y-2 ml-4"},e.createElement("li",null,"Community arbitration for disputes"),e.createElement("li",null,"Escalation to formal mediation when needed"),e.createElement("li",null,"Clear liability boundaries for all parties"),e.createElement("li",null,"Insurance coverage for verified activities"),e.createElement("li",null,"Regular review of dispute resolution processes"))))),e.createElement("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500"},e.createElement("h4",{className:"text-lg font-semibold text-yellow-900 mb-2"},"Important Notice"),e.createElement("p",{className:"text-yellow-800 text-sm"},"These terms create a binding agreement between you and the Salatiso Ecosystem. By accepting, you agree to abide by our community standards and contribute positively to the mutual benefit of all members. Violation of these terms may result in temporary or permanent suspension from the ecosystem."))))),e.createElement("div",{className:"border-t border-gray-200 p-6 bg-gray-50 rounded-b-lg"},e.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4"},e.createElement("div",{className:"flex items-center"},e.createElement("input",{type:"checkbox",id:"acceptTerms",checked:g,onChange:function(e){return b(e.target.checked)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.createElement("label",{htmlFor:"acceptTerms",className:"ml-2 text-sm text-gray-700"},"I have read and agree to the Terms of Reciprocity")),e.createElement("div",{className:"flex gap-3"},e.createElement("button",{onClick:c,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"Decline"),e.createElement("button",{onClick:function(){m&&g&&l()},disabled:!m||!g,className:"px-6 py-2 rounded-lg transition-colors ".concat(m&&g?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")},"Accept Terms"))),e.createElement("div",{className:"mt-4 text-center"},e.createElement("p",{className:"text-xs text-gray-500"},!m&&"Please scroll to the bottom to continue",m&&!g&&"Please check the acceptance box to continue",m&&g&&"Ready to accept - click the button above"))))):null},exports.TripFacialLog=P,exports.VERSION="1.0.0";
//# sourceMappingURL=index.js.map
