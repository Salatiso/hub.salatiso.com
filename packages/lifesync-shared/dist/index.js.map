{"version":3,"file":"index.js","sources":["../src/contexts/GuestContext.jsx","../src/components/FacialRecognition.jsx","../../../node_modules/react-i18next/dist/es/utils.js","../../../node_modules/react-i18next/dist/es/unescape.js","../../../node_modules/react-i18next/dist/es/defaults.js","../../../node_modules/react-i18next/dist/es/context.js","../../../node_modules/react-i18next/dist/es/useTranslation.js","../src/components/TripFacialLog.jsx","../src/index.js","../src/components/FloatingToolbar.jsx","../src/components/IDVerification.jsx","../src/components/SafetyInteractionFlow.jsx","../src/components/TermsOfReciprocityModal.jsx"],"sourcesContent":["import { createContext } from 'react';\r\n\r\nconst GuestContext = createContext();\r\n\r\nexport default GuestContext;\r\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport { Camera, CheckCircle, XCircle, AlertTriangle, Eye, RefreshCw, User } from 'lucide-react';\r\n\r\nconst FacialRecognition = ({\r\n  onCapture,\r\n  userType = 'participant',\r\n  className = '',\r\n  context = 'lifesync'\r\n}) => {\r\n  const [isCapturing, setIsCapturing] = useState(false);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const [isValidating, setIsValidating] = useState(false);\r\n  const [validationResult, setValidationResult] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [hasPermission, setHasPermission] = useState(false);\r\n\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  const startCamera = useCallback(async () => {\r\n    try {\r\n      setError(null);\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: {\r\n          facingMode: 'user',\r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 }\r\n        }\r\n      });\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        streamRef.current = stream;\r\n        setHasPermission(true);\r\n      }\r\n    } catch (err) {\r\n      setError('Camera access denied or unavailable');\r\n      console.error('Camera error:', err);\r\n    }\r\n  }, []);\r\n\r\n  const stopCamera = useCallback(() => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setHasPermission(false);\r\n  }, []);\r\n\r\n  const capturePhoto = useCallback(() => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    setIsCapturing(true);\r\n    setError(null);\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    // Set canvas dimensions to match video\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    // Draw current video frame to canvas\r\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    // Convert to blob\r\n    canvas.toBlob(async (blob) => {\r\n      if (blob) {\r\n        const imageUrl = URL.createObjectURL(blob);\r\n        setCapturedImage(imageUrl);\r\n\r\n        // Simulate face detection and liveness check\r\n        setIsValidating(true);\r\n        setTimeout(() => {\r\n          // Mock validation result - in real implementation, this would call an API\r\n          const mockResult = {\r\n            isValid: true,\r\n            confidence: 0.92,\r\n            livenessVerified: true,\r\n            faceDetected: true\r\n          };\r\n\r\n          setValidationResult(mockResult);\r\n          setIsValidating(false);\r\n          setIsCapturing(false);\r\n\r\n          // Call the onCapture callback with the result\r\n          if (onCapture) {\r\n            onCapture({\r\n              imageBlob: blob,\r\n              imageUrl,\r\n              validation: mockResult,\r\n              timestamp: new Date().toISOString(),\r\n              userType,\r\n              context\r\n            });\r\n          }\r\n        }, 2000);\r\n      } else {\r\n        setError('Failed to capture photo');\r\n        setIsCapturing(false);\r\n      }\r\n    }, 'image/jpeg', 0.8);\r\n  }, [onCapture, userType, context]);\r\n\r\n  const retakePhoto = useCallback(() => {\r\n    setCapturedImage(null);\r\n    setValidationResult(null);\r\n    setError(null);\r\n  }, []);\r\n\r\n  const resetProcess = useCallback(() => {\r\n    stopCamera();\r\n    setCapturedImage(null);\r\n    setValidationResult(null);\r\n    setError(null);\r\n    setIsCapturing(false);\r\n    setIsValidating(false);\r\n  }, [stopCamera]);\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [stopCamera]);\r\n\r\n  return (\r\n    <div className={`facial-recognition ${className}`}>\r\n      <div className=\"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto\">\r\n\r\n        {/* Header */}\r\n        <div className=\"text-center mb-6\">\r\n          <div className=\"flex items-center justify-center mb-3\">\r\n            <User className=\"w-8 h-8 text-blue-600 mr-2\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900\">\r\n              Facial Verification\r\n            </h3>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600\">\r\n            Please ensure good lighting and remove glasses/sunglasses\r\n          </p>\r\n        </div>\r\n\r\n        {/* Camera/Error State */}\r\n        {!hasPermission && !capturedImage && (\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"w-32 h-32 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\r\n              <Camera className=\"w-12 h-12 text-gray-400\" />\r\n            </div>\r\n            <button\r\n              onClick={startCamera}\r\n              className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Enable Camera\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Video Stream */}\r\n        {hasPermission && !capturedImage && (\r\n          <div className=\"mb-6\">\r\n            <div className=\"relative\">\r\n              <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                playsInline\r\n                muted\r\n                className=\"w-full rounded-lg border-2 border-gray-200\"\r\n                style={{ maxHeight: '300px' }}\r\n              />\r\n              <canvas ref={canvasRef} className=\"hidden\" />\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex justify-center\">\r\n              <button\r\n                onClick={capturePhoto}\r\n                disabled={isCapturing}\r\n                className=\"bg-green-600 text-white px-8 py-3 rounded-full hover:bg-green-700 transition-colors disabled:opacity-50\"\r\n              >\r\n                {isCapturing ? (\r\n                  <div className=\"flex items-center\">\r\n                    <RefreshCw className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                    Capturing...\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center\">\r\n                    <Camera className=\"w-5 h-5 mr-2\" />\r\n                    Take Photo\r\n                  </div>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Captured Image */}\r\n        {capturedImage && (\r\n          <div className=\"mb-6\">\r\n            <div className=\"relative\">\r\n              <img\r\n                src={capturedImage}\r\n                alt=\"Captured\"\r\n                className=\"w-full rounded-lg border-2 border-gray-200\"\r\n              />\r\n              {validationResult && (\r\n                <div className=\"absolute top-2 right-2\">\r\n                  {validationResult.isValid ? (\r\n                    <CheckCircle className=\"w-8 h-8 text-green-500 bg-white rounded-full\" />\r\n                  ) : (\r\n                    <XCircle className=\"w-8 h-8 text-red-500 bg-white rounded-full\" />\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Validation Status */}\r\n            {isValidating && (\r\n              <div className=\"mt-4 text-center\">\r\n                <div className=\"flex items-center justify-center mb-2\">\r\n                  <RefreshCw className=\"w-5 h-5 mr-2 animate-spin text-blue-600\" />\r\n                  <span className=\"text-blue-600\">Validating...</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '60%' }}></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Validation Result */}\r\n            {validationResult && !isValidating && (\r\n              <div className=\"mt-4\">\r\n                {validationResult.isValid ? (\r\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-center mb-2\">\r\n                      <CheckCircle className=\"w-5 h-5 text-green-600 mr-2\" />\r\n                      <span className=\"font-medium text-green-800\">Verification Successful</span>\r\n                    </div>\r\n                    <div className=\"text-sm text-green-700\">\r\n                      <p>Face detected: ✓</p>\r\n                      <p>Liveness verified: ✓</p>\r\n                      <p>Confidence: {(validationResult.confidence * 100).toFixed(1)}%</p>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-center mb-2\">\r\n                      <XCircle className=\"w-5 h-5 text-red-600 mr-2\" />\r\n                      <span className=\"font-medium text-red-800\">Verification Failed</span>\r\n                    </div>\r\n                    <p className=\"text-sm text-red-700\">\r\n                      Please ensure your face is clearly visible and try again.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"mt-4 flex justify-center gap-3\">\r\n              <button\r\n                onClick={retakePhoto}\r\n                className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                Retake\r\n              </button>\r\n              <button\r\n                onClick={resetProcess}\r\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                Start Over\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"mb-6\">\r\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n              <div className=\"flex items-center\">\r\n                <AlertTriangle className=\"w-5 h-5 text-red-600 mr-2\" />\r\n                <span className=\"text-red-800 font-medium\">Error</span>\r\n              </div>\r\n              <p className=\"text-red-700 mt-1\">{error}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Instructions */}\r\n        <div className=\"text-center text-sm text-gray-600\">\r\n          <p className=\"mb-2\">\r\n            <Eye className=\"w-4 h-4 inline mr-1\" />\r\n            Look directly at the camera\r\n          </p>\r\n          <p>Ensure good lighting and remove obstructions</p>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FacialRecognition;\r\n","export const warn = (i18n, code, msg, rest) => {\n  const args = [msg, {\n    code,\n    ...(rest || {})\n  }];\n  if (i18n?.services?.logger?.forward) {\n    return i18n.services.logger.forward(args, 'warn', 'react-i18next::', true);\n  }\n  if (isString(args[0])) args[0] = `react-i18next:: ${args[0]}`;\n  if (i18n?.services?.logger?.warn) {\n    i18n.services.logger.warn(...args);\n  } else if (console?.warn) {\n    console.warn(...args);\n  }\n};\nconst alreadyWarned = {};\nexport const warnOnce = (i18n, code, msg, rest) => {\n  if (isString(msg) && alreadyWarned[msg]) return;\n  if (isString(msg)) alreadyWarned[msg] = new Date();\n  warn(i18n, code, msg, rest);\n};\nconst loadedClb = (i18n, cb) => () => {\n  if (i18n.isInitialized) {\n    cb();\n  } else {\n    const initialized = () => {\n      setTimeout(() => {\n        i18n.off('initialized', initialized);\n      }, 0);\n      cb();\n    };\n    i18n.on('initialized', initialized);\n  }\n};\nexport const loadNamespaces = (i18n, ns, cb) => {\n  i18n.loadNamespaces(ns, loadedClb(i18n, cb));\n};\nexport const loadLanguages = (i18n, lng, ns, cb) => {\n  if (isString(ns)) ns = [ns];\n  if (i18n.options.preload && i18n.options.preload.indexOf(lng) > -1) return loadNamespaces(i18n, ns, cb);\n  ns.forEach(n => {\n    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);\n  });\n  i18n.loadLanguages(lng, loadedClb(i18n, cb));\n};\nexport const hasLoadedNamespace = (ns, i18n, options = {}) => {\n  if (!i18n.languages || !i18n.languages.length) {\n    warnOnce(i18n, 'NO_LANGUAGES', 'i18n.languages were undefined or empty', {\n      languages: i18n.languages\n    });\n    return true;\n  }\n  return i18n.hasLoadedNamespace(ns, {\n    lng: options.lng,\n    precheck: (i18nInstance, loadNotPending) => {\n      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;\n    }\n  });\n};\nexport const getDisplayName = Component => Component.displayName || Component.name || (isString(Component) && Component.length > 0 ? Component : 'Unknown');\nexport const isString = obj => typeof obj === 'string';\nexport const isObject = obj => typeof obj === 'object' && obj !== null;","const matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;\nconst htmlEntities = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"',\n  '&nbsp;': ' ',\n  '&#160;': ' ',\n  '&copy;': '©',\n  '&#169;': '©',\n  '&reg;': '®',\n  '&#174;': '®',\n  '&hellip;': '…',\n  '&#8230;': '…',\n  '&#x2F;': '/',\n  '&#47;': '/'\n};\nconst unescapeHtmlEntity = m => htmlEntities[m];\nexport const unescape = text => text.replace(matchHtmlEntity, unescapeHtmlEntity);","import { unescape } from './unescape.js';\nlet defaultOptions = {\n  bindI18n: 'languageChanged',\n  bindI18nStore: '',\n  transEmptyNodeValue: '',\n  transSupportBasicHtmlNodes: true,\n  transWrapTextNodes: '',\n  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],\n  useSuspense: true,\n  unescape\n};\nexport const setDefaults = (options = {}) => {\n  defaultOptions = {\n    ...defaultOptions,\n    ...options\n  };\n};\nexport const getDefaults = () => defaultOptions;","import { createContext } from 'react';\nimport { getDefaults, setDefaults } from './defaults.js';\nimport { getI18n, setI18n } from './i18nInstance.js';\nimport { initReactI18next } from './initReactI18next.js';\nexport { getDefaults, setDefaults, getI18n, setI18n, initReactI18next };\nexport const I18nContext = createContext();\nexport class ReportNamespaces {\n  constructor() {\n    this.usedNamespaces = {};\n  }\n  addUsedNamespaces(namespaces) {\n    namespaces.forEach(ns => {\n      if (!this.usedNamespaces[ns]) this.usedNamespaces[ns] = true;\n    });\n  }\n  getUsedNamespaces() {\n    return Object.keys(this.usedNamespaces);\n  }\n}\nexport const composeInitialProps = ForComponent => async ctx => {\n  const componentsInitialProps = (await ForComponent.getInitialProps?.(ctx)) ?? {};\n  const i18nInitialProps = getInitialProps();\n  return {\n    ...componentsInitialProps,\n    ...i18nInitialProps\n  };\n};\nexport const getInitialProps = () => {\n  const i18n = getI18n();\n  const namespaces = i18n.reportNamespaces?.getUsedNamespaces() ?? [];\n  const ret = {};\n  const initialI18nStore = {};\n  i18n.languages.forEach(l => {\n    initialI18nStore[l] = {};\n    namespaces.forEach(ns => {\n      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};\n    });\n  });\n  ret.initialI18nStore = initialI18nStore;\n  ret.initialLanguage = i18n.language;\n  return ret;\n};","import { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport { getI18n, getDefaults, ReportNamespaces, I18nContext } from './context.js';\nimport { warnOnce, loadNamespaces, loadLanguages, hasLoadedNamespace, isString, isObject } from './utils.js';\nconst usePrevious = (value, ignore) => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = ignore ? ref.current : value;\n  }, [value, ignore]);\n  return ref.current;\n};\nconst alwaysNewT = (i18n, language, namespace, keyPrefix) => i18n.getFixedT(language, namespace, keyPrefix);\nconst useMemoizedT = (i18n, language, namespace, keyPrefix) => useCallback(alwaysNewT(i18n, language, namespace, keyPrefix), [i18n, language, namespace, keyPrefix]);\nexport const useTranslation = (ns, props = {}) => {\n  const {\n    i18n: i18nFromProps\n  } = props;\n  const {\n    i18n: i18nFromContext,\n    defaultNS: defaultNSFromContext\n  } = useContext(I18nContext) || {};\n  const i18n = i18nFromProps || i18nFromContext || getI18n();\n  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new ReportNamespaces();\n  if (!i18n) {\n    warnOnce(i18n, 'NO_I18NEXT_INSTANCE', 'useTranslation: You will need to pass in an i18next instance by using initReactI18next');\n    const notReadyT = (k, optsOrDefaultValue) => {\n      if (isString(optsOrDefaultValue)) return optsOrDefaultValue;\n      if (isObject(optsOrDefaultValue) && isString(optsOrDefaultValue.defaultValue)) return optsOrDefaultValue.defaultValue;\n      return Array.isArray(k) ? k[k.length - 1] : k;\n    };\n    const retNotReady = [notReadyT, {}, false];\n    retNotReady.t = notReadyT;\n    retNotReady.i18n = {};\n    retNotReady.ready = false;\n    return retNotReady;\n  }\n  if (i18n.options.react?.wait) warnOnce(i18n, 'DEPRECATED_OPTION', 'useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');\n  const i18nOptions = {\n    ...getDefaults(),\n    ...i18n.options.react,\n    ...props\n  };\n  const {\n    useSuspense,\n    keyPrefix\n  } = i18nOptions;\n  let namespaces = ns || defaultNSFromContext || i18n.options?.defaultNS;\n  namespaces = isString(namespaces) ? [namespaces] : namespaces || ['translation'];\n  i18n.reportNamespaces.addUsedNamespaces?.(namespaces);\n  const ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(n => hasLoadedNamespace(n, i18n, i18nOptions));\n  const memoGetT = useMemoizedT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);\n  const getT = () => memoGetT;\n  const getNewT = () => alwaysNewT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);\n  const [t, setT] = useState(getT);\n  let joinedNS = namespaces.join();\n  if (props.lng) joinedNS = `${props.lng}${joinedNS}`;\n  const previousJoinedNS = usePrevious(joinedNS);\n  const isMounted = useRef(true);\n  useEffect(() => {\n    const {\n      bindI18n,\n      bindI18nStore\n    } = i18nOptions;\n    isMounted.current = true;\n    if (!ready && !useSuspense) {\n      if (props.lng) {\n        loadLanguages(i18n, props.lng, namespaces, () => {\n          if (isMounted.current) setT(getNewT);\n        });\n      } else {\n        loadNamespaces(i18n, namespaces, () => {\n          if (isMounted.current) setT(getNewT);\n        });\n      }\n    }\n    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {\n      setT(getNewT);\n    }\n    const boundReset = () => {\n      if (isMounted.current) setT(getNewT);\n    };\n    if (bindI18n) i18n?.on(bindI18n, boundReset);\n    if (bindI18nStore) i18n?.store.on(bindI18nStore, boundReset);\n    return () => {\n      isMounted.current = false;\n      if (i18n && bindI18n) bindI18n?.split(' ').forEach(e => i18n.off(e, boundReset));\n      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(e => i18n.store.off(e, boundReset));\n    };\n  }, [i18n, joinedNS]);\n  useEffect(() => {\n    if (isMounted.current && ready) {\n      setT(getT);\n    }\n  }, [i18n, keyPrefix, ready]);\n  const ret = [t, i18n, ready];\n  ret.t = t;\n  ret.i18n = i18n;\n  ret.ready = ready;\n  if (ready) return ret;\n  if (!ready && !useSuspense) return ret;\n  throw new Promise(resolve => {\n    if (props.lng) {\n      loadLanguages(i18n, props.lng, namespaces, () => resolve());\n    } else {\n      loadNamespaces(i18n, namespaces, () => resolve());\n    }\n  });\n};","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport FacialRecognition from './FacialRecognition.jsx';\r\nimport { CheckCircle, AlertTriangle, Users, Clock, Shield } from 'lucide-react';\r\n\r\nconst TripFacialLog = ({\r\n  interactionId,\r\n  participants = [],\r\n  onComplete,\r\n  onSkip,\r\n  context = 'safety_sync'\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [facialLogs, setFacialLogs] = useState({});\r\n  const [isCompleted, setIsCompleted] = useState(false);\r\n  const [skipped, setSkipped] = useState(false);\r\n\r\n  const steps = [\r\n    { id: 'instructions', title: 'Instructions & Consent' },\r\n    { id: 'participants', title: 'Participant Verification' },\r\n    { id: 'capture', title: 'Facial Capture' },\r\n    { id: 'review', title: 'Review & Confirm' }\r\n  ];\r\n\r\n  const handleFacialCapture = (participantId, captureData) => {\r\n    setFacialLogs(prev => ({\r\n      ...prev,\r\n      [participantId]: {\r\n        ...captureData,\r\n        capturedAt: new Date().toISOString()\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleComplete = () => {\r\n    const logData = {\r\n      interactionId,\r\n      context,\r\n      participants: participants.map(p => ({\r\n        id: p.id,\r\n        name: p.name,\r\n        role: p.role,\r\n        facialLog: facialLogs[p.id] || null\r\n      })),\r\n      completedAt: new Date().toISOString(),\r\n      totalParticipants: participants.length,\r\n      verifiedParticipants: Object.keys(facialLogs).length\r\n    };\r\n\r\n    setIsCompleted(true);\r\n    onComplete(logData);\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    setSkipped(true);\r\n    onSkip({\r\n      interactionId,\r\n      context,\r\n      reason: 'user_skipped',\r\n      skippedAt: new Date().toISOString()\r\n    });\r\n  };\r\n\r\n  const nextStep = () => {\r\n    if (currentStep < steps.length - 1) {\r\n      setCurrentStep(currentStep + 1);\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    }\r\n  };\r\n\r\n  const currentParticipant = participants[currentStep - 1];\r\n\r\n  if (skipped) {\r\n    return (\r\n      <div className=\"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <AlertTriangle className=\"w-16 h-16 text-orange-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n            Facial Verification Skipped\r\n          </h3>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            You have chosen to skip facial verification. Some safety features may be limited.\r\n          </p>\r\n          <button\r\n            onClick={() => setSkipped(false)}\r\n            className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Go Back\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isCompleted) {\r\n    return (\r\n      <div className=\"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n            Facial Verification Complete\r\n          </h3>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            All participants have been verified. Your interaction is now secured with facial recognition.\r\n          </p>\r\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\">\r\n            <div className=\"flex items-center justify-center mb-2\">\r\n              <Shield className=\"w-5 h-5 text-green-600 mr-2\" />\r\n              <span className=\"font-medium text-green-800\">Enhanced Security Active</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-700 text-center\">\r\n              Facial verification provides additional safety layer for dispute resolution\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"facial-log-container bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto\">\r\n\r\n      {/* Progress Header */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">\r\n            Facial Verification Process\r\n          </h2>\r\n          <span className=\"text-sm text-gray-500\">\r\n            Step {currentStep + 1} of {steps.length}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"w-full bg-gray-200 rounded-full h-2 mb-4\">\r\n          <div\r\n            className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n            style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}\r\n          ></div>\r\n        </div>\r\n\r\n        {/* Step Indicators */}\r\n        <div className=\"flex justify-between\">\r\n          {steps.map((step, index) => (\r\n            <div\r\n              key={step.id}\r\n              className={`flex flex-col items-center ${\r\n                index <= currentStep ? 'text-blue-600' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center mb-1 ${\r\n                index < currentStep\r\n                  ? 'bg-blue-600 text-white'\r\n                  : index === currentStep\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-gray-200 text-gray-400'\r\n              }`}>\r\n                {index < currentStep ? <CheckCircle className=\"w-4 h-4\" /> : index + 1}\r\n              </div>\r\n              <span className=\"text-xs text-center max-w-20\">{step.title}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Step Content */}\r\n      <div className=\"min-h-96\">\r\n\r\n        {/* Step 0: Instructions */}\r\n        {currentStep === 0 && (\r\n          <div className=\"text-center\">\r\n            <Shield className=\"w-16 h-16 text-blue-600 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\r\n              Facial Verification for Enhanced Safety\r\n            </h3>\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n              <p className=\"text-blue-800 mb-3\">\r\n                Facial recognition adds an extra layer of security to your interaction:\r\n              </p>\r\n              <ul className=\"text-left text-blue-700 text-sm space-y-2\">\r\n                <li>• Provides evidence for dispute resolution</li>\r\n                <li>• Verifies participant identities</li>\r\n                <li>• Enhances trust and accountability</li>\r\n                <li>• Works alongside existing safety features</li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\r\n              <div className=\"flex items-start\">\r\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"text-left\">\r\n                  <p className=\"text-yellow-800 font-medium mb-1\">Important Notes:</p>\r\n                  <ul className=\"text-yellow-700 text-sm space-y-1\">\r\n                    <li>• Photos are encrypted and auto-deleted after 48 hours</li>\r\n                    <li>• Facial recognition is optional but recommended</li>\r\n                    <li>• You can skip this step if preferred</li>\r\n                    <li>• Ensure good lighting for best results</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 1: Participants List */}\r\n        {currentStep === 1 && (\r\n          <div>\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-4 text-center\">\r\n              Participants to Verify\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {participants.map((participant, index) => (\r\n                <div\r\n                  key={participant.id}\r\n                  className={`flex items-center justify-between p-4 rounded-lg border ${\r\n                    facialLogs[participant.id]\r\n                      ? 'bg-green-50 border-green-200'\r\n                      : 'bg-gray-50 border-gray-200'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center\">\r\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${\r\n                      facialLogs[participant.id] ? 'bg-green-500' : 'bg-gray-400'\r\n                    }`}>\r\n                      {facialLogs[participant.id] ? (\r\n                        <CheckCircle className=\"w-6 h-6 text-white\" />\r\n                      ) : (\r\n                        <Users className=\"w-6 h-6 text-white\" />\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900\">{participant.name}</p>\r\n                      <p className=\"text-sm text-gray-600\">{participant.role}</p>\r\n                    </div>\r\n                  </div>\r\n                  {facialLogs[participant.id] && (\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm text-green-600 font-medium\">Verified</p>\r\n                      <p className=\"text-xs text-gray-500\">\r\n                        {new Date(facialLogs[participant.id].capturedAt).toLocaleTimeString()}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"mt-6 text-center text-sm text-gray-600\">\r\n              <p>{Object.keys(facialLogs).length} of {participants.length} participants verified</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 2: Facial Capture */}\r\n        {currentStep === 2 && currentParticipant && (\r\n          <div>\r\n            <div className=\"text-center mb-6\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                Verify {currentParticipant.name}\r\n              </h3>\r\n              <p className=\"text-gray-600\">{currentParticipant.role}</p>\r\n            </div>\r\n\r\n            <FacialRecognition\r\n              onCapture={(data) => handleFacialCapture(currentParticipant.id, data)}\r\n              userType={currentParticipant.role.toLowerCase().replace(' ', '_')}\r\n              context={context}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 3: Review */}\r\n        {currentStep === 3 && (\r\n          <div>\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-6 text-center\">\r\n              Review Verification\r\n            </h3>\r\n\r\n            <div className=\"space-y-4 mb-6\">\r\n              {participants.map((participant) => {\r\n                const log = facialLogs[participant.id];\r\n                return (\r\n                  <div key={participant.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\r\n                    <div className=\"flex items-center\">\r\n                      <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${\r\n                        log ? 'bg-green-500' : 'bg-red-500'\r\n                      }`}>\r\n                        {log ? <CheckCircle className=\"w-4 h-4 text-white\" /> : <AlertTriangle className=\"w-4 h-4 text-white\" />}\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-medium text-gray-900\">{participant.name}</p>\r\n                        <p className=\"text-sm text-gray-600\">{participant.role}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      {log ? (\r\n                        <div>\r\n                          <p className=\"text-sm text-green-600 font-medium\">Verified</p>\r\n                          <p className=\"text-xs text-gray-500\">\r\n                            {new Date(log.capturedAt).toLocaleTimeString()}\r\n                          </p>\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"text-sm text-red-600 font-medium\">Not Verified</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n              <div className=\"flex items-start\">\r\n                <Shield className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"text-blue-800 font-medium mb-1\">Security Benefits:</p>\r\n                  <ul className=\"text-blue-700 text-sm space-y-1\">\r\n                    <li>• Encrypted photo storage with auto-deletion</li>\r\n                    <li>• Enhanced dispute resolution capabilities</li>\r\n                    <li>• Additional trust layer for interactions</li>\r\n                    <li>• Community validation support</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200\">\r\n        <button\r\n          onClick={prevStep}\r\n          disabled={currentStep === 0}\r\n          className=\"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          Previous\r\n        </button>\r\n\r\n        <div className=\"flex gap-3\">\r\n          {currentStep < steps.length - 1 ? (\r\n            <button\r\n              onClick={nextStep}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Next\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={handleComplete}\r\n              disabled={Object.keys(facialLogs).length === 0}\r\n              className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              Complete Verification\r\n            </button>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleSkip}\r\n            className=\"px-6 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n          >\r\n            Skip\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TripFacialLog;\r\n","// LifeSync Shared Components Library\r\n// Main entry point for all shared components and utilities\r\n\r\n// Core Components\r\nexport { default as IDVerification } from './components/IDVerification.jsx';\r\nexport { default as FacialRecognition } from './components/FacialRecognition.jsx';\r\nexport { default as SafetyInteractionFlow } from './components/SafetyInteractionFlow.jsx';\r\nexport { default as FloatingToolbar } from './components/FloatingToolbar.jsx';\r\nexport { default as TermsOfReciprocityModal } from './components/TermsOfReciprocityModal.jsx';\r\nexport { default as TripFacialLog } from './components/TripFacialLog.jsx';\r\n\r\n// Contexts\r\nexport { default as GuestContext } from './contexts/GuestContext.jsx';\r\n// export { default as ThemeContext } from './contexts/ThemeContext';\r\n\r\n// Hooks\r\n// export { default as useIDValidation } from './hooks/useIDValidation';\r\n// export { default as useFacialRecognition } from './hooks/useFacialRecognition';\r\n\r\n// Utils\r\n// export * from './utils/validation';\r\n// export * from './utils/constants';\r\n\r\n// Version and metadata\r\nexport const VERSION = '1.0.0';\r\nexport const AUTHOR = 'Salatiso Ecosystem';\r\nexport const HOMEPAGE = 'https://lifesync-lifecv.web.app';\r\n","import React, { useState } from 'react';\r\nimport { ChevronUp, ChevronDown, Shield, MapPin, Users, ExternalLink, CreditCard, X } from 'lucide-react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst FloatingToolbar = () => {\r\n  const { t } = useTranslation();\r\n  const [isMinimized, setIsMinimized] = useState(false);\r\n  const [showIdValidator, setShowIdValidator] = useState(false);\r\n  const [idInput, setIdInput] = useState('');\r\n  const [validationResult, setValidationResult] = useState(null);\r\n\r\n  const tools = [\r\n    {\r\n      name: 'ID Validator',\r\n      icon: CreditCard,\r\n      action: () => setShowIdValidator(true),\r\n      description: 'Validate South African ID numbers'\r\n    },\r\n    {\r\n      name: 'Follow Me Home',\r\n      icon: MapPin,\r\n      path: '/follow-me-home',\r\n      description: 'Personal safety companion'\r\n    },\r\n    {\r\n      name: 'Instant Trust',\r\n      icon: Shield,\r\n      external: 'https://lifesync-lifecv.web.app/instant-trust',\r\n      description: 'Quick trust verification'\r\n    },\r\n    {\r\n      name: 'SafetyHelp Hub',\r\n      icon: Users,\r\n      external: 'https://safetyhelp-lifecv.web.app/',\r\n      description: 'Safety and emergency services'\r\n    }\r\n  ];\r\n\r\n  // Luhn algorithm for checksum validation\r\n  const luhnCheck = (digits) => {\r\n    let sum = 0;\r\n    let alternate = false;\r\n    for (let i = digits.length - 1; i >= 0; i--) {\r\n      let n = parseInt(digits[i], 10);\r\n      if (alternate) {\r\n        n *= 2;\r\n        if (n > 9) n -= 9;\r\n      }\r\n      sum += n;\r\n      alternate = !alternate;\r\n    }\r\n    return sum % 10 === 0;\r\n  };\r\n\r\n  // Validate South African ID number\r\n  const validateSAID = (id) => {\r\n    const cleanId = id.replace(/\\s+/g, '');\r\n    if (cleanId.length !== 13 || !/^\\d+$/.test(cleanId)) {\r\n      return {\r\n        validStructure: false,\r\n        errors: [{ code: 'INVALID_LENGTH', message: 'ID number must be 13 digits' }]\r\n      };\r\n    }\r\n\r\n    const digits = cleanId.split('');\r\n    const yy = parseInt(digits.slice(0, 2).join(''), 10);\r\n    const mm = parseInt(digits.slice(2, 4).join(''), 10);\r\n    const dd = parseInt(digits.slice(4, 6).join(''), 10);\r\n\r\n    // Determine full year\r\n    const currentYear = new Date().getFullYear();\r\n    const currentYearShort = currentYear % 100;\r\n    const fullYear = yy <= currentYearShort ? 2000 + yy : 1900 + yy;\r\n\r\n    // Validate date\r\n    const date = new Date(fullYear, mm - 1, dd);\r\n    if (date.getFullYear() !== fullYear || date.getMonth() !== mm - 1 || date.getDate() !== dd) {\r\n      return {\r\n        validStructure: false,\r\n        errors: [{ code: 'INVALID_DOB', message: 'Invalid date of birth' }]\r\n      };\r\n    }\r\n\r\n    // Check age plausibility\r\n    const age = currentYear - fullYear;\r\n    if (age < 0 || age > 120) {\r\n      return {\r\n        validStructure: false,\r\n        errors: [{ code: 'INVALID_DOB', message: 'Implausible age' }]\r\n      };\r\n    }\r\n\r\n    // Citizenship digit\r\n    const citizenship = parseInt(digits[10], 10);\r\n    if (citizenship !== 0 && citizenship !== 1) {\r\n      return {\r\n        validStructure: false,\r\n        errors: [{ code: 'INVALID_CITIZENSHIP_DIGIT', message: 'Invalid citizenship digit' }]\r\n      };\r\n    }\r\n\r\n    // Checksum\r\n    const checksumValid = luhnCheck(digits.slice(0, 12).join('') + digits[12]);\r\n\r\n    const sequence = parseInt(digits.slice(6, 10).join(''), 10);\r\n    const gender = sequence < 5000 ? 'Female' : 'Male';\r\n\r\n    return {\r\n      validStructure: true,\r\n      checksumValid,\r\n      dateOfBirth: `${fullYear}-${String(mm).padStart(2, '0')}-${String(dd).padStart(2, '0')}`,\r\n      age,\r\n      gender,\r\n      citizenship: citizenship === 0 ? 'South African' : 'Permanent resident',\r\n      errors: []\r\n    };\r\n  };\r\n\r\n  const handleIdValidation = () => {\r\n    const result = validateSAID(idInput);\r\n    setValidationResult(result);\r\n  };\r\n\r\n  const handleToolClick = (tool) => {\r\n    if (tool.action) {\r\n      tool.action();\r\n    } else if (tool.external) {\r\n      window.open(tool.external, '_blank');\r\n    } else if (tool.path) {\r\n      window.location.href = tool.path;\r\n    }\r\n  };\r\n\r\n  if (isMinimized) {\r\n    return (\r\n      <div className=\"fixed bottom-4 right-4 z-50\">\r\n        <button\r\n          onClick={() => setIsMinimized(false)}\r\n          className=\"bg-primary-500 hover:bg-primary-600 text-white p-3 rounded-full shadow-lg transition-all duration-300\"\r\n        >\r\n          <ChevronUp className=\"h-6 w-6\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed bottom-4 right-4 z-50 bg-blue-500 dark:bg-blue-600 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-w-sm\">\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-lg font-semibold text-white\">\r\n              Quick Tools\r\n            </h3>\r\n            <button\r\n              onClick={() => setIsMinimized(true)}\r\n              className=\"text-white hover:text-gray-200\"\r\n            >\r\n              <ChevronDown className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            {tools.map((tool, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={() => handleToolClick(tool)}\r\n                className=\"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-400 transition-colors text-left\"\r\n              >\r\n                <tool.icon className=\"h-5 w-5 text-white flex-shrink-0\" />\r\n                <div>\r\n                  <div className=\"text-sm font-medium text-white\">\r\n                    {tool.name}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-200\">\r\n                    {tool.description}\r\n                  </div>\r\n                </div>\r\n                {tool.external && <ExternalLink className=\"h-4 w-4 text-white\" />}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ID Validator Modal */}\r\n      {showIdValidator && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                  ID Number Validator\r\n                </h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowIdValidator(false);\r\n                    setIdInput('');\r\n                    setValidationResult(null);\r\n                  }}\r\n                  className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\r\n                >\r\n                  <X className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"mb-4\">\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                  Enter a South African ID number for structural validation. This checks format, date plausibility, and checksum but does not verify against official records.\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  value={idInput}\r\n                  onChange={(e) => setIdInput(e.target.value)}\r\n                  placeholder=\"e.g., 8001015009087\"\r\n                  className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  maxLength={13}\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleIdValidation}\r\n                disabled={!idInput.trim()}\r\n                className=\"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors\"\r\n              >\r\n                Validate ID\r\n              </button>\r\n\r\n              {validationResult && (\r\n                <div className=\"mt-4 p-4 rounded-lg border\">\r\n                  {validationResult.validStructure ? (\r\n                    <div className=\"text-green-600 dark:text-green-400\">\r\n                      <div className=\"font-semibold mb-2\">✓ Structurally Valid</div>\r\n                      <div className=\"text-sm space-y-1\">\r\n                        <div>Date of Birth: {validationResult.dateOfBirth}</div>\r\n                        <div>Age: {validationResult.age}</div>\r\n                        <div>Gender: {validationResult.gender}</div>\r\n                        <div>Citizenship: {validationResult.citizenship}</div>\r\n                        <div>Checksum: {validationResult.checksumValid ? 'Valid' : 'Invalid'}</div>\r\n                      </div>\r\n                      <div className=\"text-xs mt-2 text-gray-600 dark:text-gray-400\">\r\n                        This does not confirm the ID is issued by Home Affairs. For official verification, contact the relevant authorities.\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-red-600 dark:text-red-400\">\r\n                      <div className=\"font-semibold mb-2\">✗ Invalid Structure</div>\r\n                      <ul className=\"text-sm list-disc list-inside\">\r\n                        {validationResult.errors.map((error, index) => (\r\n                          <li key={index}>{error.message}</li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FloatingToolbar;\r\n","import React, { useState, useContext } from 'react';\r\nimport { Shield, CheckCircle, AlertTriangle, Camera, Upload, Mail, Globe, FileText, Users } from 'lucide-react';\r\nimport GuestContext from '../contexts/GuestContext.jsx';\r\nimport FacialRecognition from './FacialRecognition.jsx';\r\n\r\nconst IDVerification = ({\r\n  onVerificationComplete,\r\n  context = 'general',\r\n  requireFacial = true,\r\n  requireNationality = false,\r\n  className = ''\r\n}) => {\r\n  const { guestData, setGuestData } = useContext(GuestContext);\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [isVerifying, setIsVerifying] = useState(false);\r\n  const [verificationData, setVerificationData] = useState({\r\n    idNumber: '',\r\n    idType: 'south-african',\r\n    nationality: '',\r\n    workPermit: '',\r\n    facialVerified: false,\r\n    idVerified: false,\r\n    nationalityConfirmed: false\r\n  });\r\n  const [validationResult, setValidationResult] = useState(null);\r\n  const [showFacialRecognition, setShowFacialRecognition] = useState(false);\r\n\r\n  const idTypes = [\r\n    { value: 'south-african', label: 'South African ID' },\r\n    { value: 'passport', label: 'Passport' },\r\n    { value: 'drivers-license', label: 'Driver\\'s License' },\r\n    { value: 'work-permit', label: 'Work Permit' }\r\n  ];\r\n\r\n  const nationalities = [\r\n    'South African',\r\n    'Zimbabwean',\r\n    'Mozambican',\r\n    'Botswanan',\r\n    'Namibian',\r\n    'Lesotho',\r\n    'Swazi',\r\n    'Malawian',\r\n    'Zambian',\r\n    'Angolan',\r\n    'Other'\r\n  ];\r\n\r\n  const validateSouthAfricanID = (id) => {\r\n    if (!/^\\d{13}$/.test(id)) {\r\n      return { valid: false, errors: [{ message: 'ID must be exactly 13 digits' }] };\r\n    }\r\n\r\n    const year = parseInt(id.substring(0, 2));\r\n    const month = parseInt(id.substring(2, 4));\r\n    const day = parseInt(id.substring(4, 6));\r\n    const gender = parseInt(id.substring(6, 10)) < 5000 ? 'Female' : 'Male';\r\n    const citizenship = parseInt(id.substring(10, 11)) === 0 ? 'South African' : 'Permanent Resident';\r\n\r\n    // Basic date validation\r\n    const currentYear = new Date().getFullYear() % 100;\r\n    const birthYear = year > currentYear ? 1900 + year : 2000 + year;\r\n\r\n    if (month < 1 || month > 12) {\r\n      return { valid: false, errors: [{ message: 'Invalid birth month' }] };\r\n    }\r\n\r\n    if (day < 1 || day > 31) {\r\n      return { valid: false, errors: [{ message: 'Invalid birth day' }] };\r\n    }\r\n\r\n    // Luhn algorithm for checksum\r\n    let sum = 0;\r\n    for (let i = 0; i < 12; i++) {\r\n      let digit = parseInt(id[i]);\r\n      if (i % 2 === 0) {\r\n        digit *= 2;\r\n        if (digit > 9) digit -= 9;\r\n      }\r\n      sum += digit;\r\n    }\r\n    const checksum = (10 - (sum % 10)) % 10;\r\n    const checksumValid = checksum === parseInt(id[12]);\r\n\r\n    const age = new Date().getFullYear() - birthYear;\r\n\r\n    return {\r\n      valid: checksumValid,\r\n      dateOfBirth: `${day.toString().padStart(2, '0')}/${month.toString().padStart(2, '0')}/${birthYear}`,\r\n      age,\r\n      gender,\r\n      citizenship,\r\n      checksumValid\r\n    };\r\n  };\r\n\r\n  const handleIdValidation = () => {\r\n    setIsVerifying(true);\r\n\r\n    setTimeout(() => {\r\n      if (verificationData.idType === 'south-african') {\r\n        const result = validateSouthAfricanID(verificationData.idNumber);\r\n        setValidationResult(result);\r\n        if (result.valid) {\r\n          setVerificationData(prev => ({ ...prev, idVerified: true }));\r\n          setCurrentStep(2);\r\n        }\r\n      } else {\r\n        // For other ID types, basic validation\r\n        const result = {\r\n          valid: verificationData.idNumber.length >= 5,\r\n          message: verificationData.idNumber.length >= 5 ? 'ID format accepted' : 'ID too short'\r\n        };\r\n        setValidationResult(result);\r\n        if (result.valid) {\r\n          setVerificationData(prev => ({ ...prev, idVerified: true }));\r\n          setCurrentStep(2);\r\n        }\r\n      }\r\n      setIsVerifying(false);\r\n    }, 1500);\r\n  };\r\n\r\n  const handleFacialComplete = (facialData) => {\r\n    setVerificationData(prev => ({ ...prev, facialVerified: true }));\r\n    setShowFacialRecognition(false);\r\n    setCurrentStep(requireNationality ? 3 : 4);\r\n  };\r\n\r\n  const handleNationalityConfirm = () => {\r\n    if (verificationData.nationality && (verificationData.nationality === 'South African' || verificationData.workPermit)) {\r\n      setVerificationData(prev => ({ ...prev, nationalityConfirmed: true }));\r\n      setCurrentStep(4);\r\n    }\r\n  };\r\n\r\n  const handleCompleteVerification = () => {\r\n    const verificationRecord = {\r\n      ...verificationData,\r\n      verifiedAt: Date.now(),\r\n      context,\r\n      trustScore: calculateTrustScore()\r\n    };\r\n\r\n    const updatedGuestData = {\r\n      ...guestData,\r\n      verifications: [...(guestData.verifications || []), verificationRecord],\r\n      trustScore: Math.max(guestData.trustScore || 0, verificationRecord.trustScore)\r\n    };\r\n\r\n    setGuestData(updatedGuestData);\r\n\r\n    if (onVerificationComplete) {\r\n      onVerificationComplete(verificationRecord);\r\n    }\r\n  };\r\n\r\n  const calculateTrustScore = () => {\r\n    let score = 0;\r\n    if (verificationData.idVerified) score += 40;\r\n    if (verificationData.facialVerified) score += 35;\r\n    if (verificationData.nationalityConfirmed) score += 25;\r\n    return Math.min(score, 100);\r\n  };\r\n\r\n  const renderStepIndicator = () => (\r\n    <div className=\"flex items-center justify-center mb-8\">\r\n      {[1, 2, 3, 4].map((step) => (\r\n        <div key={step} className=\"flex items-center\">\r\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\r\n            currentStep >= step\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-600'\r\n          }`}>\r\n            {step}\r\n          </div>\r\n          {step < 4 && (\r\n            <div className={`w-12 h-0.5 mx-2 ${\r\n              currentStep > step ? 'bg-blue-600' : 'bg-gray-200'\r\n            }`} />\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className={`max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 ${className}`}>\r\n      <div className=\"text-center mb-6\">\r\n        <Shield className=\"w-12 h-12 text-blue-600 mx-auto mb-4\" />\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n          Identity Verification\r\n        </h2>\r\n        <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\r\n          Complete verification to enhance trust and safety\r\n        </p>\r\n      </div>\r\n\r\n      {renderStepIndicator()}\r\n\r\n      {currentStep === 1 && (\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              ID Type\r\n            </label>\r\n            <select\r\n              value={verificationData.idType}\r\n              onChange={(e) => setVerificationData(prev => ({ ...prev, idType: e.target.value }))}\r\n              className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              {idTypes.map(type => (\r\n                <option key={type.value} value={type.value}>{type.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              ID Number\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={verificationData.idNumber}\r\n              onChange={(e) => setVerificationData(prev => ({ ...prev, idNumber: e.target.value }))}\r\n              placeholder={verificationData.idType === 'south-african' ? 'e.g., 8001015009087' : 'Enter ID number'}\r\n              className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              maxLength={verificationData.idType === 'south-african' ? 13 : 20}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleIdValidation}\r\n            disabled={!verificationData.idNumber.trim() || isVerifying}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors\"\r\n          >\r\n            {isVerifying ? 'Validating...' : 'Validate ID'}\r\n          </button>\r\n\r\n          {validationResult && (\r\n            <div className=\"mt-4 p-4 rounded-lg border\">\r\n              {validationResult.valid ? (\r\n                <div className=\"text-green-600 dark:text-green-400\">\r\n                  <CheckCircle className=\"w-5 h-5 inline mr-2\" />\r\n                  <span className=\"font-semibold\">ID Validated Successfully</span>\r\n                  {validationResult.dateOfBirth && (\r\n                    <div className=\"text-sm mt-2 space-y-1\">\r\n                      <div>DOB: {validationResult.dateOfBirth}</div>\r\n                      <div>Age: {validationResult.age}</div>\r\n                      <div>Gender: {validationResult.gender}</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-red-600 dark:text-red-400\">\r\n                  <AlertTriangle className=\"w-5 h-5 inline mr-2\" />\r\n                  <span className=\"font-semibold\">Validation Failed</span>\r\n                  <ul className=\"text-sm mt-2 list-disc list-inside\">\r\n                    {validationResult.errors?.map((error, index) => (\r\n                      <li key={index}>{error.message}</li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {currentStep === 2 && requireFacial && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"text-center\">\r\n            <Camera className=\"w-12 h-12 text-blue-600 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n              Facial Verification\r\n            </h3>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Take a photo to verify your identity\r\n            </p>\r\n          </div>\r\n\r\n          {!showFacialRecognition ? (\r\n            <button\r\n              onClick={() => setShowFacialRecognition(true)}\r\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\r\n            >\r\n              Start Facial Verification\r\n            </button>\r\n          ) : (\r\n            <FacialRecognition\r\n              onCapture={handleFacialComplete}\r\n              userType=\"verifier\"\r\n              context={context}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {currentStep === 3 && requireNationality && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"text-center\">\r\n            <Globe className=\"w-12 h-12 text-blue-600 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n              Nationality & Work Status\r\n            </h3>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Confirm your nationality and work authorization\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Nationality\r\n            </label>\r\n            <select\r\n              value={verificationData.nationality}\r\n              onChange={(e) => setVerificationData(prev => ({ ...prev, nationality: e.target.value }))}\r\n              className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              <option value=\"\">Select nationality</option>\r\n              {nationalities.map(nat => (\r\n                <option key={nat} value={nat}>{nat}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {verificationData.nationality && verificationData.nationality !== 'South African' && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Work Permit Number\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={verificationData.workPermit}\r\n                onChange={(e) => setVerificationData(prev => ({ ...prev, workPermit: e.target.value }))}\r\n                placeholder=\"Enter work permit number\"\r\n                className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                Required for non-South African citizens working in South Africa\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleNationalityConfirm}\r\n            disabled={!verificationData.nationality || (verificationData.nationality !== 'South African' && !verificationData.workPermit)}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors\"\r\n          >\r\n            Confirm Nationality\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {currentStep === 4 && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"text-center\">\r\n            <CheckCircle className=\"w-12 h-12 text-green-600 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n              Verification Complete\r\n            </h3>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Your identity has been verified successfully\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\r\n            <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Verification Summary</h4>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span>ID Verification:</span>\r\n                <span className={verificationData.idVerified ? 'text-green-600' : 'text-red-600'}>\r\n                  {verificationData.idVerified ? '✓ Verified' : '✗ Not Verified'}\r\n                </span>\r\n              </div>\r\n              {requireFacial && (\r\n                <div className=\"flex justify-between\">\r\n                  <span>Facial Verification:</span>\r\n                  <span className={verificationData.facialVerified ? 'text-green-600' : 'text-red-600'}>\r\n                    {verificationData.facialVerified ? '✓ Verified' : '✗ Not Verified'}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              {requireNationality && (\r\n                <div className=\"flex justify-between\">\r\n                  <span>Nationality Confirmed:</span>\r\n                  <span className={verificationData.nationalityConfirmed ? 'text-green-600' : 'text-red-600'}>\r\n                    {verificationData.nationalityConfirmed ? '✓ Confirmed' : '✗ Not Confirmed'}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div className=\"flex justify-between font-semibold\">\r\n                <span>Trust Score:</span>\r\n                <span className=\"text-blue-600\">{calculateTrustScore()}%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleCompleteVerification}\r\n            className=\"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\r\n          >\r\n            Complete Verification\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IDVerification;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport TripFacialLog from './TripFacialLog.jsx';\r\nimport FacialRecognition from './FacialRecognition.jsx';\r\nimport { Shield, Users, CheckCircle, AlertTriangle } from 'lucide-react';\r\n\r\nconst SafetyInteractionFlow = ({\r\n  interactionType = 'follow_me_home',\r\n  participants = [],\r\n  onComplete,\r\n  onCancel,\r\n  className = ''\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [currentStep, setCurrentStep] = useState('consent');\r\n  const [facialLogData, setFacialLogData] = useState(null);\r\n  const [isCompleted, setIsCompleted] = useState(false);\r\n\r\n  const steps = {\r\n    consent: { title: 'Safety Enhancement Consent', icon: Shield },\r\n    facial_setup: { title: 'Facial Verification Setup', icon: Users },\r\n    verification: { title: 'Participant Verification', icon: CheckCircle },\r\n    complete: { title: 'Safety Enhanced', icon: Shield }\r\n  };\r\n\r\n  const handleConsentAccept = () => {\r\n    setCurrentStep('facial_setup');\r\n  };\r\n\r\n  const handleFacialLogComplete = (logData) => {\r\n    setFacialLogData(logData);\r\n    setCurrentStep('complete');\r\n    setIsCompleted(true);\r\n\r\n    // Call the onComplete callback with enhanced safety data\r\n    if (onComplete) {\r\n      onComplete({\r\n        interactionType,\r\n        facialVerification: logData,\r\n        safetyEnhanced: true,\r\n        timestamp: new Date().toISOString(),\r\n        participants: logData.participants\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFacialLogSkip = (skipData) => {\r\n    setFacialLogData(skipData);\r\n    setCurrentStep('complete');\r\n    setIsCompleted(true);\r\n\r\n    // Call onComplete with basic safety data\r\n    if (onComplete) {\r\n      onComplete({\r\n        interactionType,\r\n        facialVerification: null,\r\n        safetyEnhanced: false,\r\n        skipped: true,\r\n        timestamp: new Date().toISOString(),\r\n        participants: participants\r\n      });\r\n    }\r\n  };\r\n\r\n  const getInteractionTitle = () => {\r\n    switch (interactionType) {\r\n      case 'follow_me_home':\r\n        return 'Follow Me Home Safety Enhancement';\r\n      case 'emergency_sync':\r\n        return 'Emergency Response Coordination';\r\n      case 'community_meeting':\r\n        return 'Community Safety Meeting';\r\n      case 'transport_sync':\r\n        return 'Transport Safety Coordination';\r\n      default:\r\n        return 'Safety Interaction Enhancement';\r\n    }\r\n  };\r\n\r\n  if (isCompleted) {\r\n    return (\r\n      <div className={`safety-flow-completed bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto ${className}`}>\r\n        <div className=\"text-center\">\r\n          <div className=\"mb-6\">\r\n            {facialLogData?.facialVerification ? (\r\n              <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n            ) : (\r\n              <AlertTriangle className=\"w-16 h-16 text-orange-500 mx-auto mb-4\" />\r\n            )}\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n              {facialLogData?.facialVerification ? 'Safety Enhanced' : 'Basic Safety Active'}\r\n            </h2>\r\n            <p className=\"text-gray-600\">\r\n              {facialLogData?.facialVerification\r\n                ? 'Facial verification has been completed. Your interaction is now secured with enhanced safety features.'\r\n                : 'Basic safety features are active. Facial verification was skipped.'\r\n              }\r\n            </p>\r\n          </div>\r\n\r\n          {facialLogData?.facialVerification && (\r\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\r\n              <h3 className=\"font-medium text-green-800 mb-2\">Verification Summary:</h3>\r\n              <div className=\"text-sm text-green-700 space-y-1\">\r\n                <p>• {facialLogData.verifiedParticipants} of {facialLogData.totalParticipants} participants verified</p>\r\n                <p>• Facial recognition data encrypted and stored securely</p>\r\n                <p>• Auto-deletion scheduled for 48 hours</p>\r\n                <p>• Enhanced dispute resolution capabilities activated</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-center gap-4\">\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Continue to {getInteractionTitle()}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`safety-interaction-flow bg-white rounded-lg shadow-lg ${className}`}>\r\n\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">\r\n              {getInteractionTitle()}\r\n            </h1>\r\n            <p className=\"text-gray-600 mt-1\">\r\n              Enhance safety with optional facial verification\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {/* Progress */}\r\n        <div className=\"mt-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm font-medium text-gray-700\">Setup Progress</span>\r\n            <span className=\"text-sm text-gray-500\">\r\n              {Object.keys(steps).indexOf(currentStep) + 1} of {Object.keys(steps).length}\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n            <div\r\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n              style={{\r\n                width: `${((Object.keys(steps).indexOf(currentStep) + 1) / Object.keys(steps).length) * 100}%`\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"p-6\">\r\n\r\n        {/* Step 1: Consent */}\r\n        {currentStep === 'consent' && (\r\n          <div className=\"max-w-2xl mx-auto\">\r\n            <div className=\"text-center mb-8\">\r\n              <Shield className=\"w-16 h-16 text-blue-600 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                Enhance Your Safety\r\n              </h2>\r\n              <p className=\"text-gray-600\">\r\n                Add facial verification for additional security and trust in your interactions.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\">\r\n              <h3 className=\"font-medium text-blue-900 mb-3\">What Facial Verification Provides:</h3>\r\n              <ul className=\"text-blue-800 space-y-2\">\r\n                <li className=\"flex items-start\">\r\n                  <CheckCircle className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                  <span>Additional evidence for dispute resolution</span>\r\n                </li>\r\n                <li className=\"flex items-start\">\r\n                  <CheckCircle className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                  <span>Enhanced participant verification</span>\r\n                </li>\r\n                <li className=\"flex items-start\">\r\n                  <CheckCircle className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                  <span>Stronger trust and accountability</span>\r\n                </li>\r\n                <li className=\"flex items-start\">\r\n                  <CheckCircle className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                  <span>Complements existing safety features</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\r\n              <div className=\"flex items-start\">\r\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-yellow-900 mb-1\">Privacy & Security:</h4>\r\n                  <ul className=\"text-yellow-800 text-sm space-y-1\">\r\n                    <li>• Photos are encrypted and stored securely</li>\r\n                    <li>• Auto-deletion after 48 hours</li>\r\n                    <li>• Only used for verification purposes</li>\r\n                    <li>• POPIA compliant data handling</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center\">\r\n              <p className=\"text-gray-600 mb-6\">\r\n                Facial verification is <strong>optional</strong> but recommended for enhanced safety.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 2: Facial Setup */}\r\n        {currentStep === 'facial_setup' && (\r\n          <div className=\"max-w-2xl mx-auto\">\r\n            <div className=\"text-center mb-8\">\r\n              <Users className=\"w-16 h-16 text-green-600 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                Participant Verification\r\n              </h2>\r\n              <p className=\"text-gray-600\">\r\n                Verify all participants for enhanced safety and trust.\r\n              </p>\r\n            </div>\r\n\r\n            <TripFacialLog\r\n              interactionId={`safety_${Date.now()}`}\r\n              participants={participants}\r\n              onComplete={handleFacialLogComplete}\r\n              onSkip={handleFacialLogSkip}\r\n              context={interactionType}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      {currentStep === 'consent' && (\r\n        <div className=\"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg\">\r\n          <div className=\"flex justify-end gap-3\">\r\n            <button\r\n              onClick={onCancel}\r\n              className=\"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n            >\r\n              Skip Enhancement\r\n            </button>\r\n            <button\r\n              onClick={handleConsentAccept}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Enhance Safety\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SafetyInteractionFlow;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { X, ChevronDown, ChevronUp, Check } from 'lucide-react';\r\n\r\nconst TermsOfReciprocityModal = ({ isOpen, onClose, onAccept, onDecline }) => {\r\n  const { t } = useTranslation();\r\n  const [isScrolledToBottom, setIsScrolledToBottom] = useState(false);\r\n  const [hasAccepted, setHasAccepted] = useState(false);\r\n  const [expandedSections, setExpandedSections] = useState({});\r\n\r\n  const handleScroll = (e) => {\r\n    const { scrollTop, scrollHeight, clientHeight } = e.target;\r\n    const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\r\n    setIsScrolledToBottom(isAtBottom);\r\n  };\r\n\r\n  const toggleSection = (sectionId) => {\r\n    setExpandedSections(prev => ({\r\n      ...prev,\r\n      [sectionId]: !prev[sectionId]\r\n    }));\r\n  };\r\n\r\n  const handleAccept = () => {\r\n    if (isScrolledToBottom && hasAccepted) {\r\n      onAccept();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold\">Terms of Reciprocity</h2>\r\n            <p className=\"text-blue-100 mt-1\">Salatiso Ecosystem - Building Trust Through Mutual Benefit</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-hidden flex flex-col\">\r\n          {/* Progress indicator */}\r\n          <div className=\"px-6 py-3 bg-gray-50 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between text-sm text-gray-600\">\r\n              <span>Please read all terms carefully</span>\r\n              <span className={`font-medium ${isScrolledToBottom ? 'text-green-600' : 'text-orange-600'}`}>\r\n                {isScrolledToBottom ? '✓ Fully Read' : 'Scroll to continue'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Scrollable content */}\r\n          <div\r\n            className=\"flex-1 overflow-y-auto px-6 py-4\"\r\n            onScroll={handleScroll}\r\n            style={{ maxHeight: '60vh' }}\r\n          >\r\n            <div className=\"space-y-6\">\r\n\r\n              {/* Introduction */}\r\n              <div className=\"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500\">\r\n                <h3 className=\"text-lg font-semibold text-blue-900 mb-2\">Welcome to the Salatiso Ecosystem</h3>\r\n                <p className=\"text-blue-800\">\r\n                  The Salatiso Ecosystem is built on principles of mutual benefit, trust, and reciprocity.\r\n                  By participating, you agree to contribute positively to the community while benefiting from\r\n                  the collective strength of our network.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Expandable Sections */}\r\n              <div className=\"space-y-4\">\r\n\r\n                {/* Section 1 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('trust')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">1. Trust & Safety Principles</span>\r\n                    {expandedSections.trust ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.trust && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Trust is the foundation of our ecosystem. All participants must:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Maintain honest and transparent communication</li>\r\n                        <li>Respect the privacy and dignity of all members</li>\r\n                        <li>Report suspicious activities promptly</li>\r\n                        <li>Contribute positively to community safety</li>\r\n                        <li>Use verification systems appropriately</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 2 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('reciprocity')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">2. Principle of Reciprocity</span>\r\n                    {expandedSections.reciprocity ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.reciprocity && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Reciprocity means mutual benefit and responsibility:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Benefits received should be balanced with contributions made</li>\r\n                        <li>Support fellow community members in times of need</li>\r\n                        <li>Share knowledge and resources appropriately</li>\r\n                        <li>Participate in community governance</li>\r\n                        <li>Maintain positive community standing</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 3 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('data')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">3. Data Privacy & Protection</span>\r\n                    {expandedSections.data ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.data && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Your privacy is protected under POPIA and our community standards:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Data is encrypted and securely stored</li>\r\n                        <li>Information is only shared with explicit consent</li>\r\n                        <li>You control your privacy settings</li>\r\n                        <li>Regular security audits ensure protection</li>\r\n                        <li>Data is automatically deleted when no longer needed</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 4 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('safety')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">4. Safety & Emergency Protocols</span>\r\n                    {expandedSections.safety ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.safety && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Safety is our highest priority:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Emergency contacts are verified and secure</li>\r\n                        <li>Location sharing is opt-in and time-limited</li>\r\n                        <li>Safety features work offline when possible</li>\r\n                        <li>Community validation enhances security</li>\r\n                        <li>Regular safety drills and training</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 5 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('verification')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">5. Identity Verification & Trust Building</span>\r\n                    {expandedSections.verification ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.verification && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Building trust through verification:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>ID validation uses secure, private methods</li>\r\n                        <li>Trust scores are community-validated</li>\r\n                        <li>Verification enhances but doesn't guarantee trust</li>\r\n                        <li>Appeals process for verification disputes</li>\r\n                        <li>Regular trust score recalibration</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 6 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('community')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">6. Community Participation</span>\r\n                    {expandedSections.community ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.community && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Active participation strengthens our community:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Vote in community governance decisions</li>\r\n                        <li>Participate in safety and trust validations</li>\r\n                        <li>Contribute to community knowledge base</li>\r\n                        <li>Support fellow members when possible</li>\r\n                        <li>Provide constructive feedback</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Section 7 */}\r\n                <div className=\"border border-gray-200 rounded-lg\">\r\n                  <button\r\n                    onClick={() => toggleSection('liability')}\r\n                    className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <span className=\"font-medium text-gray-900\">7. Liability & Dispute Resolution</span>\r\n                    {expandedSections.liability ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  {expandedSections.liability && (\r\n                    <div className=\"px-4 pb-4 text-gray-700\">\r\n                      <p className=\"mb-3\">\r\n                        Understanding responsibilities and recourse:\r\n                      </p>\r\n                      <ul className=\"list-disc list-inside space-y-2 ml-4\">\r\n                        <li>Community arbitration for disputes</li>\r\n                        <li>Escalation to formal mediation when needed</li>\r\n                        <li>Clear liability boundaries for all parties</li>\r\n                        <li>Insurance coverage for verified activities</li>\r\n                        <li>Regular review of dispute resolution processes</li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n              </div>\r\n\r\n              {/* Important Notice */}\r\n              <div className=\"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500\">\r\n                <h4 className=\"text-lg font-semibold text-yellow-900 mb-2\">Important Notice</h4>\r\n                <p className=\"text-yellow-800 text-sm\">\r\n                  These terms create a binding agreement between you and the Salatiso Ecosystem.\r\n                  By accepting, you agree to abide by our community standards and contribute positively\r\n                  to the mutual benefit of all members. Violation of these terms may result in\r\n                  temporary or permanent suspension from the ecosystem.\r\n                </p>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"border-t border-gray-200 p-6 bg-gray-50 rounded-b-lg\">\r\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n\r\n            {/* Acceptance checkbox */}\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"acceptTerms\"\r\n                checked={hasAccepted}\r\n                onChange={(e) => setHasAccepted(e.target.checked)}\r\n                className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"acceptTerms\" className=\"ml-2 text-sm text-gray-700\">\r\n                I have read and agree to the Terms of Reciprocity\r\n              </label>\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={onDecline}\r\n                className=\"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Decline\r\n              </button>\r\n              <button\r\n                onClick={handleAccept}\r\n                disabled={!isScrolledToBottom || !hasAccepted}\r\n                className={`px-6 py-2 rounded-lg transition-colors ${\r\n                  isScrolledToBottom && hasAccepted\r\n                    ? 'bg-blue-600 text-white hover:bg-blue-700'\r\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                }`}\r\n              >\r\n                Accept Terms\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status indicator */}\r\n          <div className=\"mt-4 text-center\">\r\n            <p className=\"text-xs text-gray-500\">\r\n              {!isScrolledToBottom && \"Please scroll to the bottom to continue\"}\r\n              {isScrolledToBottom && !hasAccepted && \"Please check the acceptance box to continue\"}\r\n              {isScrolledToBottom && hasAccepted && \"Ready to accept - click the button above\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TermsOfReciprocityModal;\r\n"],"names":["GuestContext","createContext","FacialRecognition","_ref","onCapture","_ref$userType","userType","_ref$className","className","_ref$context","context","_useState2","_slicedToArray","useState","isCapturing","setIsCapturing","_useState4","capturedImage","setCapturedImage","_useState6","isValidating","setIsValidating","_useState8","validationResult","setValidationResult","_useState0","error","setError","_useState10","hasPermission","setHasPermission","videoRef","useRef","canvasRef","streamRef","startCamera","useCallback","_asyncToGenerator","_regenerator","m","_callee","stream","_t","w","_context","p","n","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","v","current","srcObject","console","a","stopCamera","getTracks","forEach","track","stop","capturePhoto","canvas","getContext","videoWidth","videoHeight","drawImage","toBlob","_ref3","_callee2","blob","imageUrl","_context2","URL","createObjectURL","setTimeout","mockResult","isValid","confidence","livenessVerified","faceDetected","imageBlob","validation","timestamp","Date","toISOString","_x","apply","this","arguments","retakePhoto","resetProcess","React","useEffect","createElement","concat","User","Camera","onClick","ref","autoPlay","playsInline","muted","style","maxHeight","disabled","RefreshCw","src","alt","CheckCircle","XCircle","toFixed","AlertTriangle","Eye","alreadyWarned","warnOnce","i18n","code","msg","rest","isString","_i18n$services","_i18n$services2","_console","_i18n$services$logger","args","_objectSpread","services","logger","forward","warn","_console2","loadedClb","cb","isInitialized","initialized","off","on","loadNamespaces","ns","loadLanguages","lng","options","preload","indexOf","push","obj","matchHtmlEntity","htmlEntities","unescapeHtmlEntity","defaultOptions","bindI18n","bindI18nStore","transEmptyNodeValue","transSupportBasicHtmlNodes","transWrapTextNodes","transKeepBasicHtmlNodesFor","useSuspense","unescape","text","replace","I18nContext","ReportNamespaces","_classCallCheck","usedNamespaces","key","value","namespaces","_this","Object","keys","alwaysNewT","language","namespace","keyPrefix","getFixedT","useTranslation","_i18n$options$react","_i18n$options","_i18n$reportNamespace","_i18n$reportNamespace2","props","length","undefined","i18nFromProps","useContext","i18nFromContext","defaultNSFromContext","defaultNS","getI18n","reportNamespaces","notReadyT","k","optsOrDefaultValue","_typeof","defaultValue","Array","isArray","retNotReady","t","ready","react","wait","i18nOptions","getDefaults","addUsedNamespaces","call","initializedStoreOnce","every","languages","hasLoadedNamespace","precheck","i18nInstance","loadNotPending","backendConnector","backend","isLanguageChangingTo","memoGetT","useMemoizedT","nsMode","getT","getNewT","setT","joinedNS","join","ignore","previousJoinedNS","isMounted","boundReset","store","split","e","ret","Promise","resolve","TripFacialLog","interactionId","_ref$participants","participants","onComplete","onSkip","currentStep","setCurrentStep","facialLogs","setFacialLogs","isCompleted","setIsCompleted","skipped","setSkipped","steps","id","title","currentParticipant","Shield","map","step","index","participant","Users","name","role","capturedAt","toLocaleTimeString","data","participantId","captureData","prev","_defineProperty","toLowerCase","log","logData","facialLog","completedAt","totalParticipants","verifiedParticipants","reason","skippedAt","isMinimized","setIsMinimized","showIdValidator","setShowIdValidator","idInput","setIdInput","tools","icon","CreditCard","action","description","MapPin","path","external","validateSAID","cleanId","test","validStructure","errors","message","digits","yy","parseInt","slice","mm","dd","currentYear","getFullYear","fullYear","date","getMonth","getDate","age","citizenship","checksumValid","sum","alternate","i","luhnCheck","gender","dateOfBirth","String","padStart","ChevronUp","Fragment","ChevronDown","tool","window","open","location","href","handleToolClick","ExternalLink","X","type","onChange","target","placeholder","maxLength","result","trim","_validationResult$err","onVerificationComplete","_ref$requireFacial","requireFacial","_ref$requireNationali","requireNationality","_useContext","guestData","setGuestData","isVerifying","setIsVerifying","idNumber","idType","nationality","workPermit","facialVerified","idVerified","nationalityConfirmed","verificationData","setVerificationData","showFacialRecognition","setShowFacialRecognition","calculateTrustScore","score","Math","min","label","valid","year","substring","month","day","birthYear","digit","toString","validateSouthAfricanID","facialData","Globe","nat","verificationRecord","verifiedAt","now","trustScore","updatedGuestData","verifications","_toConsumableArray","max","_ref$interactionType","interactionType","onCancel","facialLogData","setFacialLogData","consent","facial_setup","verification","complete","getInteractionTitle","facialVerification","reload","safetyEnhanced","skipData","isOpen","onClose","onAccept","onDecline","isScrolledToBottom","setIsScrolledToBottom","hasAccepted","setHasAccepted","expandedSections","setExpandedSections","toggleSection","sectionId","onScroll","_e$target","scrollTop","scrollHeight","clientHeight","trust","reciprocity","safety","community","liability","checked","htmlFor"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6]}